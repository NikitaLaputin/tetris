(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],[,,,function(t,e,n){t.exports={"buttons-container":"button_buttons-container__1955V","button-container":"button_button-container__39fQB","tetris-button":"button_tetris-button__eItG2","tetris-option-button":"button_tetris-option-button__3Kl3U","tetris-button__active":"button_tetris-button__active__26vlf","tetris-option-button__active":"button_tetris-option-button__active__1vvTZ","tetris-button__dark":"button_tetris-button__dark__2RK1f","tetris-button__dark__active":"button_tetris-button__dark__active__1fMOD","tetris-option-button__dark":"button_tetris-option-button__dark__1HGSl","tetris-option-button__dark__active":"button_tetris-option-button__dark__active__W25rR"}},,function(t,e,n){t.exports={"canvas-container":"field_canvas-container__1U1ww","canvas-container__dark":"field_canvas-container__dark__2GoQP","canvas-container__light":"field_canvas-container__light__25KvA",text:"field_text__504n6"}},,,,,,,,,,function(t,e,n){t.exports={"info-column":"info_info-column__2XUG0",info:"info_info__3GloF"}},function(t,e,n){t.exports={"tetris-container":"game_tetris-container__2gHB5","tetris-container__light":"game_tetris-container__light__11ybi","tetris-container__dark":"game_tetris-container__dark__3bHhN"}},,,function(t,e,n){t.exports={"display-container":"display_display-container__NotnD"}},function(t){t.exports=JSON.parse('{"a":"1.1.1"}')},function(t,e,n){t.exports={version:"styles_version__3zm86"}},function(t,e,n){t.exports=n(34)},,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(11),c=n.n(a),i=n(1),u=n(19),s=n.n(u),l=n(4),f=n(2),p=n(10),b={I:[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],J:[[0,2,0],[0,2,0],[2,2,0]],L:[[0,3,0],[0,3,0],[0,3,3]],O:[[4,4],[4,4]],S:[[0,5,5],[5,5,0],[0,0,0]],T:[[0,0,0],[6,6,6],[0,6,0]],Z:[[7,7,0],[0,7,7],[0,0,0]]},d=["rgba(255, 255, 255, 1)","rgba(0, 243, 255, 1)","rgba(0, 90, 255, 1)","rgba(255, 118, 0, 1)","rgba(255, 247, 0, 1)","rgba(0, 255, 102, 1)","rgba(133, 0, 255, 1)","rgba(255, 0, 0, 1)"],v=4,O={I:[3,v-4],J:[3,v-3],L:[3,v-3],O:[4,v-2],S:[3,v-3],T:[3,v-3],Z:[3,v-3]},g={shape:b.I,position:O.I},h=window.devicePixelRatio,m=20*h;function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y=function(t){return Math.min.apply(Math,Object(p.a)(t.map((function(t){return~(e=t).findIndex((function(t){return t}))?e.findIndex((function(t){return t})):e.length-1;var e}))))},j=function(t){return Math.max.apply(Math,Object(p.a)(t.map((function(t){return t.reduce((function(t,e,n){return e?n:t}),0)}))))},w=function(t){return Math.max.apply(Math,Object(p.a)(t.map((function(t,e){return t.reduce((function(t,n){return n?e:t}),0)}))))},S=function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(c+w(n)>=t.length-1||t[i+c+1]&&t[i+c+1][u+a]))return!1;return!0},k=function(t,e,n){return t>e&&t<n},R=function(t,e,n){return t.map((function(t,r){return t.map((function(t,o){return k(r,n[1]-1,n[1]+e.length)&&k(o,n[0]-1,n[0]+e[r-n[1]].length)&&e[r-n[1]][o-n[0]]?e[r-n[1]][o-n[0]]:t}))}))},A=function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+y(n)<0||a+j(n)>9||c+w(n)>=20+v||t[i+c]&&t[i+c][u+a]))return!0;return!1},T=function(t){return t.reduce((function(t,e){return e.filter((function(t){return t})).length?++t:t}),0)},x=function(t){var e=t.score,n=t.level;switch(t.lines){case 1:return e+40*(n+1);case 2:return e+100*(n+1);case 3:return e+300*(n+1);case 4:return e+1200*(n+1);default:return e}},D=function(){return Object(p.a)("IJLOSTZ").sort((function(){return Math.round(2*Math.random()-1)}))},P=function(){var t=0,e=D();return function(){var n=e[t];return++t>6&&(t=0,e=D()),{shape:b[n],position:O[n],locked:!1}}}(),M=function(t){return Math.min(Math.ceil(t/10),15)},N=function(t){return Math.round(1e3*Math.pow(.8-.007*(t-1),t-1)*1e5)/1e6},L=function(){var t={},e={},n=function(n,o){r(n),t[n]=setTimeout(n,o),e[n]={start:(new Date).getTime(),paused:!1,wait:o}},r=function(n){t[n]&&(clearTimeout(t[n]),delete t[n],delete e[n])},o=function(n){return t[n]&&e[n]&&e[n].paused};return{set:n,clear:r,pause:function(n){if(t[n]&&!o(n)){clearTimeout(t[n]);var r=(new Date).getTime(),a=e[n].wait-(r-e[n].start);e[n]={start:r,wait:a,paused:!0}}},resume:function(r){t[r]&&o(r)&&n(r,e[r].wait)}}}(),I=function(){var t={},e={},n={},r=function(n,r){o(n),t[n]=setInterval((function(){n(),e[n]={start:(new Date).getTime(),paused:!1,ms:r,wait:0}}),r),e[n]={start:(new Date).getTime(),paused:!1,ms:r,wait:0}},o=function(r){t[r]&&(clearInterval(t[r]),clearTimeout(n[r]),delete t[r],delete e[r])},a=function(n){return t[n]&&e[n]&&e[n].paused};return{set:r,clear:o,pause:function(r){if(t[r]&&!a(r)){clearInterval(t[r]),clearTimeout(n[r]);var o=(new Date).getTime(),c=e[r].ms-(o-e[r].start);e[r]=_({},e[r],{start:o,wait:c,paused:!0})}},resume:function(o){t[o]&&a(o)&&(n[o]=setTimeout((function(){o(),r(o,e[o].ms)}),e[o].wait))}}}(),C=function(t){return d[t.reduce((function(t,e){return t||e.reduce((function(t,e){return e||t}),0)}),0)]},G=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.split("(").map((function(t,n){return n?t.split(", ").map((function(t,n,r){return n<r.length-1?Math.max(Math.min(255,Math.floor(t*(100-e)/100)),0):t})).join(", "):t})).join("(")},U=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.split("(").map((function(t,n){return n?t.split(", ").map((function(t,n,r){return n<r.length-1?Math.max(Math.min(255,Math.floor((255-t)*e/100+ +t)),0):t})).join(", "):t})).join("(")},B=function(t,e){for(;S(t,e);){var n=e.position;e=_({},e,{position:[n[0],n[1]+1]})}return e},W="undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),K=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];e.forEach((function(e,r){return e.forEach((function(e,o){e&&t.clearRect((o+n[0])*m,(r+n[1])*m,m,m)}))}))},z=n(9),V=Object(z.a)((function(t){return t.activeBlock}),(function(t){var e=t.shape,n=t.locked;return{shape:e.map((function(t){return t.map((function(t){return t?t+8*!!n:0}))})),locked:n,position:[t.position[0],t.position[1]-v]}})),H=Object(z.a)((function(t){return t.field}),(function(t){return t.slice(v)})),F=function(t){return t.gameState.level},J=function(t){return t.gameState.score},Y=function(t){return t.highScore},X=function(t){return t.gameState.lines},q=function(t){return t.gameState},Z=function(t){return q(t).status},Q=function(t){return q(t).speed},$=Object(z.a)((function(t){return t.nextBlock}),(function(t,e,n,r){return{width:e,height:n,side:r}}),(function(t,e){var n=e.width,r=e.height,o=e.side,a=t.shape;return{shape:a,position:[Math.floor((n-a[0].length*o)/(2*o)*10)/10,Math.floor((r-a.length*o)/(2*o)*10)/10]}})),tt=Object(z.a)(H,V,(function(t,e){var n=B(t,e),r=n.shape,o=n.position;return{shape:r.map((function(t){return t.map((function(t){return t?"g":0}))})),position:o}})),et=Object(z.a)(V,tt,H,(function(t,e,n){var r=R(n,e.shape,e.position);return R(r,t.shape,t.position)}));function nt(t){var e=t.ctx,n=t.size,r=t.position,o=t.color,a=t.text,c=Object(f.a)(r,2),i=c[0],u=c[1];e.textAlign="center",e.lineWidth=3*h,e.font="".concat(n*h,"px monospace"),e.strikeStyle="black",e.strokeText(a,i,u,190*h),e.fillStyle=o,e.fillText(a,i,u,190*h)}var rt=function(t,e,n){var a=e.width,c=e.height,i=Object(r.useMemo)((function(){return a*h}),[a]),u=Object(r.useMemo)((function(){return c*h}),[c]),s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=s.current&&s.current.getContext("2d");if(e)return window.requestAnimationFrame((function(){return t(e)})),function(){return n&&window.requestAnimationFrame((function(){return n(e)}))}}),[t,n]),o.a.createElement("canvas",{ref:s,width:i,height:u,style:e})};function ot(t){var e=t.ctx,n=t.position,r=t.color,o=(t.locked,t.ghost),a=void 0!==o&&o,c=Object(f.a)(n,2),i=c[0],u=c[1];if(a)e.beginPath(),e.strokeStyle="#858fa5",e.lineWidth=2*h,e.rect(i+2*h,u+2*h,m-4*h,m-4*h),e.stroke();else{var s=e.createLinearGradient(i,u,i+m,u+m),l=r,p=G(r,35);s.addColorStop(0,l),s.addColorStop(.5,l),s.addColorStop(.5,p),s.addColorStop(1,p),e.fillStyle=s,e.fillRect(i+1*h,u+1*h,m-2*h,m-2*h)}}var at=function(t){var e=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.current=t}),[t]),e.current},ct=function(t){var e=at(t),n=Object(r.useMemo)((function(){return n=t,(r=e)?{renderArea:n.map((function(t,e){return t.map((function(t,n){return t?e<0||e>=r.length||n<0||n>=r[0].length?t:t===r[e][n]?0:t:t}))})),clearArea:n?r.map((function(t,e){return t.map((function(t,r){return e<0||e>=n.length||r<0||r>=n[0].length?t:t!==n[e][r]?t:0}))})):r.map((function(t){return new Array(t.length).fill(0)}))}:{renderArea:n,clearArea:n.map((function(t){return new Array(t.length).fill(0)}))};var n,r}),[t,e]);return{renderArea:n.renderArea,clearArea:n.clearArea}},it=n(5),ut=n.n(it);function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var lt=Object(r.memo)((function(){var t=Object(i.c)((function(t){return et(t)})),e=Object(i.c)((function(t){return Z(t)})),n=Object(i.c)((function(t){return Y(t)})),a=Object(i.c)((function(t){return J(t)})),c=Object(r.useMemo)((function(){return{width:200,height:400,position:"absolute",borderRadius:10}}),[]),u=ct(t),s=u.renderArea,f=u.clearArea,p=rt(Object(r.useCallback)((function(t){K(t,f),function(t){var e=t.field,n=t.ctx;e.forEach((function(t,e){t.forEach((function(t,r){if(t){var o=[r*m,e*m],a=t>d.length?U(d[t-8],75):d[t];ot({ctx:n,BLOCK_SIDE:m,position:o,color:a,ghost:!a})}}))}))}({field:s,ctx:t})}),[f,s]),c),b=rt(Object(r.useCallback)((function(r){var o=[t[0].length*m/2,(t.length-5)/2*m],c=[t[0].length*m/2,t.length/2*m];switch(e){case"NOT_STARTED":!function(t){var e=t.highScore,n=void 0===e?[]:e,r=t.ctx,o=t.color,a=t.position,c=t.size;n.reduce((function(t,e,n){return e?t.concat(nt({ctx:r,size:c,position:[a[0],a[1]+30*h*(n+2)],color:o,text:"".concat(n+1,": ").concat(e)})):t}),[]).length?(nt({ctx:r,size:30,position:a,color:o,text:"PRESS START"}),nt({ctx:r,size:20,position:[a[0],a[1]+30*h],color:o,text:"HIGH SCORES:"})):nt({ctx:r,size:30,position:[a[0],a[1]+50*h],color:o,text:"PRESS START"})}({highScore:n,ctx:r,size:20,position:o,color:"#eaeaea"});break;case"GAME_PAUSED":nt({ctx:r,size:30,position:c,color:"#eaeaea",text:"PAUSED"});break;case"GAME OVER":!function(t){var e=t.ctx,n=t.color,r=t.position,o=t.highScore;void 0!==o&&o?(nt({ctx:e,size:30,position:r,color:n,text:"GAME OVER"}),nt({ctx:e,size:30,position:[r[0],r[1]+40*h],color:n,text:"NEW"}),nt({ctx:e,size:30,position:[r[0],r[1]+80*h],color:n,text:"HIGH SCORE!"})):nt({ctx:e,size:30,position:[r[0],r[1]+60*h],color:n,text:"GAME OVER"})}({ctx:r,highScore:n.includes(a),position:o,color:"#eaeaea"});break;default:return}}),[t,n,a,e]),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},c,{background:("NOT_STARTED"===e||"GAME_PAUSED"===e)&&"var(--bg-color-d)",zIndex:3}),Object(r.useCallback)((function(t){t.clearRect(0,0,c.width*h,c.height*h)}),[c.height,c.width]));return o.a.createElement("div",{className:"".concat(ut.a["canvas-container"]," ").concat(ut.a["canvas-container__dark"]),style:{height:400}},b,p)}));var ft=Object(r.memo)((function(){var t=Object(i.c)((function(t){return $(t,100*h,100*h,m)})),e=Object(i.c)((function(t){return Z(t)})),n=rt(Object(r.useCallback)((function(n){"NOT_STARTED"!==e&&function(t){var e=t.block,n=t.ctx,r=t.startingRow,o=void 0===r?v:r,a=t.offset,c=void 0===a?[0,0]:a,i=t.ghost,u=void 0!==i&&i;if(e){var s=e.shape,l=e.position,p=e.locked,b=Object(f.a)(l,2),d=b[0],O=b[1],g=C(s);s.forEach((function(t,e){return t.forEach((function(t,r){if(t){var a=[d*m+r*m+c[0],O*m+(e-o)*m+c[1]];ot({ctx:n,position:a,color:g,locked:p,ghost:u})}}))}))}}({block:t,ctx:n,startingRow:0})}),[t,e]),{width:100,height:100},Object(r.useCallback)((function(e){K(e,t.shape,t.position)}),[t.position,t.shape]));return o.a.createElement("div",{className:"".concat(ut.a["canvas-container"]," ").concat(ut.a["canvas-container__dark"])},o.a.createElement("div",{className:ut.a.text},"Next block"),n)})),pt=function(){return(new Date).getTime()};var bt="MERGE",dt=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],vt=function(t){return{type:bt,payload:t}};function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ht="PAUSE",mt="RESET",Et={status:"NOT_STARTED",lastAction:null,level:1,score:0,lines:0,speed:100},_t=function(){return{type:ht}},yt=n(15),jt=n.n(yt),wt=Object(r.memo)((function(){var t,e=Object(i.c)((function(t){return{level:F(t),score:J(t),lines:X(t),gameState:q(t)}})),n=e.level,a=e.score,c=e.lines,u=e.gameState,s=u.lastAction,l=Object(r.useState)(0),p=Object(f.a)(l,2),b=p[0],d=p[1],v=function(t,e){var n=Object(r.useState)(0),o=Object(f.a)(n,2),a=o[0],c=o[1],i=Object(r.useState)(pt()),u=Object(f.a)(i,2),s=u[0],l=u[1],p=Object(r.useState)(!0),b=Object(f.a)(p,2),d=b[0],v=b[1],O=Object(r.useRef)();Object(r.useEffect)((function(){O.current=t}),[t]);var g=Object(r.useCallback)((function(){l(pt()),v(!1)}),[]),h=Object(r.useCallback)((function(){v(!0),c(e-(pt()-s)),l(pt())}),[e,s]),m=Object(r.useCallback)((function(){d&&(v(!1),l(pt()))}),[d]),E=Object(r.useCallback)((function(){v(!1),c(e),l(pt())}),[e]);return Object(r.useEffect)((function(){var t=setInterval((function(){O.current(),c(0),l(pt())}),a||e);return d&&clearInterval(t),function(){clearInterval(t)}}),[e,d,a]),{start:g,pause:h,resume:m,reset:E}}(Object(r.useCallback)((function(){d((function(t){return t+1}))}),[]),1e3),O=v.start,g=v.pause,h=v.resume,m=v.reset;return Object(r.useEffect)((function(){"START"===s&&O(),s===mt&&(m(),d(0)),s!==ht&&"DEFEAT"!==s||g(),"RESUME"===s&&h()}),[u]),o.a.createElement("div",{className:jt.a["info-column"]},o.a.createElement("div",{className:"".concat(ut.a["canvas-container"]," ").concat(ut.a["canvas-container__dark"]," ").concat(jt.a.info)},o.a.createElement("div",null,"Level: ".concat(n)),o.a.createElement("div",null,"Score: ".concat(a)),o.a.createElement("div",null,"Lines: ".concat(c)),o.a.createElement("div",null,"Time: ".concat((t=b,"".concat(Math.floor(t/60),":").concat(("0"+Math.floor(t%60)).slice(-2)))))),o.a.createElement(ft,null))})),St=Object(r.memo)((function(){return o.a.createElement("div",{className:s.a["display-container"]},o.a.createElement(lt,null),o.a.createElement(wt,null))})),kt=W?"touchend":"mouseup",Rt=W?"touchstart":"mousedown",At=function(t,e){return t&&e&&e.toLowerCase()===t.toLowerCase()},Tt=function(t,e,n){return t&&e.type===n&&t.current.contains(e.target)};function xt(t){var e=t.targetKey,n=t.callback,o=t.continious,a=void 0!==o&&o,c=t.targetButton,i=void 0!==c&&c,u=t.frequency,s=void 0===u?100:u,l=t.delay,p=void 0===l?200:l,b=Object(r.useState)(!1),d=Object(f.a)(b,2),v=d[0],O=d[1],g=Object(r.useCallback)((function(t){var n=t.key;(At(e,n)||Tt(i,t,Rt))&&(t.preventDefault(),O(!0))}),[e]),h=Object(r.useCallback)((function(t){var n=t.key;(At(e,n)||Tt(i,t,kt))&&(t.preventDefault(),O(!1))}),[e]);return Object(r.useEffect)((function(){return window.addEventListener("keydown",g),window.addEventListener("keyup",h),i&&(window.addEventListener(Rt,g),window.addEventListener(kt,h)),function(){window.removeEventListener("keydown",g),window.removeEventListener("keydup",h),i&&(window.addEventListener(Rt,g),window.addEventListener(kt,h))}}),[e]),Object(r.useEffect)((function(){var t,e;if(n)return v&&n(),a&&(e=setTimeout((function(){return t=setInterval((function(){v&&a&&n()}),s)}),p)),function(){clearTimeout(e),clearInterval(t)}}),[v,a,p]),v}var Dt=n(3),Pt=n.n(Dt),Mt=Object(r.memo)((function(t){var e=t.style,n=t.text,r=t.pressed,a=t.btnRef;return o.a.createElement("div",{style:e,className:"".concat(Pt.a["button-container"])},o.a.createElement("button",{className:"\n        ".concat(Pt.a["tetris-option-button"]," ").concat(Pt.a["tetris-option-button__dark"],"\n        ").concat(r&&Pt.a["tetris-option-button__active"]," ").concat(r&&Pt.a["tetris-option-button__dark__active"],"\n        "),ref:a}),o.a.createElement("div",null,n))})),Nt=Object(r.memo)((function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=xt({targetKey:"s",callback:function(){return n({type:mt})},targetButton:a});return o.a.createElement(Mt,{style:e,btnRef:a,pressed:c,text:"Start"})})),Lt=Object(r.memo)((function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=xt({targetKey:"p",callback:function(){return n({type:"TOGGLE_PAUSE"})},targetButton:a});return o.a.createElement(Mt,{style:e,btnRef:a,pressed:c,text:"Pause"})}));function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gt="active-block/ROTATE",Ut="active-block/MOVE_RIGHT",Bt="active-block/MOVE_LEFT",Wt="active-block/MOVE_DOWN",Kt="active-block/SET_NEW_TETRIMINO",zt="active-block/LOCK",Vt="active-block/UNLOCK",Ht="active-block/DROP",Ft="active-block/MOVE_LOCK",Jt="active-block/MOVE_UNLOCK",Yt=function(){return{type:Wt}},Xt=function(t){return{type:Gt,payload:t}},qt=function(){return{type:Vt}},Zt=function(){return{type:Ht}},Qt=function(){return{type:Ft}},$t=function(){return{type:Jt}},te=Object(r.memo)((function(t){var e=t.style,n=t.btnRef,r=t.pressed,a=t.text;return o.a.createElement("div",{style:e,className:"".concat(Pt.a["button-container"]),ref:n},o.a.createElement("button",{className:"\n        ".concat(Pt.a["tetris-button"]," ").concat(Pt.a["tetris-button__dark"],"\n        ").concat(r&&Pt.a["tetris-button__active"]," ").concat(r&&Pt.a["tetris-button__dark__active"],"\n        "),tabIndex:"-1"}),o.a.createElement("span",null,a))})),ee=Object(r.memo)((function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=xt({targetKey:"ArrowLeft",callback:function(){return n({type:Bt})},continious:!0,targetButton:a});return o.a.createElement(te,{style:e,btnRef:a,pressed:c,text:"Left"})})),ne=Object(r.memo)((function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=xt({targetKey:"ArrowRight",callback:function(){return n({type:Ut})},continious:!0,targetButton:a});return o.a.createElement(te,{style:e,pressed:c,btnRef:a,text:"Right"})})),re=Object(r.memo)((function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=xt({targetKey:"ArrowUp",callback:function(){return n(Xt())},targetButton:a});return o.a.createElement(te,{style:e,btnRef:a,pressed:c,text:"Rotate"})}));var oe=Object(r.memo)((function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=xt({targetKey:"ArrowDown",callback:function(){return n(Yt())},continious:!0,frequency:75,targetButton:a});return Object(r.useEffect)((function(){n(c?Qt():$t())}),[n,c]),o.a.createElement(te,{style:e,pressed:c,btnRef:a,text:"Down"})}));var ae=Object(r.memo)((function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=xt({targetKey:" ",callback:function(){return n(Zt())},targetButton:a});return o.a.createElement(te,{style:e,btnRef:a,pressed:c,text:"Drop"})})),ce=Object(r.memo)((function(){return o.a.createElement("div",{className:Pt.a["buttons-container"]},o.a.createElement(Nt,{style:{gridArea:"start"}}),o.a.createElement(Lt,{style:{gridArea:"pause"}}),o.a.createElement(re,{style:{gridArea:"start / start / rotate / rotate"}}),o.a.createElement(ee,{style:{gridArea:"left"}}),o.a.createElement(oe,{style:{gridArea:"down"}}),o.a.createElement(ne,{style:{gridArea:"right"}}),o.a.createElement(ae,{style:{gridArea:"drop"}}))})),ie=function(t){Object(r.useEffect)((function(){return document.addEventListener("visibilitychange",t),function(){document.removeEventListener("visibilitychange",t)}}),[t])},ue=n(16),se=n.n(ue),le=Object(r.memo)((function(){var t=Object(i.b)();return ie((function(){return t(_t())})),o.a.createElement("div",{className:"".concat(se.a["tetris-container"]," ").concat(se.a["tetris-container__dark"])},o.a.createElement(St,null),o.a.createElement(ce,null))})),fe=n(7),pe=Object(fe.c)({activeBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case Gt:return r||t;case Bt:return Ct({},t,{position:[t.position[0]-1,t.position[1]]});case Ut:return Ct({},t,{position:[t.position[0]+1,t.position[1]]});case Wt:return Ct({},t,{position:[t.position[0],t.position[1]+1]});case Kt:return r;case mt:return P();case zt:return Ct({},t,{locked:!0});case Vt:return Ct({},t,{locked:!1});case Ft:return Ct({},t,{movementLocked:!0});case Jt:return Ct({},t,{movementLocked:!1});default:return t}},field:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case bt:var o=r.shape,a=r.position;return R(t,o,a);case"DESTROY_ROW":return r;case mt:return dt;default:return t}},nextBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0,n=e.type;switch(n){case Kt:case mt:return P();default:return t}},gameState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.lines;switch(n){case"START":return gt({},Et,{status:"Running",lastAction:"START"});case bt:return gt({},t,{score:t.score+10,lastAction:bt});case"DEFEAT":return gt({},t,{status:"GAME OVER",lastAction:"DEFEAT"});case"ROWS_DESTROYED":var o=M(t.lines+r),a=N(o);return gt({},t,{lines:t.lines+r,score:x(gt({},t,{lines:r})),level:o,speed:a,lastAction:"ROWS_DESTROYED"});case ht:return gt({},t,{status:"GAME_PAUSED",lastAction:ht});case"RESUME":return gt({},t,{status:"Running",lastAction:"RESUME"});case mt:return gt({},Et,{status:"Running",lastAction:mt});default:return t}},highScore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0,0],e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case"NEW_HIGH_SCORE":return t.concat(r).sort((function(t,e){return e-t})).slice(0,5);default:return t}}}),be=["START",mt],de=[Bt,Ut,Wt,Gt];function ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Oe=[function(t){return function(e){return function(n){var r=t.getState().gameState.status,o=n.type;return be.includes(o)?e(n):"GAME OVER"===r||"NOT_STARTED"===r||"GAME_PAUSED"===r&&"TOGGLE_PAUSE"!==o?void 0:e(n)}}},function(t){return function(e){return function(n){if("TOGGLE_PAUSE"===n.type){var r=t.getState().gameState.status;if("GAME_PAUSED"===r)return e({type:"RESUME"});if("Running"===r)return e(_t())}return e(n)}}},function(t){return function(e){return function(n){var r=function(){return e(Yt())};switch(n.type){case mt:e(n),I.set(r,Q(t.getState()));break;case ht:return I.pause(r),e(n);case"RESUME":return I.resume(r),e(n);case"DEFEAT":case Ft:return I.clear(r),e(n);case Jt:return I.set(r,Q(t.getState())),e(n);case"ROWS_DESTROYED":var o=Q(t.getState());e(n);var a=Q(t.getState());o!==a&&(I.clear(r),I.set(r,a));break;default:return e(n)}}}},function(t){return function(e){return function(n){switch(n.type){case Bt:var r=t.getState();(function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+y(n)<=0||t[i+c]&&t[i+c][u+a-1]))return!1;return!0})(H(r),V(r))&&e(n);break;case Ut:var o=t.getState();(function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+j(n)>=9||t[i+c]&&t[i+c][u+a+1]))return!1;return!0})(H(o),V(o))&&e(n);break;case Wt:var a=t.getState();if(V(a).locked)return;return e(n);case Ht:var c=t.getState(),i=c.field,u=c.activeBlock,s=B(i,u).position,l={shape:u.shape,position:s};return e(vt(l));case Gt:var p=t.getState(),b=p.field,d=p.activeBlock;e(Xt(function(t,e){var n,r=e.shape,o=e.position,a=e.locked,c={shape:(n=r,function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))}(n.slice().reverse())),position:o,locked:a},i=Math.floor(r.length/2);if(!A(t,c))return c;for(var u=Math.PI/2;u<=2*Math.PI;u*=2)for(var s=Math.floor(Math.cos(u)),l=s;0!==l&&Math.abs(l)<=i;l+=s)if(c=_({},c,{position:[o[0]+l,o[1]]}),!A(t,c))return c;return e}(b,d)));break;default:return e(n)}}}},function(t){return function(e){return function(n){var r=n.type;if(!de.includes(r))return e(n);e(n);var o=V(t.getState()),a=o.locked,c=H(t.getState()),i=S(c,o);a&&i&&e(qt()),a||i||e({type:zt})}}},function(t){return function(e){return function(n){var r=n.type,o=t.getState().nextBlock,a=function(){t.dispatch(vt(t.getState().activeBlock))};switch(r){case zt:return L.set(a,500),e(n);case Vt:return L.clear(a),e(n);case"TOGGLE_PAUSE":if("GAME_PAUSED"===t.getState().gameState.status)L.resume(a);else"Running"===t.getState().gameState.status&&L.pause(a);return e(n);case ht:return L.pause(a),e(n);case"RESUME":return L.resume(a),e(n);case bt:var c=n.payload,i=t.getState().field;if(S(i,c))return e(qt());e(n);var u=function(t){var e=T(t);t=t.map((function(e,n){return(r=e)&&r.length===r.filter((function(t){return t})).length?new Array(t[n].length).fill(0):e;var r})).sort((function(t){return t.filter((function(t){return t})).length?0:-1}));var n=T(t);return{matrix:t,rows:e-n}}(t.getState().field),s=u.matrix,l=u.rows;return e(function(t){return{type:"DESTROY_ROW",payload:t}}(s)),l>0&&t.dispatch({type:"ROWS_DESTROYED",lines:l}),t.dispatch(function(t){return{type:Kt,payload:t}}(o));case Kt:var f=t.getState(),p=f.field,b=f.nextBlock;if(A(p,b)){var d=J(f);return Y(f).reduce((function(t,e){return t||e<d}),!1)&&(e(function(t){return{type:"NEW_HIGH_SCORE",payload:t}}(d)),function(t){var e=JSON.stringify(t);localStorage.setItem("highScore",e)}(Y(t.getState()))),e(qt()),t.dispatch({type:"DEFEAT"})}e(n);break;default:return e(n)}}}}],ge=function(){try{var t=localStorage.getItem("highScore");return null===t?[0,0,0,0,0]:JSON.parse(t)}catch(e){return[0,0,0,0,0]}}(),he=fe.a.apply(void 0,Oe),me=(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(fe.e)(pe,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ve(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ve(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},pe,{highScore:ge}),he)),Ee=n(20),_e=n(21),ye=n.n(_e),je=Object(r.memo)((function(){return o.a.createElement("div",{className:ye.a.version},"v",Ee.a)}));n(32);var we=function(){return o.a.createElement(i.a,{store:me},o.a.createElement(le,null),o.a.createElement(je,null))},Se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ke(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}n(33);W&&document.addEventListener("touchend",(function(t){t.preventDefault()})),c.a.render(o.a.createElement(we,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/tetris",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/tetris","/service-worker.js");Se?(!function(t,e){fetch(t).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):ke(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ke(e,t)}))}}()}],[[22,1,2]]]);
//# sourceMappingURL=main.889fc869.chunk.js.map