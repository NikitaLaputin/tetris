{"version":3,"sources":["components/buttons/button.module.css","components/field/field.module.css","components/game/game.module.css","components/info/info.module.css","components/display/display.module.css","utils/consts.js","utils/index.js","redux/selectors/index.js","components/helpers/draw-text.js","hooks/use-canvas.js","components/helpers/draw-block.js","components/helpers/draw-tetrimino.js","components/helpers/draw-game-field.js","components/helpers/draw-field.js","components/field/index.js","components/helpers/draw-high-score.js","components/helpers/draw-game-over.js","components/next-block/index.js","hooks/use-interval.js","redux/ducks/field.js","redux/ducks/game-state.js","components/info/index.js","components/display/index.js","hooks/use-key-press.js","components/buttons/option-button.js","components/buttons/start.js","components/buttons/pause.js","redux/ducks/active-block.js","components/buttons/main-button.js","components/buttons/left.js","components/buttons/right.js","components/buttons/rotate.js","components/buttons/down.js","components/buttons/drop.js","components/buttons/index.js","components/game/index.js","hooks/use-tab-change.js","App.js","serviceWorker.js","redux/reduser/index.js","redux/ducks/next-block.js","redux/ducks/high-score.js","redux/middlewares/game-state-checker.js","redux/middlewares/block-locker.js","redux/store/index.js","redux/middlewares/pause-toggle.js","redux/middlewares/move-down.js","redux/middlewares/collision-check.js","redux/middlewares/destroy-row.js","localstorage/index.js","index.js"],"names":["module","exports","SHAPES","I","J","L","O","S","T","Z","colors","GAME_OVER","INVISIBLE_ROWS","SHAPE_POSITION","GAME_PAUSED","NOT_STARTED","DEFAULT_SHAPE","shape","position","PIXEL_RATIO","window","devicePixelRatio","getLeftPoint","matrix","Math","min","map","row","arr","findIndex","val","length","getRightPoint","max","reduce","acc","i","getBottomPoint","canMoveDown","field","block","x","y","cell","between","value","start","finish","mergeMatrix","target","ri","ci","collide","getFiledHeight","filter","calcNewScore","score","level","lines","randomizeShapes","sort","round","random","getNewTetrimino","randomArray","letter","locked","calcLevel","ceil","calcSpeed","pow","Timeout","keys","keyData","set","key","wait","clear","setTimeout","Date","getTime","paused","clearTimeout","pause","resume","Interval","keysTimeouts","ms","setInterval","clearInterval","getShapeColor","darkenColor","color","percent","split","floor","join","lightenColor","getGhostBlock","blockSelector","state","activeBlock","fieldSelector","levelSelector","gameState","scoreSelector","highScoreSelector","highScore","linesSelector","gameStateSelector","speedSelector","speed","nextBlockSelector","nextBlock","ghostBlockSelector","drawText","ctx","size","text","ratio","textAlign","lineWidth","font","strikeStyle","strokeText","fillStyle","fillText","useCanvas","deps","width","height","canvasWidth","canvasHeigth","ref","useRef","canvasEl","current","getContext","useEffect","clearRect","canvas","style","drawBlock","side","ghost","beginPath","strokeStyle","rect","stroke","closePath","lingrad","createLinearGradient","colorGradStart","colorGradEnd","addColorStop","fillRect","drawTetrimino","startingRow","offset","forEach","col","drawGameField","ghostBlock","drawField","Field","useSelector","status","center","res","concat","drawHighScore","drawGameOver","includes","className","styles","maxHeight","memo","now","MERGE","defaultState","mergeField","payload","type","START","DEFEAT","PAUSE","RESUME","RESET","lastAction","togglePause","reset","useState","time","setTime","callback","remaining","setRemaining","startTime","setStartTime","setPaused","savedCallback","interval","useInterval","useCallback","canvasStyles","info","Display","useKey","timeout","targetKey","continious","frequency","targetButton","pressed","setPressed","onDown","e","toLowerCase","preventDefault","contains","onUp","addEventListener","removeEventListener","OptionButton","onClick","dispatch","useDispatch","startGame","useKeyPress","togglePauseGame","ROTATE","MOVE_RIGHT","MOVE_LEFT","MOVE_DOWN","SET_NEW_TETRIMINO","LOCK","UNLOCK","DROP","MOVE_LOCK","MOVE_UNLOCK","moveRight","moveLeft","moveDown","rotate","unlock","drop","movementLock","movementUnlock","btnRef","tabIndex","rotateBlock","dropBlock","Buttons","gridArea","Game","document","useTabChange","App","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","combineReducers","action","movementLocked","newLevel","newSpeed","a","b","slice","alwaysDispatch","actions","middlewares","store","next","getState","speedBefore","speedAfter","getBlock","getField","canMoveLeft","canMoveRight","tetrimino","rotated","_","index","flipMatrix","reverse","maxDelta","deg","PI","delta","cos","dx","abs","rotateTetrimino","isMovingDown","dispatchMerge","heightBefore","Array","fill","heightAfter","rows","destroyFullRows","destroyRow","setNewTetrimino","setNewHighScore","serializedHighScore","JSON","stringify","localStorage","setItem","saveHighScore","getItem","parse","err","loadHighScore","enhancer","applyMiddleware","__REDUX_DEVTOOLS_EXTENSION__","createStore","reducer","ReactDOM","render","getElementById","URL","process","href","origin","fetch","response","contentType","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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QAEfC,GAAe,CACnB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5B,CAAC,EA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","file":"static/js/main.e31dc101.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons-container\":\"button_buttons-container__1955V\",\"button-container\":\"button_button-container__39fQB\",\"tetris-button\":\"button_tetris-button__eItG2\",\"tetris-option-button\":\"button_tetris-option-button__3Kl3U\",\"tetris-button__active\":\"button_tetris-button__active__26vlf\",\"tetris-option-button__active\":\"button_tetris-option-button__active__1vvTZ\",\"tetris-button__dark\":\"button_tetris-button__dark__2RK1f\",\"tetris-button__dark__active\":\"button_tetris-button__dark__active__1fMOD\",\"tetris-option-button__dark\":\"button_tetris-option-button__dark__1HGSl\",\"tetris-option-button__dark__active\":\"button_tetris-option-button__dark__active__W25rR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas-container\":\"field_canvas-container__1U1ww\",\"canvas-container__dark\":\"field_canvas-container__dark__2GoQP\",\"canvas-container__light\":\"field_canvas-container__light__25KvA\",\"text\":\"field_text__504n6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tetris-container\":\"game_tetris-container__2gHB5\",\"tetris-container__light\":\"game_tetris-container__light__11ybi\",\"tetris-container__dark\":\"game_tetris-container__dark__3bHhN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info-column\":\"info_info-column__2XUG0\",\"info\":\"info_info__3GloF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"display-container\":\"display_display-container__NotnD\"};","export const SHAPES = {\n  I: [\n    [0, 0, 1, 0, 0],\n    [0, 0, 1, 0, 0],\n    [0, 0, 1, 0, 0],\n    [0, 0, 1, 0, 0]\n  ],\n  J: [\n    [0, 2, 0],\n    [0, 2, 0],\n    [2, 2, 0]\n  ],\n  L: [\n    [0, 3, 0],\n    [0, 3, 0],\n    [0, 3, 3]\n  ],\n  O: [\n    [4, 4],\n    [4, 4]\n  ],\n  S: [\n    [0, 5, 5],\n    [5, 5, 0],\n    [0, 0, 0]\n  ],\n  T: [\n    [0, 0, 0],\n    [6, 6, 6],\n    [0, 6, 0]\n  ],\n  Z: [\n    [7, 7, 0],\n    [0, 7, 7],\n    [0, 0, 0]\n  ]\n};\nexport const SHAPES_LIST = \"IJLOSTZ\";\nexport const RIGHT = \"RIGHT\";\nexport const LEFT = \"LEFT\";\nexport const DOWN = \"DOWN\";\nexport const DEFAULT_POSITION = [3, 0];\nexport const colors = [\n  \"rgba(255, 255, 255, 1)\",\n  \"rgba(0, 243, 255, 1)\",\n  \"rgba(0, 90, 255, 1)\",\n  \"rgba(255, 118, 0, 1)\",\n  \"rgba(255, 247, 0, 1)\",\n  \"rgba(0, 255, 102, 1)\",\n  \"rgba(133, 0, 255, 1)\",\n  \"rgba(255, 0, 0, 1)\"\n];\nexport const IN_PROGRESS = \"Running\";\nexport const GAME_OVER = \"GAME OVER\";\nexport const INVISIBLE_ROWS = 4;\nexport const SHAPE_POSITION = {\n  I: [3, INVISIBLE_ROWS - 4],\n  J: [3, INVISIBLE_ROWS - 3],\n  L: [3, INVISIBLE_ROWS - 3],\n  O: [4, INVISIBLE_ROWS - 2],\n  S: [3, INVISIBLE_ROWS - 3],\n  T: [3, INVISIBLE_ROWS - 3],\n  Z: [3, INVISIBLE_ROWS - 3]\n};\nexport const MAX_LEVELS = 15;\nexport const GAME_PAUSED = \"GAME_PAUSED\";\nexport const NOT_STARTED = \"NOT_STARTED\";\nexport const LOCK_DELAY = 500;\nexport const DEFAULT_SHAPE = {\n  shape: SHAPES.I,\n  position: SHAPE_POSITION.I\n};\n\nexport const PIXEL_RATIO = (function() {\n  const dpr = window.devicePixelRatio;\n  return dpr;\n})();\n","import {\n  INVISIBLE_ROWS,\n  SHAPES_LIST,\n  SHAPES,\n  SHAPE_POSITION,\n  MAX_LEVELS,\n  colors\n} from \"./consts\";\n\nconst flipMatrix = matrix =>\n  matrix[0].map((_, index) => matrix.map(row => row[index]));\n\nconst firstNonzero = arr =>\n  !~arr.findIndex(val => val) ? arr.length - 1 : arr.findIndex(val => val);\n\nconst lastNonzero = arr => arr.reduce((acc, val, i) => (val ? i : acc), 0);\n\nconst getLeftPoint = matrix =>\n  Math.min(...matrix.map(row => firstNonzero(row)));\n\nconst getRightPoint = matrix =>\n  Math.max(...matrix.map(row => lastNonzero(row)));\n\nconst getBottomPoint = matrix =>\n  Math.max(\n    ...matrix.map((row, i) => row.reduce((acc, val) => (val ? i : acc), 0))\n  );\n\nexport const rotate = matrix => {\n  return flipMatrix(matrix.slice().reverse());\n};\n\nexport const canMoveLeft = (field, block) => {\n  const { shape, position } = block;\n  const [x, y] = position;\n  for (let row = 0; row < shape.length; row++)\n    for (let cell = 0; cell < shape[row].length; cell++)\n      if (\n        shape[row][cell] &&\n        (x + getLeftPoint(shape) <= 0 ||\n          (field[row + y] && field[row + y][cell + x - 1]))\n      )\n        return false;\n  return true;\n};\n\nexport const canMoveRight = (field, block) => {\n  const { shape, position } = block;\n  const [x, y] = position;\n  for (let row = 0; row < shape.length; row++)\n    for (let cell = 0; cell < shape[row].length; cell++)\n      if (\n        shape[row][cell] &&\n        (x + getRightPoint(shape) >= 9 ||\n          (field[row + y] && field[row + y][cell + x + 1]))\n      )\n        return false;\n  return true;\n};\n\nexport const canMoveDown = (field, block) => {\n  const { shape, position } = block;\n  const [x, y] = position;\n  for (let row = 0; row < shape.length; row++)\n    for (let cell = 0; cell < shape[row].length; cell++)\n      if (\n        shape[row][cell] &&\n        (y + getBottomPoint(shape) >= 19 + INVISIBLE_ROWS ||\n          (field[row + y + 1] && field[row + y + 1][cell + x]))\n      )\n        return false;\n  return true;\n};\n\nconst between = (value, start, finish) => value > start && value < finish;\n\nexport const mergeMatrix = (target, matrix, position) =>\n  target.map((row, ri) =>\n    row.map((cell, ci) =>\n      between(ri, position[1] - 1, position[1] + matrix.length) &&\n      between(\n        ci,\n        position[0] - 1,\n        position[0] + matrix[ri - position[1]].length\n      ) &&\n      matrix[ri - position[1]][ci - position[0]]\n        ? matrix[ri - position[1]][ci - position[0]]\n        : cell\n    )\n  );\n\nexport const collide = (field, block) => {\n  const { shape, position } = block;\n  const [x, y] = position;\n  for (let row = 0; row < shape.length; row++)\n    for (let cell = 0; cell < shape[row].length; cell++)\n      if (\n        shape[row][cell] &&\n        (x + getLeftPoint(shape) < 0 ||\n          x + getRightPoint(shape) > 9 ||\n          y + getBottomPoint(shape) >= 20 + INVISIBLE_ROWS ||\n          (field[row + y] && field[row + y][cell + x]))\n      )\n        return true;\n  return false;\n};\n\nexport const rotateTetrimino = (field, tetrimino) => {\n  const { shape, position, locked } = tetrimino;\n  let rotated = { shape: rotate(shape), position, locked };\n  const maxDelta = Math.floor(shape.length / 2);\n  if (!collide(field, rotated)) {\n    return rotated;\n  }\n  for (let deg = Math.PI / 2; deg <= Math.PI * 2; deg *= 2) {\n    const delta = Math.floor(Math.cos(deg));\n    for (let dx = delta; dx !== 0 && Math.abs(dx) <= maxDelta; dx += delta) {\n      rotated = {\n        ...rotated,\n        position: [position[0] + dx, position[1]]\n      };\n      if (!collide(field, rotated)) {\n        return rotated;\n      }\n    }\n  }\n  return tetrimino;\n};\n\nconst isFullRow = arr => arr && arr.length === arr.filter(val => val).length;\n\nconst isNullRow = arr => !arr.filter(val => val).length;\n\nexport const destroyFullRows = matrix => {\n  const heightBefore = getFiledHeight(matrix);\n  matrix = matrix\n    .map((row, i) =>\n      isFullRow(row) ? new Array(matrix[i].length).fill(0) : row\n    )\n    .sort(row => (isNullRow(row) ? -1 : 0));\n  const heightAfter = getFiledHeight(matrix);\n  const rows = heightBefore - heightAfter;\n  return {\n    matrix,\n    rows\n  };\n};\n\nexport const getFiledHeight = field =>\n  field.reduce((acc, row) => (row.filter(val => val).length ? ++acc : acc), 0);\n\nexport const calcNewScore = ({ score, level, lines }) => {\n  switch (lines) {\n    case 1:\n      return score + 40 * (level + 1);\n    case 2:\n      return score + 100 * (level + 1);\n    case 3:\n      return score + 300 * (level + 1);\n    case 4:\n      return score + 1200 * (level + 1);\n    default:\n      return score;\n  }\n};\n\nconst randomizeShapes = () =>\n  [...SHAPES_LIST].sort(() => Math.round(Math.random() * 2 - 1));\n\nexport const getNewTetrimino = (() => {\n  let i = 0;\n  let randomArray = randomizeShapes();\n  const getNextShape = () => {\n    const letter = randomArray[i];\n    i++;\n    if (i > 6) {\n      i = 0;\n      randomArray = randomizeShapes();\n    }\n    const shape = SHAPES[letter];\n    const position = SHAPE_POSITION[letter];\n    return { shape, position, locked: false };\n  };\n  return getNextShape;\n})();\n\nexport const calcLevel = lines => Math.min(Math.ceil(lines / 10), MAX_LEVELS);\n\nexport const calcSpeed = level =>\n  Math.round(Math.pow(0.8 - (level - 1) * 0.007, level - 1) * 1000 * 100000) /\n  100000;\n\nexport const Timeout = (() => {\n  const keys = {};\n  const keyData = {};\n  const set = (key, wait) => {\n    clear(key);\n    keys[key] = setTimeout(key, wait);\n    keyData[key] = { start: new Date().getTime(), paused: false, wait };\n  };\n\n  const clear = key => {\n    if (keys[key]) {\n      clearTimeout(keys[key]);\n      delete keys[key];\n      delete keyData[key];\n    }\n  };\n\n  const paused = key => keys[key] && keyData[key] && keyData[key].paused;\n\n  const pause = key => {\n    if (!keys[key]) return;\n    if (paused(key)) return;\n    clearTimeout(keys[key]);\n    const start = new Date().getTime();\n    const wait = keyData[key].wait - (start - keyData[key].start);\n\n    keyData[key] = { start, wait, paused: true };\n  };\n\n  const resume = key => {\n    if (!keys[key]) return;\n    if (!paused(key)) return;\n\n    set(key, keyData[key].wait);\n  };\n\n  return {\n    set,\n    clear,\n    pause,\n    resume\n  };\n})();\n\nexport const Interval = (() => {\n  const keys = {};\n  const keyData = {};\n  const keysTimeouts = {};\n  const set = (key, ms) => {\n    clear(key);\n    keys[key] = setInterval(() => {\n      key();\n      keyData[key] = {\n        start: new Date().getTime(),\n        paused: false,\n        ms,\n        wait: 0\n      };\n    }, ms);\n    keyData[key] = { start: new Date().getTime(), paused: false, ms, wait: 0 };\n  };\n\n  const clear = key => {\n    if (keys[key]) {\n      clearInterval(keys[key]);\n      clearTimeout(keysTimeouts[key]);\n      delete keys[key];\n      delete keyData[key];\n    }\n  };\n\n  const paused = key => keys[key] && keyData[key] && keyData[key].paused;\n\n  const pause = key => {\n    if (!keys[key]) return;\n    if (paused(key)) return;\n    clearInterval(keys[key]);\n    clearTimeout(keysTimeouts[key]);\n    const start = new Date().getTime();\n    const wait = keyData[key].ms - (start - keyData[key].start);\n\n    keyData[key] = { ...keyData[key], start, wait, paused: true };\n  };\n\n  const resume = key => {\n    if (!keys[key]) return;\n    if (!paused(key)) return;\n    keysTimeouts[key] = setTimeout(() => {\n      key();\n      set(key, keyData[key].ms);\n    }, keyData[key].wait);\n  };\n\n  return {\n    set,\n    clear,\n    pause,\n    resume\n  };\n})();\n\nexport const getShapeColor = shape =>\n  colors[\n    shape.reduce(\n      (acc, row) =>\n        acc ? acc : row.reduce((acc, cell) => (cell ? cell : acc), 0),\n      0\n    )\n  ];\n\nexport const darkenColor = (color, percent) =>\n  color\n    .split(\"(\")\n    .map((val, i) =>\n      i\n        ? val\n            .split(\", \")\n            .map((val, i, arr) =>\n              i < arr.length - 1\n                ? Math.max(\n                    Math.min(255, Math.floor((val * (100 - percent)) / 100)),\n                    0\n                  )\n                : val\n            )\n            .join(\", \")\n        : val\n    )\n    .join(\"(\");\n\nexport const lightenColor = (color, percent) =>\n  color\n    .split(\"(\")\n    .map((val, i) =>\n      i\n        ? val\n            .split(\", \")\n            .map((val, i, arr) =>\n              i < arr.length - 1\n                ? Math.max(\n                    Math.min(\n                      255,\n                      Math.floor(((255 - val) * percent) / 100 + +val)\n                    ),\n                    0\n                  )\n                : val\n            )\n            .join(\", \")\n        : val\n    )\n    .join(\"(\");\n\nexport const getGhostBlock = (field, block) => {\n  while (canMoveDown(field, block)) {\n    const { position } = block;\n    block = {\n      ...block,\n      position: [position[0], position[1] + 1]\n    };\n  }\n  return block;\n};\n","import { getGhostBlock } from \"../../utils\";\n\nexport const blockSelector = state => state.activeBlock;\nexport const fieldSelector = state => state.field;\nexport const levelSelector = state => state.gameState.level;\nexport const scoreSelector = state => state.gameState.score;\nexport const highScoreSelector = state => state.highScore;\nexport const linesSelector = state => state.gameState.lines;\nexport const gameStateSelector = state => state.gameState;\nexport const gameStatusSelector = state => gameStateSelector(state).status;\nexport const gameLastActionSelector = state =>\n  gameStateSelector(state).lastAction;\nexport const speedSelector = state => gameStateSelector(state).speed;\nexport const nextBlockSelector = state => state.nextBlock;\nexport const ghostBlockSelector = state =>\n  getGhostBlock(fieldSelector(state), blockSelector(state));\n","export default function drawText({\n  ctx,\n  size,\n  position,\n  color,\n  text,\n  ratio = 1\n}) {\n  const [x, y] = position;\n  ctx.textAlign = \"center\";\n  ctx.lineWidth = 3 * ratio;\n  ctx.font = `${size * ratio}px monospace`;\n  ctx.strikeStyle = \"black\";\n  ctx.strokeText(text, x, y, 190 * ratio);\n  ctx.fillStyle = color;\n  ctx.fillText(text, x, y, 190 * ratio);\n}\n","import React, { useRef, useEffect } from \"react\";\nimport { PIXEL_RATIO } from \"../utils/consts\";\n\nexport default function useCanvas({ width, height }, deps) {\n  const canvasWidth = width * PIXEL_RATIO;\n  const canvasHeigth = height * PIXEL_RATIO;\n  const ref = useRef(null);\n  const canvasEl = ref.current;\n  const ctx = canvasEl && canvasEl.getContext(\"2d\");\n\n  useEffect(() => {\n    if (ctx) ctx.clearRect(0, 0, canvasWidth, canvasHeigth);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [...deps]);\n\n  const canvas = (\n    <canvas\n      ref={ref}\n      width={canvasWidth}\n      height={canvasHeigth}\n      style={{\n        width: canvasWidth / PIXEL_RATIO,\n        height: canvasHeigth / PIXEL_RATIO\n      }}\n    />\n  );\n\n  return {\n    canvas,\n    ctx,\n    ratio: PIXEL_RATIO\n  };\n}\n","import { darkenColor, lightenColor } from \"../../utils\";\n\nexport default function drawBlock({\n  ctx,\n  side,\n  position,\n  color,\n  locked = false,\n  ghost = false,\n  ratio = 1\n}) {\n  const [x, y] = position;\n  if (ghost) {\n    ctx.beginPath();\n    ctx.strokeStyle = \"#858fa5\";\n    ctx.lineWidth = 2 * ratio;\n    ctx.rect(x + 2 * ratio, y + 2 * ratio, side - 4 * ratio, side - 4 * ratio);\n    ctx.stroke();\n    ctx.closePath();\n  } else {\n    const lingrad = ctx.createLinearGradient(x, y, x + side, y + side);\n    const colorGradStart = locked ? lightenColor(color, 75) : color;\n    const colorGradEnd = locked\n      ? lightenColor(color, 25)\n      : darkenColor(color, 35);\n    lingrad.addColorStop(0, colorGradStart);\n    lingrad.addColorStop(0.5, colorGradStart);\n    lingrad.addColorStop(0.5, colorGradEnd);\n    lingrad.addColorStop(1, colorGradEnd);\n    ctx.beginPath();\n    ctx.fillStyle = lingrad;\n    ctx.fillRect(\n      x + 1 * ratio,\n      y + 1 * ratio,\n      side - 2 * ratio,\n      side - 2 * ratio\n    );\n    ctx.closePath();\n  }\n}\n","import { INVISIBLE_ROWS } from \"../../utils/consts\";\nimport { getShapeColor } from \"../../utils\";\nimport drawBlock from \"./draw-block\";\n\nexport default function drawTetrimino({\n  block,\n  ctx,\n  side,\n  startingRow = INVISIBLE_ROWS,\n  offset = [0, 0],\n  ghost = false,\n  ratio = 1\n}) {\n  if (!block) return;\n  const { shape, position, locked } = block;\n  const [x, y] = position;\n  let color = getShapeColor(shape);\n\n  shape.forEach((row, ri) =>\n    row.forEach((col, ci) => {\n      if (!col) return;\n      const position = [\n        x * side + ci * side + offset[0],\n        y * side + (ri - startingRow) * side + offset[1]\n      ];\n      drawBlock({ ctx, side, position, color, locked, ghost, ratio });\n    })\n  );\n}\n","import drawField from \"./draw-field\";\nimport drawTetrimino from \"./draw-tetrimino\";\n\nexport default function drawGameField({\n  field,\n  ctx,\n  side,\n  ratio,\n  block,\n  ghostBlock\n}) {\n  drawField({ field, ctx, side, ratio });\n  drawTetrimino({\n    ratio,\n    block: ghostBlock,\n    ctx,\n    side,\n    ghost: true\n  });\n  drawTetrimino({\n    ratio,\n    block,\n    ctx,\n    side\n  });\n}\n","import { colors, INVISIBLE_ROWS } from \"../../utils/consts\";\nimport drawBlock from \"./draw-block\";\n\nexport default function drawField({ field, ctx, side, ratio }) {\n  field.forEach((row, ri) => {\n    if (ri > INVISIBLE_ROWS - 1)\n      row.forEach((col, ci) => {\n        if (!col) return;\n        const position = [ci * side, (ri - INVISIBLE_ROWS) * side];\n        const color = colors[field[ri][ci]];\n        drawBlock({ ctx, side, position, color, ratio });\n      });\n  });\n}\n","import React, { useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  blockSelector,\n  fieldSelector,\n  gameStateSelector,\n  ghostBlockSelector,\n  highScoreSelector,\n  scoreSelector\n} from \"../../redux/selectors\";\nimport styles from \"./field.module.css\";\nimport {\n  NOT_STARTED,\n  INVISIBLE_ROWS,\n  GAME_PAUSED,\n  GAME_OVER\n} from \"../../utils/consts\";\nimport drawText from \"../helpers/draw-text\";\nimport useCanvas from \"../../hooks/use-canvas\";\nimport drawHighScore from \"../helpers/draw-high-score\";\nimport drawGameField from \"../helpers/draw-game-field\";\nimport drawGameOver from \"../helpers/draw-game-over\";\n\nexport default function Field() {\n  const { block, field, ghostBlock, gameState, highScore, score } = useSelector(\n    state => ({\n      block: blockSelector(state),\n      field: fieldSelector(state),\n      ghostBlock: ghostBlockSelector(state),\n      gameState: gameStateSelector(state),\n      highScore: highScoreSelector(state),\n      score: scoreSelector(state)\n    })\n  );\n  const { status } = gameState;\n  const dependencies = [block, field, status];\n  const { canvas, ctx, ratio } = useCanvas(\n    { width: 200, height: 400 },\n    dependencies\n  );\n\n  useEffect(() => {\n    if (ctx) {\n      const side = 20 * ratio;\n      const color = \"#eaeaea\";\n      const position = [\n        (field[0].length * side) / 2,\n        ((field.length - INVISIBLE_ROWS - 5) / 2) * side\n      ];\n      const center = [\n        (field[0].length * side) / 2,\n        ((field.length - INVISIBLE_ROWS) / 2) * side\n      ];\n      switch (status) {\n        case NOT_STARTED:\n          drawHighScore({\n            highScore,\n            ctx,\n            size: 20,\n            position,\n            color,\n            ratio\n          });\n          break;\n        case GAME_PAUSED:\n          drawText({\n            ratio,\n            ctx,\n            size: 30,\n            position: center,\n            color,\n            text: \"PAUSED\"\n          });\n          break;\n        case GAME_OVER:\n          drawGameOver({\n            ctx,\n            side,\n            ratio,\n            block,\n            ghostBlock,\n            highScore: highScore.includes(score),\n            position,\n            field,\n            color\n          });\n          break;\n        default:\n          drawGameField({\n            ctx,\n            side,\n            ratio,\n            field,\n            block,\n            ghostBlock\n          });\n      }\n    }\n  }, [block, field, status, highScore, ctx, ratio, ghostBlock, score]);\n\n  return (\n    <div\n      className={`${styles[\"canvas-container\"]} ${styles[\"canvas-container__dark\"]}`}\n      style={{ maxHeight: 400 }}\n    >\n      {canvas}\n    </div>\n  );\n}\n","import drawText from \"./draw-text\";\n\nexport default function drawHighScore({\n  highScore = [],\n  ctx,\n  color,\n  position,\n  ratio,\n  size\n}) {\n  drawText({\n    ratio,\n    ctx,\n    size: 30,\n    position,\n    color,\n    text: \"PRESS START\"\n  });\n  const highScores = highScore.reduce(\n    (res, val, i) =>\n      val\n        ? res.concat(\n            drawText({\n              ctx,\n              size,\n              position: [position[0], position[1] + 30 * ratio * (i + 2)],\n              color,\n              text: `${i + 1}: ${val}`,\n              ratio\n            })\n          )\n        : res,\n    []\n  );\n  if (highScores.length) {\n    drawText({\n      ctx,\n      size: 20,\n      position: [position[0], position[1] + 30 * ratio],\n      color,\n      text: \"HIGH SCORES:\",\n      ratio\n    });\n  }\n}\n","import drawGameField from \"./draw-game-field\";\nimport drawText from \"./draw-text\";\n\nexport default function drawGameOver({\n  ctx,\n  side,\n  ratio,\n  block,\n  ghostBlock,\n  color,\n  position,\n  highScore = false,\n  field\n}) {\n  drawGameField({\n    ctx,\n    side,\n    ratio,\n    block,\n    ghostBlock,\n    field\n  });\n  if (highScore) {\n    drawText({\n      ratio,\n      ctx,\n      size: 30,\n      position,\n      color,\n      text: \"GAME OVER\"\n    });\n    drawText({\n      ratio,\n      ctx,\n      size: 30,\n      position: [position[0], position[1] + 40 * ratio],\n      color,\n      text: \"NEW\"\n    });\n    drawText({\n      ratio,\n      ctx,\n      size: 30,\n      position: [position[0], position[1] + 80 * ratio],\n      color,\n      text: \"HIGH SCORE!\"\n    });\n  } else {\n    drawText({\n      ratio,\n      ctx,\n      size: 30,\n      position: [position[0], position[1] + 60 * ratio],\n      color,\n      text: \"GAME OVER\"\n    });\n  }\n}\n","import React, { useEffect, memo } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { nextBlockSelector } from \"../../redux/selectors\";\nimport drawTetrimino from \"../helpers/draw-tetrimino\";\nimport styles from \"../field/field.module.css\";\nimport useCanvas from \"../../hooks/use-canvas\";\n\nfunction NextBlock() {\n  const nextBlock = useSelector(state => nextBlockSelector(state));\n  const width = 100;\n  const height = 100;\n\n  const dependencies = [nextBlock];\n  const { canvas, ctx, ratio } = useCanvas({ width, height }, dependencies);\n  useEffect(() => {\n    if (ctx) {\n      const { shape } = nextBlock;\n      const side = 20 * ratio;\n      const x = Math.floor((width * ratio - shape[0].length * side) / 2);\n      const y = Math.floor((height * ratio - shape.length * side) / 2);\n      const position = [0, 0];\n      const block = { ...nextBlock, position };\n      const offset = [x, y];\n      drawTetrimino({\n        block,\n        ctx,\n        side,\n        ratio,\n        offset,\n        startingRow: 0\n      });\n    }\n  }, [nextBlock, ctx, ratio]);\n\n  return (\n    <div\n      className={`${styles[\"canvas-container\"]} ${styles[\"canvas-container__dark\"]}`}\n    >\n      <div className={styles.text}>Next block</div>\n      {canvas}\n    </div>\n  );\n}\nexport default memo(NextBlock);\n","import { useState, useEffect, useRef } from \"react\";\n\nconst now = () => new Date().getTime();\n\nexport default function useInterval(callback, ms) {\n  const [remaining, setRemaining] = useState(0);\n  const [startTime, setStartTime] = useState(now());\n  const [paused, setPaused] = useState(true);\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  const start = () => {\n    setStartTime(now());\n    setPaused(false);\n  };\n  const pause = () => {\n    setPaused(true);\n    setRemaining(ms - (now() - startTime));\n    setStartTime(now());\n  };\n  const resume = () => {\n    if (paused) {\n      setPaused(false);\n      setStartTime(now());\n    }\n  };\n  const reset = () => {\n    setPaused(false);\n    setRemaining(ms);\n    setStartTime(now());\n  };\n\n  useEffect(() => {\n    const interval = setInterval(\n      () => {\n        savedCallback.current();\n        setRemaining(0);\n        setStartTime(now());\n      },\n      remaining ? remaining : ms\n    );\n    if (paused) {\n      clearInterval(interval);\n    }\n    return () => {\n      clearInterval(interval);\n    };\n  }, [ms, paused, remaining]);\n\n  return {\n    start,\n    pause,\n    resume,\n    reset\n  };\n}\n","import { mergeMatrix } from \"../../utils\";\nimport { RESET } from \"./game-state\";\n\nexport const MERGE = \"MERGE\";\nexport const DESTROY_ROW = \"DESTROY_ROW\";\nconst defaultState = [\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n];\n\nexport default (state = defaultState, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case MERGE:\n      const { shape, position } = payload;\n      return mergeMatrix(state, shape, position);\n    case DESTROY_ROW:\n      return payload;\n    case RESET:\n      return defaultState;\n    default:\n      return state;\n  }\n};\n\nexport const mergeField = payload => ({\n  type: MERGE,\n  payload\n});\n\nexport const destroyRow = payload => ({\n  type: DESTROY_ROW,\n  payload\n});\n","import {\n  IN_PROGRESS,\n  GAME_OVER,\n  GAME_PAUSED,\n  NOT_STARTED\n} from \"../../utils/consts\";\nimport { MERGE } from \"./field\";\nimport { calcNewScore, calcLevel, calcSpeed } from \"../../utils\";\n\nexport const START = \"START\";\nexport const DEFEAT = \"DEFEAT\";\nexport const ROWS_DESTROYED = \"ROWS_DESTROYED\";\nexport const PAUSE = \"PAUSE\";\nexport const RESUME = \"RESUME\";\nexport const RESET = \"RESET\";\nexport const TOGGLE_PAUSE = \"TOGGLE_PAUSE\";\n\nconst defaultState = {\n  status: NOT_STARTED,\n  lastAction: null,\n  level: 1,\n  score: 0,\n  lines: 0,\n  speed: 1000\n};\n\nexport default (state = defaultState, action) => {\n  const { type, lines } = action;\n  switch (type) {\n    case START:\n      return { ...defaultState, status: IN_PROGRESS, lastAction: START };\n    case MERGE:\n      return { ...state, score: state.score + 10, lastAction: MERGE };\n    case DEFEAT:\n      return { ...state, status: GAME_OVER, lastAction: DEFEAT };\n    case ROWS_DESTROYED:\n      const newLevel = calcLevel(state.lines + lines);\n      const newSpeed = calcSpeed(newLevel);\n      return {\n        ...state,\n        lines: state.lines + lines,\n        score: calcNewScore({ ...state, lines }),\n        level: newLevel,\n        speed: newSpeed,\n        lastAction: ROWS_DESTROYED\n      };\n    case PAUSE:\n      return { ...state, status: GAME_PAUSED, lastAction: PAUSE };\n    case RESUME:\n      return { ...state, status: IN_PROGRESS, lastAction: RESUME };\n    case RESET:\n      return { ...defaultState, status: IN_PROGRESS, lastAction: RESET };\n    default:\n      return state;\n  }\n};\n\nexport const start = () => ({\n  type: START\n});\n\nexport const gameOver = () => ({\n  type: DEFEAT\n});\n\nexport const rowsDestroyed = lines => ({\n  type: ROWS_DESTROYED,\n  lines\n});\n\nexport const togglePause = () => ({\n  type: TOGGLE_PAUSE\n});\n\nexport const reset = () => ({\n  type: RESET\n});\n\nexport const pause = () => ({\n  type: PAUSE\n});\n\nexport const resume = () => ({\n  type: RESUME\n});\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState, useCallback, memo } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  levelSelector,\n  scoreSelector,\n  linesSelector,\n  gameStateSelector\n} from \"../../redux/selectors\";\nimport NextBlock from \"../next-block\";\nimport useInterval from \"../../hooks/use-interval\";\nimport {\n  START,\n  RESET,\n  PAUSE,\n  RESUME,\n  DEFEAT\n} from \"../../redux/ducks/game-state\";\nimport canvasStyles from \"../field/field.module.css\";\nimport styles from \"./info.module.css\";\n\nfunction Info() {\n  const { level, score, lines, gameState } = useSelector(state => ({\n    level: levelSelector(state),\n    score: scoreSelector(state),\n    lines: linesSelector(state),\n    gameState: gameStateSelector(state)\n  }));\n  const { lastAction } = gameState;\n  const [time, setTime] = useState(0);\n  const incrementTime = useCallback(() => {\n    setTime(time => time + 1);\n  }, []);\n  const { start, pause, resume, reset } = useInterval(incrementTime, 1000);\n\n  useEffect(() => {\n    if (lastAction === START) {\n      start();\n    }\n    if (lastAction === RESET) {\n      reset();\n      setTime(0);\n    }\n    if (lastAction === PAUSE || lastAction === DEFEAT) {\n      pause();\n    }\n    if (lastAction === RESUME) {\n      resume();\n    }\n  }, [gameState]);\n\n  return (\n    <div className={styles[\"info-column\"]}>\n      <div\n        className={`${canvasStyles[\"canvas-container\"]} ${canvasStyles[\"canvas-container__dark\"]} ${styles.info}`}\n      >\n        <div>{`Level: ${level}`}</div>\n        <div>{`Score: ${score}`}</div>\n        <div>{`Lines: ${lines}`}</div>\n        <div>{`Time: ${time}`}</div>\n      </div>\n      <NextBlock />\n    </div>\n  );\n}\n\nexport default memo(Info);\n","import React from \"react\";\nimport styles from \"./display.module.css\";\nimport Field from \"../field\";\nimport Info from \"../info\";\n\nexport default function Display() {\n  return (\n    <div className={styles[\"display-container\"]}>\n      <Field />\n      <Info />\n    </div>\n  );\n}\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect, useState } from \"react\";\n\nexport default function useKey({\n  targetKey,\n  callback,\n  continious = false,\n  frequency = 100,\n  targetButton = false\n}) {\n  let delay = 200;\n  let interval, timeout;\n  const [pressed, setPressed] = useState(false);\n\n  const onDown = e => {\n    const { key } = e;\n    if (targetKey && key && key.toLowerCase() === targetKey.toLowerCase()) {\n      e.preventDefault();\n      setPressed(true);\n    } else if (\n      targetButton &&\n      e.type === \"mousedown\" &&\n      targetButton.current.contains(e.target)\n    ) {\n      setPressed(true);\n    }\n  };\n  const onUp = e => {\n    const { key } = e;\n    if (targetKey && key && key.toLowerCase() === targetKey.toLowerCase()) {\n      setPressed(false);\n    } else if (\n      targetButton &&\n      e.type === \"mouseup\" &&\n      targetButton.current.contains(e.target)\n    ) {\n      setPressed(false);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", onDown);\n    window.addEventListener(\"keyup\", onUp);\n    if (targetButton) {\n      window.addEventListener(\"mousedown\", onDown);\n      window.addEventListener(\"mouseup\", onUp);\n    }\n    return () => {\n      window.removeEventListener(\"keydown\", onDown);\n      window.removeEventListener(\"keydup\", onUp);\n      if (targetButton) {\n        window.addEventListener(\"mousedown\", onDown);\n        window.addEventListener(\"mouseup\", onUp);\n      }\n    };\n  }, [targetKey]);\n\n  useEffect(() => {\n    if (!callback) return;\n    if (pressed) callback();\n    if (continious) {\n      timeout = setTimeout(\n        () =>\n          (interval = setInterval(() => {\n            if (pressed && continious) {\n              callback();\n            }\n          }, frequency)),\n        delay\n      );\n    }\n    return () => {\n      clearTimeout(timeout);\n      clearInterval(interval);\n    };\n  }, [pressed, continious, delay]);\n\n  return pressed;\n}\n","import React from \"react\";\nimport styles from \"./button.module.css\";\n\nexport default function OptionButton({ style, text, pressed, onClick }) {\n  return (\n    <div style={style} className={`${styles[\"button-container\"]}`}>\n      <button\n        className={`\n        ${styles[\"tetris-option-button\"]} ${\n          styles[\"tetris-option-button__dark\"]\n        }\n        ${pressed && styles[\"tetris-option-button__active\"]} ${pressed &&\n          styles[\"tetris-option-button__dark__active\"]}\n        `}\n        onClick={onClick}\n      ></button>\n      <span>{text}</span>\n    </div>\n  );\n}\n","import React, { memo } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { reset } from \"../../redux/ducks/game-state\";\nimport useKeyPress from \"../../hooks/use-key-press\";\nimport OptionButton from \"./option-button\";\n\nfunction StartButton({ style }) {\n  const dispatch = useDispatch();\n  const startGame = () => dispatch(reset());\n  const pressed = useKeyPress({ targetKey: \"s\", callback: startGame });\n  return (\n    <OptionButton\n      style={style}\n      onClick={startGame}\n      pressed={pressed}\n      text=\"Start\"\n    />\n  );\n}\n\nexport default memo(StartButton);\n","import React, { memo } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { togglePause } from \"../../redux/ducks/game-state\";\nimport useKeyPress from \"../../hooks/use-key-press\";\nimport OptionButton from \"./option-button\";\n\nfunction PauseButton({ style }) {\n  const dispatch = useDispatch();\n  const togglePauseGame = () => dispatch(togglePause());\n  const pressed = useKeyPress({ targetKey: \"p\", callback: togglePauseGame });\n  return (\n    <OptionButton\n      style={style}\n      onClick={togglePauseGame}\n      pressed={pressed}\n      text=\"Pause\"\n    />\n  );\n}\n\nexport default memo(PauseButton);\n","import { getNewTetrimino } from \"../../utils\";\nimport { RESET } from \"./game-state\";\nimport { DEFAULT_SHAPE } from \"../../utils/consts\";\n\nexport const ROTATE = \"active-block/ROTATE\";\nexport const MOVE_RIGHT = \"active-block/MOVE_RIGHT\";\nexport const MOVE_LEFT = \"active-block/MOVE_LEFT\";\nexport const MOVE_DOWN = \"active-block/MOVE_DOWN\";\nexport const SET_NEW_TETRIMINO = \"active-block/SET_NEW_TETRIMINO\";\nexport const LOCK = \"active-block/LOCK\";\nexport const UNLOCK = \"active-block/UNLOCK\";\nexport const DROP = \"active-block/DROP\";\nexport const MOVE_LOCK = \"active-block/MOVE_LOCK\";\nexport const MOVE_UNLOCK = \"active-block/MOVE_UNLOCK\";\n\nexport default (state = DEFAULT_SHAPE, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case ROTATE:\n      return payload ? payload : state;\n    case MOVE_LEFT:\n      return { ...state, position: [state.position[0] - 1, state.position[1]] };\n    case MOVE_RIGHT:\n      return { ...state, position: [state.position[0] + 1, state.position[1]] };\n    case MOVE_DOWN:\n      return { ...state, position: [state.position[0], state.position[1] + 1] };\n    case SET_NEW_TETRIMINO:\n      return payload;\n    case RESET:\n      return getNewTetrimino();\n    case LOCK:\n      return { ...state, locked: true };\n    case UNLOCK:\n      return { ...state, locked: false };\n    case MOVE_LOCK:\n      return { ...state, movementLocked: true };\n    case MOVE_UNLOCK:\n      return { ...state, movementLocked: false };\n    default:\n      return state;\n  }\n};\n\nexport const moveRight = () => ({\n  type: MOVE_RIGHT\n});\n\nexport const moveLeft = () => ({\n  type: MOVE_LEFT\n});\n\nexport const moveDown = () => ({\n  type: MOVE_DOWN\n});\n\nexport const rotate = payload => ({\n  type: ROTATE,\n  payload\n});\n\nexport const setNewTetrimino = payload => ({\n  type: SET_NEW_TETRIMINO,\n  payload\n});\n\nexport const lock = () => ({\n  type: LOCK\n});\n\nexport const unlock = () => ({\n  type: UNLOCK\n});\n\nexport const drop = () => ({\n  type: DROP\n});\n\nexport const movementLock = () => ({\n  type: MOVE_LOCK\n});\n\nexport const movementUnlock = () => ({\n  type: MOVE_UNLOCK\n});\n","import React, { memo } from \"react\";\nimport styles from \"./button.module.css\";\n\nfunction MainButton({ style, onClick, btnRef, pressed, text }) {\n  return (\n    <div style={style} className={`${styles[\"button-container\"]}`}>\n      <button\n        className={`\n        ${styles[\"tetris-button\"]} ${styles[\"tetris-button__dark\"]}\n        ${pressed && styles[\"tetris-button__active\"]} ${pressed &&\n          styles[\"tetris-button__dark__active\"]}\n        `}\n        onClick={onClick}\n        tabIndex=\"-1\"\n        ref={btnRef}\n      ></button>\n      <span>{text}</span>\n    </div>\n  );\n}\n\nexport default memo(MainButton);\n","import React, { memo, useRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport useKeyPress from \"../../hooks/use-key-press\";\nimport { moveLeft } from \"../../redux/ducks/active-block\";\nimport MainButton from \"./main-button\";\n\nfunction LeftButton({ style }) {\n  const dispatch = useDispatch();\n  const callback = () => dispatch(moveLeft());\n  const targetButton = useRef();\n  const pressed = useKeyPress({\n    targetKey: \"ArrowLeft\",\n    callback,\n    continious: true,\n    targetButton\n  });\n  return (\n    <MainButton\n      style={style}\n      btnRef={targetButton}\n      pressed={pressed}\n      text=\"Left\"\n    />\n  );\n}\n\nexport default memo(LeftButton);\n","import React, { memo, useRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport useKeyPress from \"../../hooks/use-key-press\";\nimport { moveRight } from \"../../redux/ducks/active-block\";\nimport MainButton from \"./main-button\";\n\nfunction RightButton({ style }) {\n  const dispatch = useDispatch();\n  const callback = () => dispatch(moveRight());\n  const targetButton = useRef();\n  const pressed = useKeyPress({\n    targetKey: \"ArrowRight\",\n    callback,\n    continious: true,\n    targetButton\n  });\n  return (\n    <MainButton\n      style={style}\n      pressed={pressed}\n      btnRef={targetButton}\n      text=\"Right\"\n    />\n  );\n}\n\nexport default memo(RightButton);\n","import React, { memo } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport useKeyPress from \"../../hooks/use-key-press\";\nimport { rotate } from \"../../redux/ducks/active-block\";\nimport MainButton from \"./main-button\";\n\nfunction RotateButton({ style }) {\n  const dispatch = useDispatch();\n  const rotateBlock = () => dispatch(rotate());\n  const pressed = useKeyPress({ targetKey: \"ArrowUp\", callback: rotateBlock });\n  return (\n    <MainButton\n      style={style}\n      onClick={rotateBlock}\n      pressed={pressed}\n      text=\"Rotate\"\n    />\n  );\n}\n\nexport default memo(RotateButton);\n","import React, { memo, useRef, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport useKeyPress from \"../../hooks/use-key-press\";\nimport {\n  moveDown,\n  movementLock,\n  movementUnlock\n} from \"../../redux/ducks/active-block\";\nimport MainButton from \"./main-button\";\n\nfunction DownButton({ style }) {\n  const dispatch = useDispatch();\n  const callback = () => dispatch(moveDown());\n  const targetButton = useRef();\n  const pressed = useKeyPress({\n    targetKey: \"ArrowDown\",\n    callback,\n    continious: true,\n    frequency: 75,\n    targetButton\n  });\n  useEffect(() => {\n    dispatch(pressed ? movementLock() : movementUnlock());\n  }, [dispatch, pressed]);\n  return (\n    <MainButton\n      style={style}\n      pressed={pressed}\n      btnRef={targetButton}\n      text=\"Down\"\n    />\n  );\n}\n\nexport default memo(DownButton);\n","import React, { memo } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport useKeyPress from \"../../hooks/use-key-press\";\nimport { drop } from \"../../redux/ducks/active-block\";\nimport MainButton from \"./main-button\";\n\nfunction DropButton({ style }) {\n  const dispatch = useDispatch();\n  const dropBlock = () => dispatch(drop());\n  const pressed = useKeyPress({ targetKey: \" \", callback: dropBlock });\n  return (\n    <MainButton\n      style={style}\n      onClick={dropBlock}\n      pressed={pressed}\n      text=\"Drop\"\n    />\n  );\n}\n\nexport default memo(DropButton);\n","import React from \"react\";\nimport Start from \"./start\";\nimport Pause from \"./pause\";\nimport styles from \"./button.module.css\";\nimport Left from \"./left\";\nimport Right from \"./right\";\nimport Rotate from \"./rotate\";\nimport Down from \"./down\";\nimport Drop from \"./drop\";\n\nexport default function Buttons() {\n  return (\n    <div className={styles[\"buttons-container\"]}>\n      <Start style={{ gridArea: \"start\" }} />\n      <Pause style={{ gridArea: \"pause\" }} />\n      <Rotate style={{ gridArea: \"start / start / rotate / rotate\" }} />\n      <Left style={{ gridArea: \"left\" }} />\n      <Down style={{ gridArea: \"down\" }} />\n      <Right style={{ gridArea: \"right\" }} />\n      <Drop style={{ gridArea: \"drop\" }} />\n    </div>\n  );\n}\n","import React from \"react\";\nimport styles from \"./game.module.css\";\nimport Display from \"../display\";\nimport Buttons from \"../buttons\";\nimport useTabChange from \"../../hooks/use-tab-change\";\nimport { useDispatch } from \"react-redux\";\nimport { pause } from \"../../redux/ducks/game-state\";\n\nexport default function Game() {\n  const dispatch = useDispatch();\n  const callback = () => dispatch(pause());\n  useTabChange(callback);\n  return (\n    <div\n      className={`${styles[\"tetris-container\"]} ${styles[\"tetris-container__dark\"]}`}\n    >\n      <Display />\n      <Buttons />\n    </div>\n  );\n}\n","import { useEffect } from \"react\";\n\nexport default function useTabChange(callback) {\n  useEffect(() => {\n    document.addEventListener(\"visibilitychange\", callback);\n    return () => {\n      document.removeEventListener(\"visibilitychange\", callback);\n    };\n  }, [callback]);\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport Game from \"./components/game\";\n\nfunction App() {\n  return <Game />;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from \"redux\";\nimport activeBlock from \"../ducks/active-block\";\nimport field from \"../ducks/field\";\nimport nextBlock from \"../ducks/next-block\";\nimport gameState from \"../ducks/game-state\";\nimport highScore from \"../ducks/high-score\";\n\nexport default combineReducers({\n  activeBlock,\n  field,\n  nextBlock,\n  gameState,\n  highScore\n});\n","import { SET_NEW_TETRIMINO } from \"./active-block\";\nimport { RESET } from \"./game-state\";\nimport { getNewTetrimino } from \"../../utils\";\nimport { DEFAULT_SHAPE } from \"../../utils/consts\";\n\nexport default (state = DEFAULT_SHAPE, action) => {\n  const { type } = action;\n  switch (type) {\n    case SET_NEW_TETRIMINO:\n      return getNewTetrimino();\n    case RESET:\n      return getNewTetrimino();\n    default:\n      return state;\n  }\n};\n","export const NEW_HIGH_SCORE = \"NEW_HIGH_SCORE\";\n\nexport default (state = [0, 0, 0, 0, 0], action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case NEW_HIGH_SCORE:\n      return state\n        .concat(payload)\n        .sort((a, b) => b - a)\n        .slice(0, 5);\n    default:\n      return state;\n  }\n};\n\nexport const setNewHighScore = payload => ({\n  type: NEW_HIGH_SCORE,\n  payload\n});\n","import { GAME_OVER, GAME_PAUSED, NOT_STARTED } from \"../../utils/consts\";\nimport { TOGGLE_PAUSE, RESET, START } from \"../ducks/game-state\";\n\nconst alwaysDispatch = [START, RESET];\n\nexport default store => next => action => {\n  const { status } = store.getState().gameState;\n  const { type } = action;\n  if (alwaysDispatch.includes(type)) return next(action);\n  if (\n    status === GAME_OVER ||\n    status === NOT_STARTED ||\n    (status === GAME_PAUSED && type !== TOGGLE_PAUSE)\n  ) {\n    return;\n  }\n  return next(action);\n};\n","import {\n  MOVE_LEFT,\n  MOVE_RIGHT,\n  MOVE_DOWN,\n  ROTATE,\n  unlock,\n  lock\n} from \"../ducks/active-block\";\nimport { canMoveDown } from \"../../utils\";\n\nconst actions = [MOVE_LEFT, MOVE_RIGHT, MOVE_DOWN, ROTATE];\n\nexport default store => next => action => {\n  const { type } = action;\n  if (actions.includes(type)) {\n    next(action);\n    const block = store.getState().activeBlock;\n    const locked = block.locked;\n    const field = store.getState().field;\n    const isMovingDown = canMoveDown(field, block);\n    if (locked && isMovingDown) {\n      next(unlock());\n    }\n    if (!locked && !isMovingDown) next(lock());\n  } else {\n    return next(action);\n  }\n};\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport reducer from \"../reduser\";\nimport collisionCheck from \"../middlewares/collision-check\";\nimport destroyRow from \"../middlewares/destroy-row\";\nimport gameStateChecker from \"../middlewares/game-state-checker\";\nimport blockLocker from \"../middlewares/block-locker\";\nimport pauseToggle from \"../middlewares/pause-toggle\";\nimport moveDown from \"../middlewares/move-down\";\nimport { loadHighScore } from \"../../localstorage\";\n\nconst middlewares = [\n  gameStateChecker,\n  pauseToggle,\n  moveDown,\n  collisionCheck,\n  blockLocker,\n  destroyRow\n];\nconst isDev = process.env.NODE_ENV === \"development\";\nconst highScore = loadHighScore();\nconst enhancer = applyMiddleware(...middlewares);\nconst devTools = window.__REDUX_DEVTOOLS_EXTENSION__\n  ? window.__REDUX_DEVTOOLS_EXTENSION__()\n  : f => f;\nconst store = createStore(\n  reducer,\n  { ...reducer, highScore },\n  isDev ? compose(enhancer, devTools) : enhancer\n);\n\nexport default store;\n\nwindow.store = store;\n","import { TOGGLE_PAUSE, resume, pause } from \"../ducks/game-state\";\nimport { GAME_PAUSED, IN_PROGRESS } from \"../../utils/consts\";\n\nexport default store => next => action => {\n  const { type } = action;\n  if (type === TOGGLE_PAUSE) {\n    const { status } = store.getState().gameState;\n    if (status === GAME_PAUSED) {\n      return next(resume());\n    } else {\n      if (status === IN_PROGRESS) return next(pause());\n    }\n  }\n  return next(action);\n};\n","import { moveDown, MOVE_LOCK, MOVE_UNLOCK } from \"../ducks/active-block\";\nimport {\n  RESET,\n  PAUSE,\n  RESUME,\n  DEFEAT,\n  ROWS_DESTROYED\n} from \"../ducks/game-state\";\nimport { Interval } from \"../../utils\";\nimport { speedSelector } from \"../selectors\";\n\nexport default store => next => action => {\n  const callback = () => next(moveDown());\n  const { type } = action;\n  switch (type) {\n    case RESET:\n      next(action);\n      Interval.set(callback, speedSelector(store.getState()));\n      break;\n    case PAUSE:\n      Interval.pause(callback);\n      return next(action);\n    case RESUME:\n      Interval.resume(callback);\n      return next(action);\n    case DEFEAT:\n      Interval.clear(callback);\n      return next(action);\n    case MOVE_LOCK:\n      Interval.clear(callback);\n      return next(action);\n    case MOVE_UNLOCK:\n      Interval.set(callback, speedSelector(store.getState()));\n      return next(action);\n    case ROWS_DESTROYED:\n      const speedBefore = speedSelector(store.getState());\n      next(action);\n      const speedAfter = speedSelector(store.getState());\n      if (speedBefore !== speedAfter) {\n        Interval.clear(callback);\n        Interval.set(callback, speedAfter);\n      }\n      break;\n    default:\n      return next(action);\n  }\n};\n","import {\n  canMoveLeft,\n  canMoveRight,\n  rotateTetrimino,\n  getGhostBlock\n} from \"../../utils\";\nimport {\n  MOVE_DOWN,\n  MOVE_LEFT,\n  MOVE_RIGHT,\n  ROTATE,\n  rotate,\n  DROP\n} from \"../ducks/active-block\";\nimport { mergeField } from \"../ducks/field\";\n\nexport default store => next => action => {\n  const { type } = action;\n  const getBlock = () => store.getState().activeBlock;\n  const getField = () => store.getState().field;\n  let block, locked;\n  switch (type) {\n    case MOVE_LEFT:\n      const isMovingLeft = canMoveLeft(getField(), getBlock());\n      if (isMovingLeft) {\n        next(action);\n      }\n      break;\n    case MOVE_RIGHT:\n      const isMovingRight = canMoveRight(getField(), getBlock());\n      if (isMovingRight) {\n        next(action);\n      }\n      break;\n    case MOVE_DOWN:\n      block = getBlock();\n      locked = block.locked;\n      if (locked) return;\n      return next(action);\n    case DROP:\n      block = getBlock();\n      const field = getField();\n      const ghostBlock = getGhostBlock(field, block);\n      return next(mergeField(ghostBlock));\n    case ROTATE:\n      next(rotate(rotateTetrimino(getField(), getBlock())));\n      break;\n    default:\n      return next(action);\n  }\n};\n","import { MERGE, destroyRow, mergeField } from \"../ducks/field\";\nimport { destroyFullRows, collide, canMoveDown, Timeout } from \"../../utils\";\nimport {\n  rowsDestroyed,\n  gameOver,\n  PAUSE,\n  RESUME,\n  TOGGLE_PAUSE\n} from \"../ducks/game-state\";\nimport {\n  SET_NEW_TETRIMINO,\n  setNewTetrimino,\n  unlock,\n  LOCK,\n  UNLOCK\n} from \"../ducks/active-block\";\nimport { LOCK_DELAY, GAME_PAUSED, IN_PROGRESS } from \"../../utils/consts\";\nimport { saveHighScore } from \"../../localstorage\";\nimport { scoreSelector, highScoreSelector } from \"../selectors\";\nimport { setNewHighScore } from \"../ducks/high-score\";\n\nexport default store => next => action => {\n  const { type } = action;\n  const nextBlock = store.getState().nextBlock;\n  const dispatchMerge = () => {\n    store.dispatch(mergeField(store.getState().activeBlock));\n  };\n  switch (type) {\n    case LOCK:\n      Timeout.set(dispatchMerge, LOCK_DELAY);\n      return next(action);\n    case UNLOCK:\n      Timeout.clear(dispatchMerge);\n      return next(action);\n    case TOGGLE_PAUSE:\n      const isPaused = store.getState().gameState.status === GAME_PAUSED;\n      if (isPaused) {\n        Timeout.resume(dispatchMerge);\n      } else {\n        const isRunning = store.getState().gameState.status === IN_PROGRESS;\n        if (isRunning) Timeout.pause(dispatchMerge);\n      }\n      return next(action);\n    case PAUSE:\n      Timeout.pause(dispatchMerge);\n      return next(action);\n    case RESUME:\n      Timeout.resume(dispatchMerge);\n      return next(action);\n    case MERGE:\n      const { payload } = action;\n      const field = store.getState().field;\n      const isMovingDown = canMoveDown(field, payload);\n      if (isMovingDown) {\n        return next(unlock());\n      }\n      next(action);\n      const mergedField = store.getState().field;\n      const { matrix, rows } = destroyFullRows(mergedField);\n      next(destroyRow(matrix));\n      if (rows > 0) {\n        store.dispatch(rowsDestroyed(rows));\n      }\n      return store.dispatch(setNewTetrimino(nextBlock));\n    case SET_NEW_TETRIMINO:\n      const state = store.getState();\n      if (collide(state.field, state.nextBlock)) {\n        const score = scoreSelector(state);\n        const highScore = highScoreSelector(state);\n        if (highScore.reduce((res, val) => (res ? res : val < score), false)) {\n          next(setNewHighScore(score));\n          saveHighScore(highScoreSelector(store.getState()));\n        }\n        next(unlock());\n        return store.dispatch(gameOver());\n      }\n      next(action);\n      break;\n    default:\n      return next(action);\n  }\n};\n","export const loadHighScore = () => {\n  try {\n    const serializedHighScore = localStorage.getItem(\"highScore\");\n    if (serializedHighScore === null) {\n      return [0, 0, 0, 0, 0];\n    }\n    return JSON.parse(serializedHighScore);\n  } catch (err) {\n    return [0, 0, 0, 0, 0];\n  }\n};\n\nexport const saveHighScore = score => {\n  const serializedHighScore = JSON.stringify(score);\n  localStorage.setItem(\"highScore\", serializedHighScore);\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}