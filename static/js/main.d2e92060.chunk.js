(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],[,,,function(t,e,n){t.exports={"buttons-container":"button_buttons-container__1955V","button-container":"button_button-container__39fQB","tetris-button":"button_tetris-button__eItG2","tetris-option-button":"button_tetris-option-button__3Kl3U","tetris-button__active":"button_tetris-button__active__26vlf","tetris-option-button__active":"button_tetris-option-button__active__1vvTZ","tetris-button__dark":"button_tetris-button__dark__2RK1f","tetris-button__dark__active":"button_tetris-button__dark__active__1fMOD","tetris-option-button__dark":"button_tetris-option-button__dark__1HGSl","tetris-option-button__dark__active":"button_tetris-option-button__dark__active__W25rR"}},,function(t,e,n){t.exports={"canvas-container":"field_canvas-container__1U1ww","canvas-container__dark":"field_canvas-container__dark__2GoQP","canvas-container__light":"field_canvas-container__light__25KvA",text:"field_text__504n6"}},,,,,,,,function(t,e,n){t.exports={"tetris-container":"game_tetris-container__2gHB5","tetris-container__light":"game_tetris-container__light__11ybi","tetris-container__dark":"game_tetris-container__dark__3bHhN"}},,,function(t,e,n){t.exports={"info-column":"info_info-column__2XUG0",info:"info_info__3GloF"}},,function(t,e,n){t.exports={"display-container":"display_display-container__NotnD"}},,function(t){t.exports=JSON.parse('{"a":"1.0.1"}')},function(t,e,n){t.exports={version:"styles_version__3zm86"}},function(t,e,n){t.exports=n(34)},,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(11),c=n.n(a),i=n(13),u=n.n(i),s=n(18),l=n.n(s),f=n(4),p=n(1),v=n(2),d=n(10),b={I:[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],J:[[0,2,0],[0,2,0],[2,2,0]],L:[[0,3,0],[0,3,0],[0,3,3]],O:[[4,4],[4,4]],S:[[0,5,5],[5,5,0],[0,0,0]],T:[[0,0,0],[6,6,6],[0,6,0]],Z:[[7,7,0],[0,7,7],[0,0,0]]},g=["rgba(255, 255, 255, 1)","rgba(0, 243, 255, 1)","rgba(0, 90, 255, 1)","rgba(255, 118, 0, 1)","rgba(255, 247, 0, 1)","rgba(0, 255, 102, 1)","rgba(133, 0, 255, 1)","rgba(255, 0, 0, 1)"],h=4,O={I:[3,h-4],J:[3,h-3],L:[3,h-3],O:[4,h-2],S:[3,h-3],T:[3,h-3],Z:[3,h-3]},m={shape:b.I,position:O.I},_=window.devicePixelRatio,y=20*_;function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=function(t){return Math.min.apply(Math,Object(d.a)(t.map((function(t){return~(e=t).findIndex((function(t){return t}))?e.findIndex((function(t){return t})):e.length-1;var e}))))},S=function(t){return Math.max.apply(Math,Object(d.a)(t.map((function(t){return t.reduce((function(t,e,n){return e?n:t}),0)}))))},k=function(t){return Math.max.apply(Math,Object(d.a)(t.map((function(t,e){return t.reduce((function(t,n){return n?e:t}),0)}))))},R=function(t,e){for(var n=e.shape,r=e.position,o=Object(v.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(c+k(n)>=t.length-1||t[i+c+1]&&t[i+c+1][u+a]))return!1;return!0},A=function(t,e,n){return t>e&&t<n},x=function(t,e,n){return t.map((function(t,r){return t.map((function(t,o){return A(r,n[1]-1,n[1]+e.length)&&A(o,n[0]-1,n[0]+e[r-n[1]].length)&&e[r-n[1]][o-n[0]]?e[r-n[1]][o-n[0]]:t}))}))},T=function(t,e){for(var n=e.shape,r=e.position,o=Object(v.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+j(n)<0||a+S(n)>9||c+k(n)>=20+h||t[i+c]&&t[i+c][u+a]))return!0;return!1},D=function(t){return t.reduce((function(t,e){return e.filter((function(t){return t})).length?++t:t}),0)},P=function(t){var e=t.score,n=t.level;switch(t.lines){case 1:return e+40*(n+1);case 2:return e+100*(n+1);case 3:return e+300*(n+1);case 4:return e+1200*(n+1);default:return e}},M=function(){return Object(d.a)("IJLOSTZ").sort((function(){return Math.round(2*Math.random()-1)}))},N=function(){var t=0,e=M();return function(){var n=e[t];return++t>6&&(t=0,e=M()),{shape:b[n],position:O[n],locked:!1}}}(),L=function(t){return Math.min(Math.ceil(t/10),15)},I=function(t){return Math.round(1e3*Math.pow(.8-.007*(t-1),t-1)*1e5)/1e5},G=function(){var t={},e={},n=function(n,o){r(n),t[n]=setTimeout(n,o),e[n]={start:(new Date).getTime(),paused:!1,wait:o}},r=function(n){t[n]&&(clearTimeout(t[n]),delete t[n],delete e[n])},o=function(n){return t[n]&&e[n]&&e[n].paused};return{set:n,clear:r,pause:function(n){if(t[n]&&!o(n)){clearTimeout(t[n]);var r=(new Date).getTime(),a=e[n].wait-(r-e[n].start);e[n]={start:r,wait:a,paused:!0}}},resume:function(r){t[r]&&o(r)&&n(r,e[r].wait)}}}(),C=function(){var t={},e={},n={},r=function(n,r){o(n),t[n]=setInterval((function(){n(),e[n]={start:(new Date).getTime(),paused:!1,ms:r,wait:0}}),r),e[n]={start:(new Date).getTime(),paused:!1,ms:r,wait:0}},o=function(r){t[r]&&(clearInterval(t[r]),clearTimeout(n[r]),delete t[r],delete e[r])},a=function(n){return t[n]&&e[n]&&e[n].paused};return{set:r,clear:o,pause:function(r){if(t[r]&&!a(r)){clearInterval(t[r]),clearTimeout(n[r]);var o=(new Date).getTime(),c=e[r].ms-(o-e[r].start);e[r]=w({},e[r],{start:o,wait:c,paused:!0})}},resume:function(o){t[o]&&a(o)&&(n[o]=setTimeout((function(){o(),r(o,e[o].ms)}),e[o].wait))}}}(),U=function(t){return g[t.reduce((function(t,e){return t||e.reduce((function(t,e){return e||t}),0)}),0)]},B=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.split("(").map((function(t,n){return n?t.split(", ").map((function(t,n,r){return n<r.length-1?Math.max(Math.min(255,Math.floor(t*(100-e)/100)),0):t})).join(", "):t})).join("(")},W=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.split("(").map((function(t,n){return n?t.split(", ").map((function(t,n,r){return n<r.length-1?Math.max(Math.min(255,Math.floor((255-t)*e/100+ +t)),0):t})).join(", "):t})).join("(")},K=function(t,e){for(;R(t,e);){var n=e.position;e=w({},e,{position:[n[0],n[1]+1]})}return e},z="undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),V=function(t){return"".concat(Math.floor(t/60),":").concat(("0"+Math.floor(t%60)).slice(-2))},H=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];e.forEach((function(e,r){return e.forEach((function(e,o){e&&t.clearRect((o+n[0])*y,(r+n[1])*y,y,y)}))}))},J=n(9),Y=Object(J.a)((function(t){return t.activeBlock}),(function(t){var e=t.shape,n=t.locked;return{shape:e.map((function(t){return t.map((function(t){return t?t+8*!!n:0}))})),locked:n,position:[t.position[0],t.position[1]-h]}})),F=Object(J.a)((function(t){return t.field}),(function(t){return t.slice(h)})),X=function(t){return t.gameState.level},q=function(t){return t.gameState.score},Z=function(t){return t.highScore},Q=function(t){return t.gameState.lines},$=function(t){return t.gameState},tt=function(t){return $(t).status},et=function(t){return $(t).speed},nt=Object(J.a)((function(t){return t.nextBlock}),(function(t,e,n,r){return{width:e,height:n,side:r}}),(function(t,e){var n=e.width,r=e.height,o=e.side,a=t.shape;return{shape:a,position:[Math.floor((n-a[0].length*o)/(2*o)*10)/10,Math.floor((r-a.length*o)/(2*o)*10)/10]}})),rt=Object(J.a)(F,Y,(function(t,e){var n=K(t,e),r=n.shape,o=n.position;return{shape:r.map((function(t){return t.map((function(t){return t?"g":0}))})),position:o}})),ot=Object(J.a)(Y,rt,F,(function(t,e,n){var r=x(n,e.shape,e.position);return x(r,t.shape,t.position)}));function at(t){var e=t.ctx,n=t.size,r=t.position,o=t.color,a=t.text,c=Object(v.a)(r,2),i=c[0],u=c[1];e.textAlign="center",e.lineWidth=3*_,e.font="".concat(n*_,"px monospace"),e.strikeStyle="black",e.strokeText(a,i,u,190*_),e.fillStyle=o,e.fillText(a,i,u,190*_)}var ct=function(t,e,n){var a=e.width,c=e.height,i=Object(r.useMemo)((function(){return a*_}),[a]),u=Object(r.useMemo)((function(){return c*_}),[c]),s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=s.current&&s.current.getContext("2d");if(e)return window.requestAnimationFrame((function(){return t(e)})),function(){return n&&window.requestAnimationFrame((function(){return n(e)}))}}),[t,n]),o.a.createElement("canvas",{ref:s,width:i,height:u,style:e})};function it(t){var e=t.ctx,n=t.position,r=t.color,o=(t.locked,t.ghost),a=void 0!==o&&o,c=Object(v.a)(n,2),i=c[0],u=c[1];if(a)e.beginPath(),e.strokeStyle="#858fa5",e.lineWidth=2*_,e.rect(i+2*_,u+2*_,y-4*_,y-4*_),e.stroke();else{var s=e.createLinearGradient(i,u,i+y,u+y),l=r,f=B(r,35);s.addColorStop(0,l),s.addColorStop(.5,l),s.addColorStop(.5,f),s.addColorStop(1,f),e.fillStyle=s,e.fillRect(i+1*_,u+1*_,y-2*_,y-2*_)}}var ut=function(t){var e=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.current=t}),[t]),e.current},st=function(t){var e=ut(t),n=Object(r.useMemo)((function(){return n=t,(r=e)?{renderArea:n.map((function(t,e){return t.map((function(t,n){return t?e<0||e>=r.length||n<0||n>=r[0].length?t:t===r[e][n]?0:t:t}))})),clearArea:n?r.map((function(t,e){return t.map((function(t,r){return e<0||e>=n.length||r<0||r>=n[0].length?t:t!==n[e][r]?t:0}))})):r.map((function(t){return new Array(t.length).fill(0)}))}:{renderArea:n,clearArea:n.map((function(t){return new Array(t.length).fill(0)}))};var n,r}),[t,e]);return{renderArea:n.renderArea,clearArea:n.clearArea}},lt=n(5),ft=n.n(lt);function pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var vt=Object(r.memo)((function(){var t=Object(p.c)((function(t){return ot(t)})),e=Object(p.c)((function(t){return tt(t)})),n=Object(p.c)((function(t){return Z(t)})),a=Object(p.c)((function(t){return q(t)})),c=Object(r.useMemo)((function(){return{width:200,height:400,position:"absolute",borderRadius:10}}),[]),i=st(t),u=i.renderArea,s=i.clearArea,l=ct(Object(r.useCallback)((function(t){H(t,s),function(t){var e=t.field,n=t.ctx;e.forEach((function(t,e){t.forEach((function(t,r){if(t){var o=[r*y,e*y],a=t>g.length?W(g[t-8],75):g[t];it({ctx:n,BLOCK_SIDE:y,position:o,color:a,ghost:!a})}}))}))}({field:u,ctx:t})}),[s,u]),c),v=ct(Object(r.useCallback)((function(r){var o=[t[0].length*y/2,(t.length-5)/2*y],c=[t[0].length*y/2,t.length/2*y];switch(e){case"NOT_STARTED":!function(t){var e=t.highScore,n=void 0===e?[]:e,r=t.ctx,o=t.color,a=t.position,c=t.size;n.reduce((function(t,e,n){return e?t.concat(at({ctx:r,size:c,position:[a[0],a[1]+30*_*(n+2)],color:o,text:"".concat(n+1,": ").concat(e)})):t}),[]).length?(at({ctx:r,size:30,position:a,color:o,text:"PRESS START"}),at({ctx:r,size:20,position:[a[0],a[1]+30*_],color:o,text:"HIGH SCORES:"})):at({ctx:r,size:30,position:[a[0],a[1]+50*_],color:o,text:"PRESS START"})}({highScore:n,ctx:r,size:20,position:o,color:"#eaeaea"});break;case"GAME_PAUSED":at({ctx:r,size:30,position:c,color:"#eaeaea",text:"PAUSED"});break;case"GAME OVER":!function(t){var e=t.ctx,n=t.color,r=t.position,o=t.highScore;void 0!==o&&o?(at({ctx:e,size:30,position:r,color:n,text:"GAME OVER"}),at({ctx:e,size:30,position:[r[0],r[1]+40*_],color:n,text:"NEW"}),at({ctx:e,size:30,position:[r[0],r[1]+80*_],color:n,text:"HIGH SCORE!"})):at({ctx:e,size:30,position:[r[0],r[1]+60*_],color:n,text:"GAME OVER"})}({ctx:r,highScore:n.includes(a),position:o,color:"#eaeaea"});break;default:return}}),[t,n,a,e]),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pt(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},c,{background:("NOT_STARTED"===e||"GAME_PAUSED"===e)&&"var(--bg-color-d)",zIndex:3}),Object(r.useCallback)((function(t){t.clearRect(0,0,c.width*_,c.height*_)}),[c.height,c.width]));return o.a.createElement("div",{className:"".concat(ft.a["canvas-container"]," ").concat(ft.a["canvas-container__dark"]),style:{height:400}},v,l)}));var dt=Object(r.memo)((function(){var t=Object(p.c)((function(t){return nt(t,100*_,100*_,y)})),e=Object(p.c)((function(t){return tt(t)})),n=ct(Object(r.useCallback)((function(n){"NOT_STARTED"!==e&&function(t){var e=t.block,n=t.ctx,r=t.startingRow,o=void 0===r?h:r,a=t.offset,c=void 0===a?[0,0]:a,i=t.ghost,u=void 0!==i&&i;if(e){var s=e.shape,l=e.position,f=e.locked,p=Object(v.a)(l,2),d=p[0],b=p[1],g=U(s);s.forEach((function(t,e){return t.forEach((function(t,r){if(t){var a=[d*y+r*y+c[0],b*y+(e-o)*y+c[1]];it({ctx:n,position:a,color:g,locked:f,ghost:u})}}))}))}}({block:t,ctx:n,startingRow:0})}),[t,e]),{width:100,height:100},Object(r.useCallback)((function(e){H(e,t.shape,t.position)}),[t.position,t.shape]));return o.a.createElement("div",{className:"".concat(ft.a["canvas-container"]," ").concat(ft.a["canvas-container__dark"])},o.a.createElement("div",{className:ft.a.text},"Next block"),n)})),bt=function(){return(new Date).getTime()};var gt="MERGE",ht=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],Ot=function(t){return{type:gt,payload:t}};function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yt="START",Et="DEFEAT",wt="PAUSE",jt="RESUME",St="RESET",kt={status:"NOT_STARTED",lastAction:null,level:1,score:0,lines:0,speed:1e3},Rt=function(){return{type:"TOGGLE_PAUSE"}},At=function(){return{type:St}},xt=function(){return{type:wt}},Tt=n(16),Dt=n.n(Tt);var Pt=function(){var t=Object(p.c)((function(t){return{level:X(t),score:q(t),lines:Q(t),gameState:$(t)}})),e=t.level,n=t.score,a=t.lines,c=t.gameState,i=c.lastAction,u=Object(r.useState)(0),s=Object(v.a)(u,2),l=s[0],f=s[1],d=function(t,e){var n=Object(r.useState)(0),o=Object(v.a)(n,2),a=o[0],c=o[1],i=Object(r.useState)(bt()),u=Object(v.a)(i,2),s=u[0],l=u[1],f=Object(r.useState)(!0),p=Object(v.a)(f,2),d=p[0],b=p[1],g=Object(r.useRef)();return Object(r.useEffect)((function(){g.current=t}),[t]),Object(r.useEffect)((function(){var t=setInterval((function(){g.current(),c(0),l(bt())}),a||e);return d&&clearInterval(t),function(){clearInterval(t)}}),[e,d,a]),{start:function(){l(bt()),b(!1)},pause:function(){b(!0),c(e-(bt()-s)),l(bt())},resume:function(){d&&(b(!1),l(bt()))},reset:function(){b(!1),c(e),l(bt())}}}(Object(r.useCallback)((function(){f((function(t){return t+1}))}),[]),1e3),b=d.start,g=d.pause,h=d.resume,O=d.reset;return Object(r.useEffect)((function(){i===yt&&b(),i===St&&(O(),f(0)),i!==wt&&i!==Et||g(),i===jt&&h()}),[c]),o.a.createElement("div",{className:Dt.a["info-column"]},o.a.createElement("div",{className:"".concat(ft.a["canvas-container"]," ").concat(ft.a["canvas-container__dark"]," ").concat(Dt.a.info)},o.a.createElement("div",null,"Level: ".concat(e)),o.a.createElement("div",null,"Score: ".concat(n)),o.a.createElement("div",null,"Lines: ".concat(a)),o.a.createElement("div",null,"Time: ".concat(V(l)))),o.a.createElement(dt,null))};function Mt(){return o.a.createElement("div",{className:l.a["display-container"]},o.a.createElement(vt,null),o.a.createElement(Pt,null))}var Nt=z?"touchend":"mouseup",Lt=z?"touchstart":"mousedown",It=function(t,e){return t&&e&&e.toLowerCase()===t.toLowerCase()},Gt=function(t,e,n){return t&&e.type===n&&t.current.contains(e.target)};function Ct(t){var e,n,o=t.targetKey,a=t.callback,c=t.continious,i=void 0!==c&&c,u=t.targetButton,s=void 0!==u&&u,l=t.frequency,f=void 0===l?100:l,p=t.delay,d=void 0===p?200:p,b=Object(r.useState)(!1),g=Object(v.a)(b,2),h=g[0],O=g[1],m=function(t){var e=t.key;(It(o,e)||Gt(s,t,Lt))&&(t.preventDefault(),O(!0))},_=function(t){var e=t.key;(It(o,e)||Gt(s,t,Nt))&&(t.preventDefault(),O(!1))};return Object(r.useEffect)((function(){return window.addEventListener("keydown",m),window.addEventListener("keyup",_),s&&(window.addEventListener(Lt,m),window.addEventListener(Nt,_)),function(){window.removeEventListener("keydown",m),window.removeEventListener("keydup",_),s&&(window.addEventListener(Lt,m),window.addEventListener(Nt,_))}}),[o]),Object(r.useEffect)((function(){if(a)return h&&a(),i&&(n=setTimeout((function(){return e=setInterval((function(){h&&i&&a()}),f)}),d)),function(){clearTimeout(n),clearInterval(e)}}),[h,i,d]),h}var Ut=n(3),Bt=n.n(Ut);function Wt(t){var e=t.style,n=t.text,r=t.pressed,a=t.btnRef;return o.a.createElement("div",{style:e,className:"".concat(Bt.a["button-container"])},o.a.createElement("button",{className:"\n        ".concat(Bt.a["tetris-option-button"]," ").concat(Bt.a["tetris-option-button__dark"],"\n        ").concat(r&&Bt.a["tetris-option-button__active"]," ").concat(r&&Bt.a["tetris-option-button__dark__active"],"\n        "),ref:a}),o.a.createElement("div",null,n))}var Kt=function(t){var e=t.style,n=Object(p.b)(),a=Object(r.useRef)(),c=Ct({targetKey:"s",callback:function(){return n(At())},targetButton:a});return o.a.createElement(Wt,{style:e,btnRef:a,pressed:c,text:"Start"})};var zt=function(t){var e=t.style,n=Object(p.b)(),a=Object(r.useRef)(),c=Ct({targetKey:"p",callback:function(){return n(Rt())},targetButton:a});return o.a.createElement(Wt,{style:e,btnRef:a,pressed:c,text:"Pause"})};function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Jt="active-block/ROTATE",Yt="active-block/MOVE_RIGHT",Ft="active-block/MOVE_LEFT",Xt="active-block/MOVE_DOWN",qt="active-block/SET_NEW_TETRIMINO",Zt="active-block/LOCK",Qt="active-block/UNLOCK",$t="active-block/DROP",te="active-block/MOVE_LOCK",ee="active-block/MOVE_UNLOCK",ne=function(){return{type:Yt}},re=function(){return{type:Ft}},oe=function(){return{type:Xt}},ae=function(t){return{type:Jt,payload:t}},ce=function(){return{type:Qt}},ie=function(){return{type:$t}},ue=function(){return{type:te}},se=function(){return{type:ee}};var le=function(t){var e=t.style,n=t.btnRef,r=t.pressed,a=t.text;return o.a.createElement("div",{style:e,className:"".concat(Bt.a["button-container"]),ref:n},o.a.createElement("button",{className:"\n        ".concat(Bt.a["tetris-button"]," ").concat(Bt.a["tetris-button__dark"],"\n        ").concat(r&&Bt.a["tetris-button__active"]," ").concat(r&&Bt.a["tetris-button__dark__active"],"\n        "),tabIndex:"-1"}),o.a.createElement("span",null,a))};var fe=function(t){var e=t.style,n=Object(p.b)(),a=Object(r.useRef)(),c=Ct({targetKey:"ArrowLeft",callback:function(){return n(re())},continious:!0,targetButton:a});return o.a.createElement(le,{style:e,btnRef:a,pressed:c,text:"Left"})};var pe=function(t){var e=t.style,n=Object(p.b)(),a=Object(r.useRef)(),c=Ct({targetKey:"ArrowRight",callback:function(){return n(ne())},continious:!0,targetButton:a});return o.a.createElement(le,{style:e,pressed:c,btnRef:a,text:"Right"})};var ve=function(t){var e=t.style,n=Object(p.b)(),a=Object(r.useRef)(),c=Ct({targetKey:"ArrowUp",callback:function(){return n(ae())},targetButton:a});return o.a.createElement(le,{style:e,btnRef:a,pressed:c,text:"Rotate"})};var de=function(t){var e=t.style,n=Object(p.b)(),a=Object(r.useRef)(),c=Ct({targetKey:"ArrowDown",callback:function(){return n(oe())},continious:!0,frequency:75,targetButton:a});return Object(r.useEffect)((function(){n(c?ue():se())}),[n,c]),o.a.createElement(le,{style:e,pressed:c,btnRef:a,text:"Down"})};var be=function(t){var e=t.style,n=Object(p.b)(),a=Object(r.useRef)(),c=Ct({targetKey:" ",callback:function(){return n(ie())},targetButton:a});return o.a.createElement(le,{style:e,btnRef:a,pressed:c,text:"Drop"})};function ge(){return o.a.createElement("div",{className:Bt.a["buttons-container"]},o.a.createElement(Kt,{style:{gridArea:"start"}}),o.a.createElement(zt,{style:{gridArea:"pause"}}),o.a.createElement(ve,{style:{gridArea:"start / start / rotate / rotate"}}),o.a.createElement(fe,{style:{gridArea:"left"}}),o.a.createElement(de,{style:{gridArea:"down"}}),o.a.createElement(pe,{style:{gridArea:"right"}}),o.a.createElement(be,{style:{gridArea:"drop"}}))}function he(){var t=Object(p.b)();return function(t){Object(r.useEffect)((function(){return document.addEventListener("visibilitychange",t),function(){document.removeEventListener("visibilitychange",t)}}),[t])}((function(){return t(xt())})),o.a.createElement("div",{className:"".concat(u.a["tetris-container"]," ").concat(u.a["tetris-container__dark"])},o.a.createElement(Mt,null),o.a.createElement(ge,null))}var Oe=n(7),me=Object(Oe.c)({activeBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case Jt:return r||t;case Ft:return Ht({},t,{position:[t.position[0]-1,t.position[1]]});case Yt:return Ht({},t,{position:[t.position[0]+1,t.position[1]]});case Xt:return Ht({},t,{position:[t.position[0],t.position[1]+1]});case qt:return r;case St:return N();case Zt:return Ht({},t,{locked:!0});case Qt:return Ht({},t,{locked:!1});case te:return Ht({},t,{movementLocked:!0});case ee:return Ht({},t,{movementLocked:!1});default:return t}},field:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case gt:var o=r.shape,a=r.position;return x(t,o,a);case"DESTROY_ROW":return r;case St:return ht;default:return t}},nextBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0,n=e.type;switch(n){case qt:case St:return N();default:return t}},gameState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.lines;switch(n){case yt:return _t({},kt,{status:"Running",lastAction:yt});case gt:return _t({},t,{score:t.score+10,lastAction:gt});case Et:return _t({},t,{status:"GAME OVER",lastAction:Et});case"ROWS_DESTROYED":var o=L(t.lines+r),a=I(o);return _t({},t,{lines:t.lines+r,score:P(_t({},t,{lines:r})),level:o,speed:a,lastAction:"ROWS_DESTROYED"});case wt:return _t({},t,{status:"GAME_PAUSED",lastAction:wt});case jt:return _t({},t,{status:"Running",lastAction:jt});case St:return _t({},kt,{status:"Running",lastAction:St});default:return t}},highScore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0,0],e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case"NEW_HIGH_SCORE":return t.concat(r).sort((function(t,e){return e-t})).slice(0,5);default:return t}}}),_e=[yt,St],ye=[Ft,Yt,Xt,Jt];function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var we=[function(t){return function(e){return function(n){var r=t.getState().gameState.status,o=n.type;return _e.includes(o)?e(n):"GAME OVER"===r||"NOT_STARTED"===r||"GAME_PAUSED"===r&&"TOGGLE_PAUSE"!==o?void 0:e(n)}}},function(t){return function(e){return function(n){if("TOGGLE_PAUSE"===n.type){var r=t.getState().gameState.status;if("GAME_PAUSED"===r)return e({type:jt});if("Running"===r)return e(xt())}return e(n)}}},function(t){return function(e){return function(n){var r=function(){return e(oe())};switch(n.type){case St:e(n),C.set(r,et(t.getState()));break;case wt:return C.pause(r),e(n);case jt:return C.resume(r),e(n);case Et:case te:return C.clear(r),e(n);case ee:return C.set(r,et(t.getState())),e(n);case"ROWS_DESTROYED":var o=et(t.getState());e(n);var a=et(t.getState());o!==a&&(C.clear(r),C.set(r,a));break;default:return e(n)}}}},function(t){return function(e){return function(n){switch(n.type){case Ft:var r=t.getState();(function(t,e){for(var n=e.shape,r=e.position,o=Object(v.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+j(n)<=0||t[i+c]&&t[i+c][u+a-1]))return!1;return!0})(F(r),Y(r))&&e(n);break;case Yt:var o=t.getState();(function(t,e){for(var n=e.shape,r=e.position,o=Object(v.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+S(n)>=9||t[i+c]&&t[i+c][u+a+1]))return!1;return!0})(F(o),Y(o))&&e(n);break;case Xt:var a=t.getState();if(Y(a).locked)return;return e(n);case $t:var c=t.getState(),i=c.field,u=c.activeBlock,s=K(i,u).position;return e(Ot({shape:u.shape,position:s}));case Jt:var l=t.getState(),f=l.field,p=l.activeBlock;e(ae(function(t,e){var n,r=e.shape,o=e.position,a=e.locked,c={shape:(n=r,function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))}(n.slice().reverse())),position:o,locked:a},i=Math.floor(r.length/2);if(!T(t,c))return c;for(var u=Math.PI/2;u<=2*Math.PI;u*=2)for(var s=Math.floor(Math.cos(u)),l=s;0!==l&&Math.abs(l)<=i;l+=s)if(c=w({},c,{position:[o[0]+l,o[1]]}),!T(t,c))return c;return e}(f,p)));break;default:return e(n)}}}},function(t){return function(e){return function(n){var r=n.type;if(!ye.includes(r))return e(n);e(n);var o=Y(t.getState()),a=o.locked,c=F(t.getState()),i=R(c,o);a&&i&&e(ce()),a||i||e({type:Zt})}}},function(t){return function(e){return function(n){var r=n.type,o=t.getState().nextBlock,a=function(){t.dispatch(Ot(t.getState().activeBlock))};switch(r){case Zt:return G.set(a,500),e(n);case Qt:return G.clear(a),e(n);case"TOGGLE_PAUSE":if("GAME_PAUSED"===t.getState().gameState.status)G.resume(a);else"Running"===t.getState().gameState.status&&G.pause(a);return e(n);case wt:return G.pause(a),e(n);case jt:return G.resume(a),e(n);case gt:var c=n.payload,i=F(t.getState());if(R(i,c))return e(ce());e(n);var u=function(t){var e=D(t);t=t.map((function(e,n){return(r=e)&&r.length===r.filter((function(t){return t})).length?new Array(t[n].length).fill(0):e;var r})).sort((function(t){return t.filter((function(t){return t})).length?0:-1}));var n=D(t);return{matrix:t,rows:e-n}}(t.getState().field),s=u.matrix,l=u.rows;return e(function(t){return{type:"DESTROY_ROW",payload:t}}(s)),l>0&&t.dispatch({type:"ROWS_DESTROYED",lines:l}),t.dispatch(function(t){return{type:qt,payload:t}}(o));case qt:var f=t.getState();if(T(f.field,f.nextBlock)){var p=q(f);return Z(f).reduce((function(t,e){return t||e<p}),!1)&&(e(function(t){return{type:"NEW_HIGH_SCORE",payload:t}}(p)),function(t){var e=JSON.stringify(t);localStorage.setItem("highScore",e)}(Z(t.getState()))),e(ce()),t.dispatch({type:Et})}e(n);break;default:return e(n)}}}}],je=function(){try{var t=localStorage.getItem("highScore");return null===t?[0,0,0,0,0]:JSON.parse(t)}catch(e){return[0,0,0,0,0]}}(),Se=Oe.a.apply(void 0,we),ke=(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(Oe.e)(me,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},me,{highScore:je}),Se)),Re=ke;window.store=ke;var Ae=n(20),xe=n(21),Te=n.n(xe),De=Object(r.memo)((function(){return o.a.createElement("div",{className:Te.a.version},"v",Ae.a)}));n(32);var Pe=function(){return o.a.createElement(p.a,{store:Re},o.a.createElement(he,null),o.a.createElement(De,null))},Me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ne(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}n(33);z&&document.addEventListener("touchend",(function(t){t.preventDefault()})),c.a.render(o.a.createElement(Pe,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/tetris",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/tetris","/service-worker.js");Me?(!function(t,e){fetch(t).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):Ne(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ne(e,t)}))}}()}],[[22,1,2]]]);
//# sourceMappingURL=main.d2e92060.chunk.js.map