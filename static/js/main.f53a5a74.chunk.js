(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],[,,,function(t,e,n){t.exports={"buttons-container":"button_buttons-container__1955V","button-container":"button_button-container__39fQB","tetris-button":"button_tetris-button__eItG2","tetris-option-button":"button_tetris-option-button__3Kl3U","tetris-button__active":"button_tetris-button__active__26vlf","tetris-option-button__active":"button_tetris-option-button__active__1vvTZ","tetris-button__dark":"button_tetris-button__dark__2RK1f","tetris-button__dark__active":"button_tetris-button__dark__active__1fMOD","tetris-option-button__dark":"button_tetris-option-button__dark__1HGSl","tetris-option-button__dark__active":"button_tetris-option-button__dark__active__W25rR"}},,function(t,e,n){t.exports={"canvas-container":"field_canvas-container__1U1ww","canvas-container__dark":"field_canvas-container__dark__2GoQP","canvas-container__light":"field_canvas-container__light__25KvA",text:"field_text__504n6"}},,,,,,,function(t,e,n){t.exports={"tetris-container":"game_tetris-container__2gHB5","tetris-container__light":"game_tetris-container__light__11ybi","tetris-container__dark":"game_tetris-container__dark__3bHhN"}},,,function(t,e,n){t.exports={"info-column":"info_info-column__2XUG0",info:"info_info__3GloF"}},,function(t,e,n){t.exports={"display-container":"display_display-container__NotnD"}},,function(t,e,n){t.exports=n(31)},,,,,function(t,e,n){},function(t,e,n){},,,,,,function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(10),c=n.n(a),i=(n(24),n(25),n(12)),u=n.n(i),s=n(17),l=n.n(s),f=n(2),p={I:[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],J:[[0,2,0],[0,2,0],[2,2,0]],L:[[0,3,0],[0,3,0],[0,3,3]],O:[[4,4],[4,4]],S:[[0,5,5],[5,5,0],[0,0,0]],T:[[0,0,0],[6,6,6],[0,6,0]],Z:[[7,7,0],[0,7,7],[0,0,0]]},d=["rgba(255, 255, 255, 1)","rgba(0, 243, 255, 1)","rgba(0, 90, 255, 1)","rgba(255, 118, 0, 1)","rgba(255, 247, 0, 1)","rgba(0, 255, 102, 1)","rgba(133, 0, 255, 1)","rgba(255, 0, 0, 1)"],v="GAME OVER",b=4,g={I:[3,b-4],J:[3,b-3],L:[3,b-3],O:[4,b-2],S:[3,b-3],T:[3,b-3],Z:[3,b-3]},O="GAME_PAUSED",m="NOT_STARTED",h={shape:p.I,position:g.I},y=n(4),_=n(9);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(n,!0).forEach((function(e){Object(y.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=function(t){return Math.min.apply(Math,Object(_.a)(t.map((function(t){return~(e=t).findIndex((function(t){return t}))?e.findIndex((function(t){return t})):e.length-1;var e}))))},S=function(t){return Math.max.apply(Math,Object(_.a)(t.map((function(t){return t.reduce((function(t,e,n){return e?n:t}),0)}))))},k=function(t){return Math.max.apply(Math,Object(_.a)(t.map((function(t,e){return t.reduce((function(t,n){return n?e:t}),0)}))))},P=function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(c+k(n)>=19+b||t[i+c+1]&&t[i+c+1][u+a]))return!1;return!0},x=function(t,e,n){return t>e&&t<n},R=function(t,e,n){return t.map((function(t,r){return t.map((function(t,o){return x(r,n[1]-1,n[1]+e.length)&&x(o,n[0]-1,n[0]+e[r-n[1]].length)&&e[r-n[1]][o-n[0]]?e[r-n[1]][o-n[0]]:t}))}))},D=function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+j(n)<0||a+S(n)>9||c+k(n)>=20+b||t[i+c]&&t[i+c][u+a]))return!0;return!1},T=function(t){return t.reduce((function(t,e){return e.filter((function(t){return t})).length?++t:t}),0)},A=function(t){var e=t.score,n=t.level;switch(t.lines){case 1:return e+40*(n+1);case 2:return e+100*(n+1);case 3:return e+300*(n+1);case 4:return e+1200*(n+1);default:return e}},M=function(){return Object(_.a)("IJLOSTZ").sort((function(){return Math.round(2*Math.random()-1)}))},L=function(){var t=0,e=M();return function(){var n=e[t];return++t>6&&(t=0,e=M()),{shape:p[n],position:g[n],locked:!1}}}(),C=function(t){return Math.min(Math.ceil(t/10),15)},N=function(t){return Math.round(1e3*Math.pow(.8-.007*(t-1),t-1)*1e5)/1e5},I=function(){var t={},e={},n=function(n,o){r(n),t[n]=setTimeout(n,o),e[n]={start:(new Date).getTime(),paused:!1,wait:o}},r=function(n){t[n]&&(clearTimeout(t[n]),delete t[n],delete e[n])},o=function(n){return t[n]&&e[n]&&e[n].paused};return{set:n,clear:r,pause:function(n){if(t[n]&&!o(n)){clearTimeout(t[n]);var r=(new Date).getTime(),a=e[n].wait-(r-e[n].start);e[n]={start:r,wait:a,paused:!0}}},resume:function(r){t[r]&&o(r)&&n(r,e[r].wait)}}}(),W=function(){var t={},e={},n={},r=function(n,r){o(n),t[n]=setInterval((function(){n(),e[n]={start:(new Date).getTime(),paused:!1,ms:r,wait:0}}),r),e[n]={start:(new Date).getTime(),paused:!1,ms:r,wait:0}},o=function(r){t[r]&&(clearInterval(t[r]),clearTimeout(n[r]),delete t[r],delete e[r])},a=function(n){return t[n]&&e[n]&&e[n].paused};return{set:r,clear:o,pause:function(r){if(t[r]&&!a(r)){clearInterval(t[r]),clearTimeout(n[r]);var o=(new Date).getTime(),c=e[r].ms-(o-e[r].start);e[r]=E({},e[r],{start:o,wait:c,paused:!0})}},resume:function(o){t[o]&&a(o)&&(n[o]=setTimeout((function(){o(),r(o,e[o].ms)}),e[o].wait))}}}(),B=function(t){return d[t.reduce((function(t,e){return t||e.reduce((function(t,e){return e||t}),0)}),0)]},G=function(t,e){return t.split("(").map((function(t,n){return n?t.split(", ").map((function(t,n,r){return n<r.length-1?Math.max(Math.min(255,Math.floor(t*(100-e)/100)),0):t})).join(", "):t})).join("(")},U=function(t,e){return t.split("(").map((function(t,n){return n?t.split(", ").map((function(t,n,r){return n<r.length-1?Math.max(Math.min(255,Math.floor((255-t)*e/100+ +t)),0):t})).join(", "):t})).join("(")},K=function(t,e){for(;P(t,e);){var n=e.position;e=E({},e,{position:[n[0],n[1]+1]})}return e};function H(t){var e=t.ctx,n=t.side,r=t.position,o=t.color,a=t.locked,c=void 0!==a&&a,i=t.ghost,u=void 0!==i&&i,s=Object(f.a)(r,2),l=s[0],p=s[1];if(u)e.beginPath(),e.strokeStyle="#858fa5",e.lineWidth=2,e.rect(l+2,p+2,n-4,n-4),e.stroke(),e.closePath();else{var d=e.createLinearGradient(l,p,l+n,p+n),v=c?U(o,75):o,b=c?U(o,25):G(o,35);d.addColorStop(0,v),d.addColorStop(.5,v),d.addColorStop(.5,b),d.addColorStop(1,b),e.beginPath(),e.fillStyle=d,e.fillRect(l+1,p+1,n-2,n-2),e.closePath()}}function V(t){var e=t.block,n=t.ctx,r=t.side,o=t.startingRow,a=void 0===o?b:o,c=t.offset,i=void 0===c?[0,0]:c,u=t.ghost,s=void 0!==u&&u;if(e){var l=e.shape,p=e.position,d=e.locked,v=Object(f.a)(p,2),g=v[0],O=v[1],m=B(l);l.forEach((function(t,e){return t.forEach((function(t,o){if(t){var c=[g*r+o*r+i[0],O*r+(e-a)*r+i[1]];H({ctx:n,side:r,position:c,color:m,locked:d,ghost:s})}}))}))}}var z=n(1),J=function(t){return t.activeBlock},Y=function(t){return t.field},X=function(t){return t.gameState.level},Z=function(t){return t.gameState.score},F=function(t){return t.highScore},q=function(t){return t.gameState.lines},Q=function(t){return t.gameState},$=function(t){return Q(t).speed},tt=function(t){return t.nextBlock},et=function(t){return K(Y(t),J(t))};var nt=n(5),rt=n.n(nt);function ot(t){var e=t.ctx,n=t.size,r=t.position,o=t.color,a=t.text,c=Object(f.a)(r,2),i=c[0],u=c[1];e.fillStyle=o,e.textAlign="center",e.font="".concat(n,"px monospace"),e.fillText(a,i,u,190)}function at(){var t=Object(r.useRef)(null),e=Object(z.c)((function(t){return{block:J(t),field:Y(t),ghostBlock:et(t),gameState:Q(t),highScore:F(t),score:Z(t)}})),n=e.block,a=e.field,c=e.ghostBlock,i=e.gameState,u=e.highScore,s=e.score,l=i.status;return Object(r.useEffect)((function(){var e=t.current.getContext("2d"),r=[20*a[0].length/2,(a.length-b-5)/2*20],o=[20*a[0].length/2,(a.length-b)/2*20];l===m?(e.clearRect(0,0,200,400),u.reduce((function(t,n,o){return n?t.concat(ot({ctx:e,size:20,position:[r[0],r[1]+30*(o+2)],color:"#eaeaea",text:"".concat(o+1,": ").concat(n)})):t}),[]).length&&ot({ctx:e,size:20,position:[r[0],r[1]+30],color:"#eaeaea",text:"HIGH SCORES:"}),ot({ctx:e,size:30,position:r,color:"#eaeaea",text:"PRESS START"})):l===O?(e.clearRect(0,0,200,400),ot({ctx:e,size:30,position:o,color:"#eaeaea",text:"PAUSED"})):(e.clearRect(0,0,200,400),function(t){var e=t.field,n=t.ctx,r=t.side;e.forEach((function(t,o){o>b-1&&t.forEach((function(t,a){if(t){var c=[a*r,(o-b)*r],i=d[e[o][a]];H({ctx:n,side:r,position:c,color:i})}}))}))}({field:a,ctx:e,side:20}),V({block:c,ctx:e,side:20,ghost:!0}),V({block:n,ctx:e,side:20}),l===v&&(ot({ctx:e,size:30,position:o,color:"#eaeaea",text:"GAME OVER"}),u.includes(s)&&ot({ctx:e,size:30,position:[o[0],o[1]+40],color:"#eaeaea",text:"NEW HIGH SCORE!"})))}),[n,a,l,u]),o.a.createElement("div",{className:"".concat(rt.a["canvas-container"]," ").concat(rt.a["canvas-container__dark"]),style:{maxHeight:400}},o.a.createElement("canvas",{ref:t,width:200,height:400}))}function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var it=Object(r.memo)((function(){var t=Object(z.c)((function(t){return tt(t)})),e=t.shape,n=[Math.floor((100-20*e[0].length)/2),Math.floor((100-20*e.length)/2)],a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(n,!0).forEach((function(e){Object(y.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{position:[0,0]}),c=Object(r.useRef)();return Object(r.useEffect)((function(){var t=c.current.getContext("2d");t.clearRect(0,0,100,100),V({block:a,ctx:t,side:20,startingRow:0,offset:n})}),[a,n]),o.a.createElement("div",{className:"".concat(rt.a["canvas-container"]," ").concat(rt.a["canvas-container__dark"])},o.a.createElement("div",{className:rt.a.text},"Next block"),o.a.createElement("canvas",{ref:c,width:100,height:100}))})),ut=function(){return(new Date).getTime()};var st="MERGE",lt=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],ft=function(t){return{type:st,payload:t}};function pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pt(n,!0).forEach((function(e){Object(y.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var vt="START",bt="DEFEAT",gt="PAUSE",Ot="RESUME",mt="RESET",ht="TOGGLE_PAUSE",yt={status:m,lastAction:null,level:1,score:0,lines:0,speed:1e3},_t=function(){return{type:ht}},wt=function(){return{type:mt}},Et=function(){return{type:gt}},jt=n(15),St=n.n(jt);var kt=Object(r.memo)((function(){var t=Object(z.c)((function(t){return{level:X(t),score:Z(t),lines:q(t),gameState:Q(t)}})),e=t.level,n=t.score,a=t.lines,c=t.gameState,i=c.lastAction,u=Object(r.useState)(0),s=Object(f.a)(u,2),l=s[0],p=s[1],d=function(t,e){var n=Object(r.useState)(0),o=Object(f.a)(n,2),a=o[0],c=o[1],i=Object(r.useState)(ut()),u=Object(f.a)(i,2),s=u[0],l=u[1],p=Object(r.useState)(!0),d=Object(f.a)(p,2),v=d[0],b=d[1],g=Object(r.useRef)();return Object(r.useEffect)((function(){g.current=t}),[t]),Object(r.useEffect)((function(){var t=setInterval((function(){g.current(),c(0),l(ut())}),a||e);return v&&clearInterval(t),function(){clearInterval(t)}}),[e,v,a]),{start:function(){l(ut()),b(!1)},pause:function(){b(!0),c(e-(ut()-s)),l(ut())},resume:function(){v&&(b(!1),l(ut()))},reset:function(){b(!1),c(e),l(ut())}}}(Object(r.useCallback)((function(){p((function(t){return t+1}))}),[]),1e3),v=d.start,b=d.pause,g=d.resume,O=d.reset;return Object(r.useEffect)((function(){i===vt&&v(),i===mt&&(O(),p(0)),i!==gt&&i!==bt||b(),i===Ot&&g()}),[c]),o.a.createElement("div",{className:St.a["info-column"]},o.a.createElement("div",{className:"".concat(rt.a["canvas-container"]," ").concat(rt.a["canvas-container__dark"]," ").concat(St.a.info)},o.a.createElement("div",null,"Level: ".concat(e)),o.a.createElement("div",null,"Score: ".concat(n)),o.a.createElement("div",null,"Lines: ".concat(a)),o.a.createElement("div",null,"Time: ".concat(l))),o.a.createElement(it,null))}));function Pt(){return o.a.createElement("div",{className:l.a["display-container"]},o.a.createElement(at,null),o.a.createElement(kt,null))}function xt(t){var e,n,o=t.targetKey,a=t.callback,c=t.continious,i=void 0!==c&&c,u=t.frequency,s=void 0===u?100:u,l=t.targetButton,p=void 0!==l&&l,d=Object(r.useState)(!1),v=Object(f.a)(d,2),b=v[0],g=v[1],O=function(t){var e=t.key;o&&e&&e.toLowerCase()===o.toLowerCase()?(t.preventDefault(),g(!0)):p&&"mousedown"===t.type&&p.current.contains(t.target)&&g(!0)},m=function(t){var e=t.key;o&&e&&e.toLowerCase()===o.toLowerCase()?g(!1):p&&"mouseup"===t.type&&p.current.contains(t.target)&&g(!1)};return Object(r.useEffect)((function(){return window.addEventListener("keydown",O),window.addEventListener("keyup",m),p&&(window.addEventListener("mousedown",O),window.addEventListener("mouseup",m)),function(){window.removeEventListener("keydown",O),window.removeEventListener("keydup",m),p&&(window.addEventListener("mousedown",O),window.addEventListener("mouseup",m))}}),[o]),Object(r.useEffect)((function(){if(a)return b&&a(),i&&(n=setTimeout((function(){return e=setInterval((function(){b&&i&&a()}),s)}),200)),function(){clearTimeout(n),clearInterval(e)}}),[b,i,200]),b}var Rt=n(3),Dt=n.n(Rt);function Tt(t){var e=t.style,n=t.text,r=t.pressed,a=t.onClick;return o.a.createElement("div",{style:e,className:"".concat(Dt.a["button-container"])},o.a.createElement("button",{className:"\n        ".concat(Dt.a["tetris-option-button"]," ").concat(Dt.a["tetris-option-button__dark"],"\n        ").concat(r&&Dt.a["tetris-option-button__active"]," ").concat(r&&Dt.a["tetris-option-button__dark__active"],"\n        "),onClick:a}),o.a.createElement("span",null,n))}var At=Object(r.memo)((function(t){var e=t.style,n=Object(z.b)(),r=function(){return n(wt())},a=xt({targetKey:"s",callback:r});return o.a.createElement(Tt,{style:e,onClick:r,pressed:a,text:"Start"})}));var Mt=Object(r.memo)((function(t){var e=t.style,n=Object(z.b)(),r=function(){return n(_t())},a=xt({targetKey:"p",callback:r});return o.a.createElement(Tt,{style:e,onClick:r,pressed:a,text:"Pause"})}));function Lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lt(n,!0).forEach((function(e){Object(y.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Nt="active-block/ROTATE",It="active-block/MOVE_RIGHT",Wt="active-block/MOVE_LEFT",Bt="active-block/MOVE_DOWN",Gt="active-block/SET_NEW_Tetrimino",Ut="active-block/LOCK",Kt="active-block/UNLOCK",Ht="active-block/DROP",Vt="active-block/MOVE_LOCK",zt="active-block/MOVE_UNLOCK",Jt=function(){return{type:It}},Yt=function(){return{type:Wt}},Xt=function(){return{type:Bt}},Zt=function(t){return{type:Nt,payload:t}},Ft=function(){return{type:Kt}},qt=function(){return{type:Ht}},Qt=function(){return{type:Vt}},$t=function(){return{type:zt}};var te=Object(r.memo)((function(t){var e=t.style,n=t.onClick,r=t.btnRef,a=t.pressed,c=t.text;return o.a.createElement("div",{style:e,className:"".concat(Dt.a["button-container"])},o.a.createElement("button",{className:"\n        ".concat(Dt.a["tetris-button"]," ").concat(Dt.a["tetris-button__dark"],"\n        ").concat(a&&Dt.a["tetris-button__active"]," ").concat(a&&Dt.a["tetris-button__dark__active"],"\n        "),onClick:n,tabIndex:"-1",ref:r}),o.a.createElement("span",null,c))}));var ee=Object(r.memo)((function(t){var e=t.style,n=Object(z.b)(),a=Object(r.useRef)(),c=xt({targetKey:"ArrowLeft",callback:function(){return n(Yt())},continious:!0,targetButton:a});return o.a.createElement(te,{style:e,btnRef:a,pressed:c,text:"Left"})}));var ne=Object(r.memo)((function(t){var e=t.style,n=Object(z.b)(),a=Object(r.useRef)(),c=xt({targetKey:"ArrowRight",callback:function(){return n(Jt())},continious:!0,targetButton:a});return o.a.createElement(te,{style:e,pressed:c,btnRef:a,text:"Right"})}));var re=Object(r.memo)((function(t){var e=t.style,n=Object(z.b)(),r=function(){return n(Zt())},a=xt({targetKey:"ArrowUp",callback:r});return o.a.createElement(te,{style:e,onClick:r,pressed:a,text:"Rotate"})}));var oe=Object(r.memo)((function(t){var e=t.style,n=Object(z.b)(),a=Object(r.useRef)(),c=xt({targetKey:"ArrowDown",callback:function(){return n(Xt())},continious:!0,frequency:75,targetButton:a});return Object(r.useEffect)((function(){n(c?Qt():$t())}),[n,c]),o.a.createElement(te,{style:e,pressed:c,btnRef:a,text:"Down"})}));var ae=Object(r.memo)((function(t){var e=t.style,n=Object(z.b)(),r=function(){return n(qt())},a=xt({targetKey:" ",callback:r});return o.a.createElement(te,{style:e,onClick:r,pressed:a,text:"Drop"})}));function ce(){return o.a.createElement("div",{className:Dt.a["buttons-container"]},o.a.createElement(At,{style:{gridArea:"start"}}),o.a.createElement(Mt,{style:{gridArea:"pause"}}),o.a.createElement(re,{style:{gridArea:"start / start / rotate / rotate"}}),o.a.createElement(ee,{style:{gridArea:"left"}}),o.a.createElement(oe,{style:{gridArea:"down"}}),o.a.createElement(ne,{style:{gridArea:"right"}}),o.a.createElement(ae,{style:{gridArea:"drop"}}))}function ie(){var t=Object(z.b)();return function(t){Object(r.useEffect)((function(){return document.addEventListener("visibilitychange",t),function(){document.removeEventListener("visibilitychange",t)}}),[t])}((function(){return t(Et())})),o.a.createElement("div",{className:"".concat(u.a["tetris-container"]," ").concat(u.a["tetris-container__dark"])},o.a.createElement(Pt,null),o.a.createElement(ce,null))}var ue=function(){return o.a.createElement(ie,null)},se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function le(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var fe=n(7);function pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function de(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pe(n,!0).forEach((function(e){Object(y.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ve={start:0,stop:0,current:0,running:!1};var be=Object(fe.c)({activeBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case Nt:return r||t;case Wt:return Ct({},t,{position:[t.position[0]-1,t.position[1]]});case It:return Ct({},t,{position:[t.position[0]+1,t.position[1]]});case Bt:return Ct({},t,{position:[t.position[0],t.position[1]+1]});case Gt:return r;case mt:return L();case Ut:return Ct({},t,{locked:!0});case Kt:return Ct({},t,{locked:!1});case Vt:return Ct({},t,{movementLocked:!0});case zt:return Ct({},t,{movementLocked:!1});default:return t}},field:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case st:var o=r.shape,a=r.position;return R(t,o,a);case"DESTROY_ROW":return r;case mt:return lt;default:return t}},nextBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,n=e.type;switch(n){case Gt:case mt:return L();default:return t}},gameState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.lines;switch(n){case vt:return dt({},yt,{status:"Running",lastAction:vt});case st:return dt({},t,{score:t.score+10,lastAction:st});case bt:return dt({},t,{status:v,lastAction:bt});case"ROWS_DESTROYED":var o=C(t.lines+r),a=N(o);return dt({},t,{lines:t.lines+r,score:A(dt({},t,{lines:r})),level:o,speed:a,lastAction:"ROWS_DESTROYED"});case gt:return dt({},t,{status:O,lastAction:gt});case Ot:return dt({},t,{status:"Running",lastAction:Ot});case mt:return dt({},yt,{status:"Running",lastAction:mt});default:return t}},timer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,e=(arguments.length>1?arguments[1]:void 0).type,n=new Array(2).fill(performance.now()),r=Object(f.a)(n,2),o=r[0],a=r[1];switch(e){case vt:return de({},t,{start:o,stop:a,running:!0});case ht:return t.running?de({},t,{stop:performance.now(),running:!1}):{current:t.stop-t.start+t.current,start:performance.now(),stop:performance.now(),running:!0};case mt:return de({},t,{start:o,stop:a,running:!0});case bt:return de({},t,{stop:performance.now(),running:!1});default:return t}},highScore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0,0],e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case"NEW_HIGH_SCORE":return console.log("SCORES",r),t.concat(r).sort((function(t,e){return e-t})).slice(0,5);default:return t}}}),ge=[vt,mt],Oe=[Wt,It,Bt,Nt];function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var he=[function(t){return function(e){return function(n){var r=t.getState().gameState.status,o=n.type;return ge.includes(o)?e(n):r===v||r===m||r===O&&o!==ht?void 0:e(n)}}},function(t){return function(e){return function(n){if(n.type===ht){var r=t.getState().gameState.status;if(r===O)return e({type:Ot});if("Running"===r)return e(Et())}return e(n)}}},function(t){return function(e){return function(n){var r=function(){return e(Xt())},o=n.type,a=$(t.getState());switch(o){case mt:return W.set(r,a),e(n);case gt:return W.pause(r),e(n);case Ot:return W.resume(r),e(n);case bt:case Vt:return W.clear(r),e(n);case zt:return W.set(r,a),e(n);case"ROWS_DESTROYED":var c=$(t.getState());e(n);var i=$(t.getState());c!==i&&(W.clear(r),W.set(r,i));break;default:return e(n)}}}},function(t){return function(e){return function(n){var r,o=function(){return t.getState().activeBlock},a=function(){return t.getState().field};switch(n.type){case Wt:(function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+j(n)<=0||t[i+c]&&t[i+c][u+a-1]))return!1;return!0})(a(),o())&&e(n);break;case It:(function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+S(n)>=9||t[i+c]&&t[i+c][u+a+1]))return!1;return!0})(a(),o())&&e(n);break;case Bt:if((r=o()).locked)return;return e(n);case Ht:r=o();var c=a(),i=K(c,r);return e(ft(i));case Nt:e(Zt(function(t,e){var n,r=e.shape,o=e.position,a=e.locked,c={shape:(n=r,function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))}(n.slice().reverse())),position:o,locked:a},i=Math.floor(r.length/2);if(!D(t,c))return c;for(var u=Math.PI/2;u<=2*Math.PI;u*=2)for(var s=Math.floor(Math.cos(u)),l=s;0!==l&&Math.abs(l)<=i;l+=s)if(c=E({},c,{position:[o[0]+l,o[1]]}),!D(t,c))return c;return e}(a(),o())));break;default:return e(n)}}}},function(t){return function(e){return function(n){var r=n.type;if(!Oe.includes(r))return e(n);e(n);var o=t.getState().activeBlock,a=o.locked,c=t.getState().field,i=P(c,o);a&&i&&e(Ft()),a||i||e({type:Ut})}}},function(t){return function(e){return function(n){var r=n.type,o=t.getState().nextBlock,a=function(){t.dispatch(ft(t.getState().activeBlock))};switch(r){case Ut:return I.set(a,500),e(n);case Kt:return I.clear(a),e(n);case ht:if(t.getState().gameState.status===O)I.resume(a);else"Running"===t.getState().gameState.status&&I.pause(a);return e(n);case gt:return I.pause(a),e(n);case Ot:return I.resume(a),e(n);case st:var c=n.payload,i=t.getState().field;if(P(i,c))return e(Ft());e(n);var u=function(t){var e=T(t);t=t.map((function(e,n){return(r=e)&&r.length===r.filter((function(t){return t})).length?new Array(t[n].length).fill(0):e;var r})).sort((function(t){return t.filter((function(t){return t})).length?0:-1}));var n=T(t);return{matrix:t,rows:e-n}}(t.getState().field),s=u.matrix,l=u.rows;return e(function(t){return{type:"DESTROY_ROW",payload:t}}(s)),l>0&&t.dispatch({type:"ROWS_DESTROYED",lines:l}),t.dispatch(function(t){return{type:Gt,payload:t}}(o));case Gt:var f=t.getState();if(D(f.field,f.nextBlock)){var p=Z(f);return F(f).reduce((function(t,e){return t||e<p}),!1)&&(e(function(t){return{type:"NEW_HIGH_SCORE",payload:t}}(p)),console.log("NEW SCORES",F(t.getState())),function(t){var e=JSON.stringify(t);localStorage.setItem("highScore",e)}(F(t.getState()))),t.dispatch({type:bt})}e(n);break;default:return e(n)}}}}],ye=function(){try{var t=localStorage.getItem("highScore");return null===t?[0,0,0,0,0]:JSON.parse(t)}catch(e){return[0,0,0,0,0]}}(),_e=fe.a.apply(void 0,he),we=(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(fe.e)(be,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(n,!0).forEach((function(e){Object(y.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},be,{highScore:ye}),_e)),Ee=we;window.store=we,c.a.render(o.a.createElement(z.a,{store:Ee},o.a.createElement(ue,null)),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/tetris",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/tetris","/service-worker.js");se?(!function(t,e){fetch(t).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):le(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):le(e,t)}))}}()}],[[19,1,2]]]);
//# sourceMappingURL=main.f53a5a74.chunk.js.map