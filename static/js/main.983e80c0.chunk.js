(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],[,,,function(t,e,n){t.exports={"buttons-container":"button_buttons-container__1955V","button-container":"button_button-container__39fQB","tetris-button":"button_tetris-button__eItG2","tetris-option-button":"button_tetris-option-button__3Kl3U","tetris-button__active":"button_tetris-button__active__26vlf","tetris-option-button__active":"button_tetris-option-button__active__1vvTZ","tetris-button__dark":"button_tetris-button__dark__2RK1f","tetris-button__dark__active":"button_tetris-button__dark__active__1fMOD","tetris-option-button__dark":"button_tetris-option-button__dark__1HGSl","tetris-option-button__dark__active":"button_tetris-option-button__dark__active__W25rR"}},,function(t,e,n){t.exports={"canvas-container":"field_canvas-container__1U1ww","canvas-container__dark":"field_canvas-container__dark__2GoQP","canvas-container__light":"field_canvas-container__light__25KvA",text:"field_text__504n6"}},,,,,,,,,,function(t,e,n){t.exports={"info-column":"info_info-column__2XUG0",info:"info_info__3GloF"}},function(t,e,n){t.exports={"tetris-container":"game_tetris-container__2gHB5","tetris-container__light":"game_tetris-container__light__11ybi","tetris-container__dark":"game_tetris-container__dark__3bHhN"}},,,function(t,e,n){t.exports={"display-container":"display_display-container__NotnD"}},function(t){t.exports=JSON.parse('{"a":"1.0.1"}')},function(t,e,n){t.exports={version:"styles_version__3zm86"}},function(t,e,n){t.exports=n(34)},,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(11),c=n.n(a),i=n(1),u=n(19),s=n.n(u),l=n(4),f=n(2),p=n(10),v={I:[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],J:[[0,2,0],[0,2,0],[2,2,0]],L:[[0,3,0],[0,3,0],[0,3,3]],O:[[4,4],[4,4]],S:[[0,5,5],[5,5,0],[0,0,0]],T:[[0,0,0],[6,6,6],[0,6,0]],Z:[[7,7,0],[0,7,7],[0,0,0]]},d=["rgba(255, 255, 255, 1)","rgba(0, 243, 255, 1)","rgba(0, 90, 255, 1)","rgba(255, 118, 0, 1)","rgba(255, 247, 0, 1)","rgba(0, 255, 102, 1)","rgba(133, 0, 255, 1)","rgba(255, 0, 0, 1)"],b=4,g={I:[3,b-4],J:[3,b-3],L:[3,b-3],O:[4,b-2],S:[3,b-3],T:[3,b-3],Z:[3,b-3]},h={shape:v.I,position:g.I},O=window.devicePixelRatio,m=20*O;function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var E=function(t){return Math.min.apply(Math,Object(p.a)(t.map((function(t){return~(e=t).findIndex((function(t){return t}))?e.findIndex((function(t){return t})):e.length-1;var e}))))},w=function(t){return Math.max.apply(Math,Object(p.a)(t.map((function(t){return t.reduce((function(t,e,n){return e?n:t}),0)}))))},j=function(t){return Math.max.apply(Math,Object(p.a)(t.map((function(t,e){return t.reduce((function(t,n){return n?e:t}),0)}))))},S=function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(c+j(n)>=t.length-1||t[i+c+1]&&t[i+c+1][u+a]))return!1;return!0},k=function(t,e,n){return t>e&&t<n},R=function(t,e,n){return t.map((function(t,r){return t.map((function(t,o){return k(r,n[1]-1,n[1]+e.length)&&k(o,n[0]-1,n[0]+e[r-n[1]].length)&&e[r-n[1]][o-n[0]]?e[r-n[1]][o-n[0]]:t}))}))},A=function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+E(n)<0||a+w(n)>9||c+j(n)>=20+b||t[i+c]&&t[i+c][u+a]))return!0;return!1},x=function(t){return t.reduce((function(t,e){return e.filter((function(t){return t})).length?++t:t}),0)},T=function(t){var e=t.score,n=t.level;switch(t.lines){case 1:return e+40*(n+1);case 2:return e+100*(n+1);case 3:return e+300*(n+1);case 4:return e+1200*(n+1);default:return e}},D=function(){return Object(p.a)("IJLOSTZ").sort((function(){return Math.round(2*Math.random()-1)}))},P=function(){var t=0,e=D();return function(){var n=e[t];return++t>6&&(t=0,e=D()),{shape:v[n],position:g[n],locked:!1}}}(),M=function(t){return Math.min(Math.ceil(t/10),15)},N=function(t){return Math.round(1e3*Math.pow(.8-.007*(t-1),t-1)*1e5)/1e5},L=function(){var t={},e={},n=function(n,o){r(n),t[n]=setTimeout(n,o),e[n]={start:(new Date).getTime(),paused:!1,wait:o}},r=function(n){t[n]&&(clearTimeout(t[n]),delete t[n],delete e[n])},o=function(n){return t[n]&&e[n]&&e[n].paused};return{set:n,clear:r,pause:function(n){if(t[n]&&!o(n)){clearTimeout(t[n]);var r=(new Date).getTime(),a=e[n].wait-(r-e[n].start);e[n]={start:r,wait:a,paused:!0}}},resume:function(r){t[r]&&o(r)&&n(r,e[r].wait)}}}(),I=function(){var t={},e={},n={},r=function(n,r){o(n),t[n]=setInterval((function(){n(),e[n]={start:(new Date).getTime(),paused:!1,ms:r,wait:0}}),r),e[n]={start:(new Date).getTime(),paused:!1,ms:r,wait:0}},o=function(r){t[r]&&(clearInterval(t[r]),clearTimeout(n[r]),delete t[r],delete e[r])},a=function(n){return t[n]&&e[n]&&e[n].paused};return{set:r,clear:o,pause:function(r){if(t[r]&&!a(r)){clearInterval(t[r]),clearTimeout(n[r]);var o=(new Date).getTime(),c=e[r].ms-(o-e[r].start);e[r]=y({},e[r],{start:o,wait:c,paused:!0})}},resume:function(o){t[o]&&a(o)&&(n[o]=setTimeout((function(){o(),r(o,e[o].ms)}),e[o].wait))}}}(),G=function(t){return d[t.reduce((function(t,e){return t||e.reduce((function(t,e){return e||t}),0)}),0)]},C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.split("(").map((function(t,n){return n?t.split(", ").map((function(t,n,r){return n<r.length-1?Math.max(Math.min(255,Math.floor(t*(100-e)/100)),0):t})).join(", "):t})).join("(")},U=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.split("(").map((function(t,n){return n?t.split(", ").map((function(t,n,r){return n<r.length-1?Math.max(Math.min(255,Math.floor((255-t)*e/100+ +t)),0):t})).join(", "):t})).join("(")},B=function(t,e){for(;S(t,e);){var n=e.position;e=y({},e,{position:[n[0],n[1]+1]})}return e},W="undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),K=function(t){return"".concat(Math.floor(t/60),":").concat(("0"+Math.floor(t%60)).slice(-2))},z=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];e.forEach((function(e,r){return e.forEach((function(e,o){e&&t.clearRect((o+n[0])*m,(r+n[1])*m,m,m)}))}))},V=n(9),H=Object(V.a)((function(t){return t.activeBlock}),(function(t){var e=t.shape,n=t.locked;return{shape:e.map((function(t){return t.map((function(t){return t?t+8*!!n:0}))})),locked:n,position:[t.position[0],t.position[1]-b]}})),J=Object(V.a)((function(t){return t.field}),(function(t){return t.slice(b)})),Y=function(t){return t.gameState.level},F=function(t){return t.gameState.score},X=function(t){return t.highScore},q=function(t){return t.gameState.lines},Z=function(t){return t.gameState},Q=function(t){return Z(t).status},$=function(t){return Z(t).speed},tt=Object(V.a)((function(t){return t.nextBlock}),(function(t,e,n,r){return{width:e,height:n,side:r}}),(function(t,e){var n=e.width,r=e.height,o=e.side,a=t.shape;return{shape:a,position:[Math.floor((n-a[0].length*o)/(2*o)*10)/10,Math.floor((r-a.length*o)/(2*o)*10)/10]}})),et=Object(V.a)(J,H,(function(t,e){var n=B(t,e),r=n.shape,o=n.position;return{shape:r.map((function(t){return t.map((function(t){return t?"g":0}))})),position:o}})),nt=Object(V.a)(H,et,J,(function(t,e,n){var r=R(n,e.shape,e.position);return R(r,t.shape,t.position)}));function rt(t){var e=t.ctx,n=t.size,r=t.position,o=t.color,a=t.text,c=Object(f.a)(r,2),i=c[0],u=c[1];e.textAlign="center",e.lineWidth=3*O,e.font="".concat(n*O,"px monospace"),e.strikeStyle="black",e.strokeText(a,i,u,190*O),e.fillStyle=o,e.fillText(a,i,u,190*O)}var ot=function(t,e,n){var a=e.width,c=e.height,i=Object(r.useMemo)((function(){return a*O}),[a]),u=Object(r.useMemo)((function(){return c*O}),[c]),s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=s.current&&s.current.getContext("2d");if(e)return window.requestAnimationFrame((function(){return t(e)})),function(){return n&&window.requestAnimationFrame((function(){return n(e)}))}}),[t,n]),o.a.createElement("canvas",{ref:s,width:i,height:u,style:e})};function at(t){var e=t.ctx,n=t.position,r=t.color,o=(t.locked,t.ghost),a=void 0!==o&&o,c=Object(f.a)(n,2),i=c[0],u=c[1];if(a)e.beginPath(),e.strokeStyle="#858fa5",e.lineWidth=2*O,e.rect(i+2*O,u+2*O,m-4*O,m-4*O),e.stroke();else{var s=e.createLinearGradient(i,u,i+m,u+m),l=r,p=C(r,35);s.addColorStop(0,l),s.addColorStop(.5,l),s.addColorStop(.5,p),s.addColorStop(1,p),e.fillStyle=s,e.fillRect(i+1*O,u+1*O,m-2*O,m-2*O)}}var ct=function(t){var e=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.current=t}),[t]),e.current},it=function(t){var e=ct(t),n=Object(r.useMemo)((function(){return n=t,(r=e)?{renderArea:n.map((function(t,e){return t.map((function(t,n){return t?e<0||e>=r.length||n<0||n>=r[0].length?t:t===r[e][n]?0:t:t}))})),clearArea:n?r.map((function(t,e){return t.map((function(t,r){return e<0||e>=n.length||r<0||r>=n[0].length?t:t!==n[e][r]?t:0}))})):r.map((function(t){return new Array(t.length).fill(0)}))}:{renderArea:n,clearArea:n.map((function(t){return new Array(t.length).fill(0)}))};var n,r}),[t,e]);return{renderArea:n.renderArea,clearArea:n.clearArea}},ut=n(5),st=n.n(ut);function lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var ft=Object(r.memo)((function(){var t=Object(i.c)((function(t){return nt(t)})),e=Object(i.c)((function(t){return Q(t)})),n=Object(i.c)((function(t){return X(t)})),a=Object(i.c)((function(t){return F(t)})),c=Object(r.useMemo)((function(){return{width:200,height:400,position:"absolute",borderRadius:10}}),[]),u=it(t),s=u.renderArea,f=u.clearArea,p=ot(Object(r.useCallback)((function(t){z(t,f),function(t){var e=t.field,n=t.ctx;e.forEach((function(t,e){t.forEach((function(t,r){if(t){var o=[r*m,e*m],a=t>d.length?U(d[t-8],75):d[t];at({ctx:n,BLOCK_SIDE:m,position:o,color:a,ghost:!a})}}))}))}({field:s,ctx:t})}),[f,s]),c),v=ot(Object(r.useCallback)((function(r){var o=[t[0].length*m/2,(t.length-5)/2*m],c=[t[0].length*m/2,t.length/2*m];switch(e){case"NOT_STARTED":!function(t){var e=t.highScore,n=void 0===e?[]:e,r=t.ctx,o=t.color,a=t.position,c=t.size;n.reduce((function(t,e,n){return e?t.concat(rt({ctx:r,size:c,position:[a[0],a[1]+30*O*(n+2)],color:o,text:"".concat(n+1,": ").concat(e)})):t}),[]).length?(rt({ctx:r,size:30,position:a,color:o,text:"PRESS START"}),rt({ctx:r,size:20,position:[a[0],a[1]+30*O],color:o,text:"HIGH SCORES:"})):rt({ctx:r,size:30,position:[a[0],a[1]+50*O],color:o,text:"PRESS START"})}({highScore:n,ctx:r,size:20,position:o,color:"#eaeaea"});break;case"GAME_PAUSED":rt({ctx:r,size:30,position:c,color:"#eaeaea",text:"PAUSED"});break;case"GAME OVER":!function(t){var e=t.ctx,n=t.color,r=t.position,o=t.highScore;void 0!==o&&o?(rt({ctx:e,size:30,position:r,color:n,text:"GAME OVER"}),rt({ctx:e,size:30,position:[r[0],r[1]+40*O],color:n,text:"NEW"}),rt({ctx:e,size:30,position:[r[0],r[1]+80*O],color:n,text:"HIGH SCORE!"})):rt({ctx:e,size:30,position:[r[0],r[1]+60*O],color:n,text:"GAME OVER"})}({ctx:r,highScore:n.includes(a),position:o,color:"#eaeaea"});break;default:return}}),[t,n,a,e]),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lt(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},c,{background:("NOT_STARTED"===e||"GAME_PAUSED"===e)&&"var(--bg-color-d)",zIndex:3}),Object(r.useCallback)((function(t){t.clearRect(0,0,c.width*O,c.height*O)}),[c.height,c.width]));return o.a.createElement("div",{className:"".concat(st.a["canvas-container"]," ").concat(st.a["canvas-container__dark"]),style:{height:400}},v,p)}));var pt=Object(r.memo)((function(){var t=Object(i.c)((function(t){return tt(t,100*O,100*O,m)})),e=Object(i.c)((function(t){return Q(t)})),n=ot(Object(r.useCallback)((function(n){"NOT_STARTED"!==e&&function(t){var e=t.block,n=t.ctx,r=t.startingRow,o=void 0===r?b:r,a=t.offset,c=void 0===a?[0,0]:a,i=t.ghost,u=void 0!==i&&i;if(e){var s=e.shape,l=e.position,p=e.locked,v=Object(f.a)(l,2),d=v[0],g=v[1],h=G(s);s.forEach((function(t,e){return t.forEach((function(t,r){if(t){var a=[d*m+r*m+c[0],g*m+(e-o)*m+c[1]];at({ctx:n,position:a,color:h,locked:p,ghost:u})}}))}))}}({block:t,ctx:n,startingRow:0})}),[t,e]),{width:100,height:100},Object(r.useCallback)((function(e){z(e,t.shape,t.position)}),[t.position,t.shape]));return o.a.createElement("div",{className:"".concat(st.a["canvas-container"]," ").concat(st.a["canvas-container__dark"])},o.a.createElement("div",{className:st.a.text},"Next block"),n)})),vt=function(){return(new Date).getTime()};var dt="MERGE",bt=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],gt=function(t){return{type:dt,payload:t}};function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var mt="START",_t="DEFEAT",yt="PAUSE",Et="RESUME",wt="RESET",jt={status:"NOT_STARTED",lastAction:null,level:1,score:0,lines:0,speed:1e3},St=function(){return{type:"TOGGLE_PAUSE"}},kt=function(){return{type:wt}},Rt=function(){return{type:yt}},At=n(15),xt=n.n(At);var Tt=function(){var t=Object(i.c)((function(t){return{level:Y(t),score:F(t),lines:q(t),gameState:Z(t)}})),e=t.level,n=t.score,a=t.lines,c=t.gameState,u=c.lastAction,s=Object(r.useState)(0),l=Object(f.a)(s,2),p=l[0],v=l[1],d=function(t,e){var n=Object(r.useState)(0),o=Object(f.a)(n,2),a=o[0],c=o[1],i=Object(r.useState)(vt()),u=Object(f.a)(i,2),s=u[0],l=u[1],p=Object(r.useState)(!0),v=Object(f.a)(p,2),d=v[0],b=v[1],g=Object(r.useRef)();return Object(r.useEffect)((function(){g.current=t}),[t]),Object(r.useEffect)((function(){var t=setInterval((function(){g.current(),c(0),l(vt())}),a||e);return d&&clearInterval(t),function(){clearInterval(t)}}),[e,d,a]),{start:function(){l(vt()),b(!1)},pause:function(){b(!0),c(e-(vt()-s)),l(vt())},resume:function(){d&&(b(!1),l(vt()))},reset:function(){b(!1),c(e),l(vt())}}}(Object(r.useCallback)((function(){v((function(t){return t+1}))}),[]),1e3),b=d.start,g=d.pause,h=d.resume,O=d.reset;return Object(r.useEffect)((function(){u===mt&&b(),u===wt&&(O(),v(0)),u!==yt&&u!==_t||g(),u===Et&&h()}),[c]),o.a.createElement("div",{className:xt.a["info-column"]},o.a.createElement("div",{className:"".concat(st.a["canvas-container"]," ").concat(st.a["canvas-container__dark"]," ").concat(xt.a.info)},o.a.createElement("div",null,"Level: ".concat(e)),o.a.createElement("div",null,"Score: ".concat(n)),o.a.createElement("div",null,"Lines: ".concat(a)),o.a.createElement("div",null,"Time: ".concat(K(p)))),o.a.createElement(pt,null))};function Dt(){return o.a.createElement("div",{className:s.a["display-container"]},o.a.createElement(ft,null),o.a.createElement(Tt,null))}var Pt=W?"touchend":"mouseup",Mt=W?"touchstart":"mousedown",Nt=function(t,e){return t&&e&&e.toLowerCase()===t.toLowerCase()},Lt=function(t,e,n){return t&&e.type===n&&t.current.contains(e.target)};function It(t){var e,n,o=t.targetKey,a=t.callback,c=t.continious,i=void 0!==c&&c,u=t.targetButton,s=void 0!==u&&u,l=t.frequency,p=void 0===l?100:l,v=t.delay,d=void 0===v?200:v,b=Object(r.useState)(!1),g=Object(f.a)(b,2),h=g[0],O=g[1],m=function(t){var e=t.key;(Nt(o,e)||Lt(s,t,Mt))&&(t.preventDefault(),O(!0))},_=function(t){var e=t.key;(Nt(o,e)||Lt(s,t,Pt))&&(t.preventDefault(),O(!1))};return Object(r.useEffect)((function(){return window.addEventListener("keydown",m),window.addEventListener("keyup",_),s&&(window.addEventListener(Mt,m),window.addEventListener(Pt,_)),function(){window.removeEventListener("keydown",m),window.removeEventListener("keydup",_),s&&(window.addEventListener(Mt,m),window.addEventListener(Pt,_))}}),[o]),Object(r.useEffect)((function(){if(a)return h&&a(),i&&(n=setTimeout((function(){return e=setInterval((function(){h&&i&&a()}),p)}),d)),function(){clearTimeout(n),clearInterval(e)}}),[h,i,d]),h}var Gt=n(3),Ct=n.n(Gt);function Ut(t){var e=t.style,n=t.text,r=t.pressed,a=t.btnRef;return o.a.createElement("div",{style:e,className:"".concat(Ct.a["button-container"])},o.a.createElement("button",{className:"\n        ".concat(Ct.a["tetris-option-button"]," ").concat(Ct.a["tetris-option-button__dark"],"\n        ").concat(r&&Ct.a["tetris-option-button__active"]," ").concat(r&&Ct.a["tetris-option-button__dark__active"],"\n        "),ref:a}),o.a.createElement("div",null,n))}var Bt=function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=It({targetKey:"s",callback:function(){return n(kt())},targetButton:a});return o.a.createElement(Ut,{style:e,btnRef:a,pressed:c,text:"Start"})};var Wt=function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=It({targetKey:"p",callback:function(){return n(St())},targetButton:a});return o.a.createElement(Ut,{style:e,btnRef:a,pressed:c,text:"Pause"})};function Kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kt(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vt="active-block/ROTATE",Ht="active-block/MOVE_RIGHT",Jt="active-block/MOVE_LEFT",Yt="active-block/MOVE_DOWN",Ft="active-block/SET_NEW_TETRIMINO",Xt="active-block/LOCK",qt="active-block/UNLOCK",Zt="active-block/DROP",Qt="active-block/MOVE_LOCK",$t="active-block/MOVE_UNLOCK",te=function(){return{type:Ht}},ee=function(){return{type:Jt}},ne=function(){return{type:Yt}},re=function(t){return{type:Vt,payload:t}},oe=function(){return{type:qt}},ae=function(){return{type:Zt}},ce=function(){return{type:Qt}},ie=function(){return{type:$t}};var ue=function(t){var e=t.style,n=t.btnRef,r=t.pressed,a=t.text;return o.a.createElement("div",{style:e,className:"".concat(Ct.a["button-container"]),ref:n},o.a.createElement("button",{className:"\n        ".concat(Ct.a["tetris-button"]," ").concat(Ct.a["tetris-button__dark"],"\n        ").concat(r&&Ct.a["tetris-button__active"]," ").concat(r&&Ct.a["tetris-button__dark__active"],"\n        "),tabIndex:"-1"}),o.a.createElement("span",null,a))};var se=function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=It({targetKey:"ArrowLeft",callback:function(){return n(ee())},continious:!0,targetButton:a});return o.a.createElement(ue,{style:e,btnRef:a,pressed:c,text:"Left"})};var le=function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=It({targetKey:"ArrowRight",callback:function(){return n(te())},continious:!0,targetButton:a});return o.a.createElement(ue,{style:e,pressed:c,btnRef:a,text:"Right"})};var fe=function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=It({targetKey:"ArrowUp",callback:function(){return n(re())},targetButton:a});return o.a.createElement(ue,{style:e,btnRef:a,pressed:c,text:"Rotate"})};var pe=function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=It({targetKey:"ArrowDown",callback:function(){return n(ne())},continious:!0,frequency:75,targetButton:a});return Object(r.useEffect)((function(){n(c?ce():ie())}),[n,c]),o.a.createElement(ue,{style:e,pressed:c,btnRef:a,text:"Down"})};var ve=function(t){var e=t.style,n=Object(i.b)(),a=Object(r.useRef)(),c=It({targetKey:" ",callback:function(){return n(ae())},targetButton:a});return o.a.createElement(ue,{style:e,btnRef:a,pressed:c,text:"Drop"})};function de(){return o.a.createElement("div",{className:Ct.a["buttons-container"]},o.a.createElement(Bt,{style:{gridArea:"start"}}),o.a.createElement(Wt,{style:{gridArea:"pause"}}),o.a.createElement(fe,{style:{gridArea:"start / start / rotate / rotate"}}),o.a.createElement(se,{style:{gridArea:"left"}}),o.a.createElement(pe,{style:{gridArea:"down"}}),o.a.createElement(le,{style:{gridArea:"right"}}),o.a.createElement(ve,{style:{gridArea:"drop"}}))}var be=n(16),ge=n.n(be);function he(){var t=Object(i.b)();return function(t){Object(r.useEffect)((function(){return document.addEventListener("visibilitychange",t),function(){document.removeEventListener("visibilitychange",t)}}),[t])}((function(){return t(Rt())})),o.a.createElement("div",{className:"".concat(ge.a["tetris-container"]," ").concat(ge.a["tetris-container__dark"])},o.a.createElement(Dt,null),o.a.createElement(de,null))}var Oe=n(7),me=Object(Oe.c)({activeBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case Vt:return r||t;case Jt:return zt({},t,{position:[t.position[0]-1,t.position[1]]});case Ht:return zt({},t,{position:[t.position[0]+1,t.position[1]]});case Yt:return zt({},t,{position:[t.position[0],t.position[1]+1]});case Ft:return r;case wt:return P();case Xt:return zt({},t,{locked:!0});case qt:return zt({},t,{locked:!1});case Qt:return zt({},t,{movementLocked:!0});case $t:return zt({},t,{movementLocked:!1});default:return t}},field:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case dt:var o=r.shape,a=r.position;return R(t,o,a);case"DESTROY_ROW":return r;case wt:return bt;default:return t}},nextBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,n=e.type;switch(n){case Ft:case wt:return P();default:return t}},gameState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.lines;switch(n){case mt:return Ot({},jt,{status:"Running",lastAction:mt});case dt:return Ot({},t,{score:t.score+10,lastAction:dt});case _t:return Ot({},t,{status:"GAME OVER",lastAction:_t});case"ROWS_DESTROYED":var o=M(t.lines+r),a=N(o);return Ot({},t,{lines:t.lines+r,score:T(Ot({},t,{lines:r})),level:o,speed:a,lastAction:"ROWS_DESTROYED"});case yt:return Ot({},t,{status:"GAME_PAUSED",lastAction:yt});case Et:return Ot({},t,{status:"Running",lastAction:Et});case wt:return Ot({},jt,{status:"Running",lastAction:wt});default:return t}},highScore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0,0],e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case"NEW_HIGH_SCORE":return t.concat(r).sort((function(t,e){return e-t})).slice(0,5);default:return t}}}),_e=[mt,wt],ye=[Jt,Ht,Yt,Vt];function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var we=[function(t){return function(e){return function(n){var r=t.getState().gameState.status,o=n.type;return _e.includes(o)?e(n):"GAME OVER"===r||"NOT_STARTED"===r||"GAME_PAUSED"===r&&"TOGGLE_PAUSE"!==o?void 0:e(n)}}},function(t){return function(e){return function(n){if("TOGGLE_PAUSE"===n.type){var r=t.getState().gameState.status;if("GAME_PAUSED"===r)return e({type:Et});if("Running"===r)return e(Rt())}return e(n)}}},function(t){return function(e){return function(n){var r=function(){return e(ne())};switch(n.type){case wt:e(n),I.set(r,$(t.getState()));break;case yt:return I.pause(r),e(n);case Et:return I.resume(r),e(n);case _t:case Qt:return I.clear(r),e(n);case $t:return I.set(r,$(t.getState())),e(n);case"ROWS_DESTROYED":var o=$(t.getState());e(n);var a=$(t.getState());o!==a&&(I.clear(r),I.set(r,a));break;default:return e(n)}}}},function(t){return function(e){return function(n){switch(n.type){case Jt:var r=t.getState();(function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+E(n)<=0||t[i+c]&&t[i+c][u+a-1]))return!1;return!0})(J(r),H(r))&&e(n);break;case Ht:var o=t.getState();(function(t,e){for(var n=e.shape,r=e.position,o=Object(f.a)(r,2),a=o[0],c=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+w(n)>=9||t[i+c]&&t[i+c][u+a+1]))return!1;return!0})(J(o),H(o))&&e(n);break;case Yt:var a=t.getState();if(H(a).locked)return;return e(n);case Zt:var c=t.getState(),i=c.field,u=c.activeBlock,s=B(i,u).position,l={shape:u.shape,position:s};return e(gt(l));case Vt:var p=t.getState(),v=p.field,d=p.activeBlock;e(re(function(t,e){var n,r=e.shape,o=e.position,a=e.locked,c={shape:(n=r,function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))}(n.slice().reverse())),position:o,locked:a},i=Math.floor(r.length/2);if(!A(t,c))return c;for(var u=Math.PI/2;u<=2*Math.PI;u*=2)for(var s=Math.floor(Math.cos(u)),l=s;0!==l&&Math.abs(l)<=i;l+=s)if(c=y({},c,{position:[o[0]+l,o[1]]}),!A(t,c))return c;return e}(v,d)));break;default:return e(n)}}}},function(t){return function(e){return function(n){var r=n.type;if(!ye.includes(r))return e(n);e(n);var o=H(t.getState()),a=o.locked,c=J(t.getState()),i=S(c,o);a&&i&&e(oe()),a||i||e({type:Xt})}}},function(t){return function(e){return function(n){var r=n.type,o=t.getState().nextBlock,a=function(){t.dispatch(gt(t.getState().activeBlock))};switch(r){case Xt:return L.set(a,500),e(n);case qt:return L.clear(a),e(n);case"TOGGLE_PAUSE":if("GAME_PAUSED"===t.getState().gameState.status)L.resume(a);else"Running"===t.getState().gameState.status&&L.pause(a);return e(n);case yt:return L.pause(a),e(n);case Et:return L.resume(a),e(n);case dt:var c=n.payload,i=t.getState().field;if(S(i,c))return e(oe());e(n);var u=function(t){var e=x(t);t=t.map((function(e,n){return(r=e)&&r.length===r.filter((function(t){return t})).length?new Array(t[n].length).fill(0):e;var r})).sort((function(t){return t.filter((function(t){return t})).length?0:-1}));var n=x(t);return{matrix:t,rows:e-n}}(t.getState().field),s=u.matrix,l=u.rows;return e(function(t){return{type:"DESTROY_ROW",payload:t}}(s)),l>0&&t.dispatch({type:"ROWS_DESTROYED",lines:l}),t.dispatch(function(t){return{type:Ft,payload:t}}(o));case Ft:var f=t.getState(),p=f.field,v=f.nextBlock;if(A(p,v)){var d=F(f);return X(f).reduce((function(t,e){return t||e<d}),!1)&&(e(function(t){return{type:"NEW_HIGH_SCORE",payload:t}}(d)),function(t){var e=JSON.stringify(t);localStorage.setItem("highScore",e)}(X(t.getState()))),e(oe()),t.dispatch({type:_t})}e(n);break;default:return e(n)}}}}],je=function(){try{var t=localStorage.getItem("highScore");return null===t?[0,0,0,0,0]:JSON.parse(t)}catch(e){return[0,0,0,0,0]}}(),Se=Oe.a.apply(void 0,we),ke=(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(Oe.e)(me,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},me,{highScore:je}),Se)),Re=n(20),Ae=n(21),xe=n.n(Ae),Te=Object(r.memo)((function(){return o.a.createElement("div",{className:xe.a.version},"v",Re.a)}));n(32);var De=function(){return o.a.createElement(i.a,{store:ke},o.a.createElement(he,null),o.a.createElement(Te,null))},Pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Me(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}n(33);W&&document.addEventListener("touchend",(function(t){t.preventDefault()})),c.a.render(o.a.createElement(De,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/tetris",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/tetris","/service-worker.js");Pe?(!function(t,e){fetch(t).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):Me(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Me(e,t)}))}}()}],[[22,1,2]]]);
//# sourceMappingURL=main.983e80c0.chunk.js.map