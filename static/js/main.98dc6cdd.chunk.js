(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],[,,,function(t,e,n){t.exports={"buttons-container":"button_buttons-container__1955V","button-container":"button_button-container__39fQB","tetris-button":"button_tetris-button__eItG2","tetris-option-button":"button_tetris-option-button__3Kl3U","tetris-button__active":"button_tetris-button__active__26vlf","tetris-option-button__active":"button_tetris-option-button__active__1vvTZ","tetris-button__dark":"button_tetris-button__dark__2RK1f","tetris-button__dark__active":"button_tetris-button__dark__active__1fMOD","tetris-option-button__dark":"button_tetris-option-button__dark__1HGSl","tetris-option-button__dark__active":"button_tetris-option-button__dark__active__W25rR"}},,function(t,e,n){t.exports={"canvas-container":"field_canvas-container__1U1ww","canvas-container__dark":"field_canvas-container__dark__2GoQP","canvas-container__light":"field_canvas-container__light__25KvA",text:"field_text__504n6"}},,,,,,,function(t,e,n){t.exports={"tetris-container":"game_tetris-container__2gHB5","tetris-container__light":"game_tetris-container__light__11ybi","tetris-container__dark":"game_tetris-container__dark__3bHhN"}},,,function(t,e,n){t.exports={"info-column":"info_info-column__2XUG0",info:"info_info__3GloF"}},,function(t,e,n){t.exports={"display-container":"display_display-container__NotnD"}},,function(t,e,n){t.exports=n(31)},,,,,function(t,e,n){},function(t,e,n){},,,,,,function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),c=n(10),a=n.n(c),i=(n(24),n(25),n(12)),u=n.n(i),s=n(17),l=n.n(s),f=n(4),p=n(1),b=n(2),d=n(9),v={I:[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],J:[[0,2,0],[0,2,0],[2,2,0]],L:[[0,3,0],[0,3,0],[0,3,3]],O:[[4,4],[4,4]],S:[[0,5,5],[5,5,0],[0,0,0]],T:[[0,0,0],[6,6,6],[0,6,0]],Z:[[7,7,0],[0,7,7],[0,0,0]]},O=["rgba(255, 255, 255, 1)","rgba(0, 243, 255, 1)","rgba(0, 90, 255, 1)","rgba(255, 118, 0, 1)","rgba(255, 247, 0, 1)","rgba(0, 255, 102, 1)","rgba(133, 0, 255, 1)","rgba(255, 0, 0, 1)"],g=4,h={I:[3,g-4],J:[3,g-3],L:[3,g-3],O:[4,g-2],S:[3,g-3],T:[3,g-3],Z:[3,g-3]},y={shape:v.I,position:h.I},_=window.devicePixelRatio,m=20*_;function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w=function(t){return Math.min.apply(Math,Object(d.a)(t.map((function(t){return~(e=t).findIndex((function(t){return t}))?e.findIndex((function(t){return t})):e.length-1;var e}))))},S=function(t){return Math.max.apply(Math,Object(d.a)(t.map((function(t){return t.reduce((function(t,e,n){return e?n:t}),0)}))))},k=function(t){return Math.max.apply(Math,Object(d.a)(t.map((function(t,e){return t.reduce((function(t,n){return n?e:t}),0)}))))},R=function(t,e){for(var n=e.shape,r=e.position,o=Object(b.a)(r,2),c=o[0],a=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(a+k(n)>=19+g||t[i+a+1]&&t[i+a+1][u+c]))return!1;return!0},x=function(t,e,n){return t>e&&t<n},P=function(t,e,n){return t.map((function(t,r){return t.map((function(t,o){return x(r,n[1]-1,n[1]+e.length)&&x(o,n[0]-1,n[0]+e[r-n[1]].length)&&e[r-n[1]][o-n[0]]?e[r-n[1]][o-n[0]]:t}))}))},D=function(t,e){for(var n=e.shape,r=e.position,o=Object(b.a)(r,2),c=o[0],a=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(c+w(n)<0||c+S(n)>9||a+k(n)>=20+g||t[i+a]&&t[i+a][u+c]))return!0;return!1},T=function(t){return t.reduce((function(t,e){return e.filter((function(t){return t})).length?++t:t}),0)},A=function(t){var e=t.score,n=t.level;switch(t.lines){case 1:return e+40*(n+1);case 2:return e+100*(n+1);case 3:return e+300*(n+1);case 4:return e+1200*(n+1);default:return e}},M=function(){return Object(d.a)("IJLOSTZ").sort((function(){return Math.round(2*Math.random()-1)}))},L=function(){var t=0,e=M();return function(){var n=e[t];return++t>6&&(t=0,e=M()),{shape:v[n],position:h[n],locked:!1}}}(),I=function(t){return Math.min(Math.ceil(t/10),15)},N=function(t){return Math.round(1e3*Math.pow(.8-.007*(t-1),t-1)*1e5)/1e5},G=function(){var t={},e={},n=function(n,o){r(n),t[n]=setTimeout(n,o),e[n]={start:(new Date).getTime(),paused:!1,wait:o}},r=function(n){t[n]&&(clearTimeout(t[n]),delete t[n],delete e[n])},o=function(n){return t[n]&&e[n]&&e[n].paused};return{set:n,clear:r,pause:function(n){if(t[n]&&!o(n)){clearTimeout(t[n]);var r=(new Date).getTime(),c=e[n].wait-(r-e[n].start);e[n]={start:r,wait:c,paused:!0}}},resume:function(r){t[r]&&o(r)&&n(r,e[r].wait)}}}(),C=function(){var t={},e={},n={},r=function(n,r){o(n),t[n]=setInterval((function(){n(),e[n]={start:(new Date).getTime(),paused:!1,ms:r,wait:0}}),r),e[n]={start:(new Date).getTime(),paused:!1,ms:r,wait:0}},o=function(r){t[r]&&(clearInterval(t[r]),clearTimeout(n[r]),delete t[r],delete e[r])},c=function(n){return t[n]&&e[n]&&e[n].paused};return{set:r,clear:o,pause:function(r){if(t[r]&&!c(r)){clearInterval(t[r]),clearTimeout(n[r]);var o=(new Date).getTime(),a=e[r].ms-(o-e[r].start);e[r]=j({},e[r],{start:o,wait:a,paused:!0})}},resume:function(o){t[o]&&c(o)&&(n[o]=setTimeout((function(){o(),r(o,e[o].ms)}),e[o].wait))}}}(),U=function(t){return O[t.reduce((function(t,e){return t||e.reduce((function(t,e){return e||t}),0)}),0)]},B=function(t,e){return t.split("(").map((function(t,n){return n?t.split(", ").map((function(t,n,r){return n<r.length-1?Math.max(Math.min(255,Math.floor(t*(100-e)/100)),0):t})).join(", "):t})).join("(")},W=function(t,e){return t.split("(").map((function(t,n){return n?t.split(", ").map((function(t,n,r){return n<r.length-1?Math.max(Math.min(255,Math.floor((255-t)*e/100+ +t)),0):t})).join(", "):t})).join("(")},K=function(t,e){for(;R(t,e);){var n=e.position;e=j({},e,{position:[n[0],n[1]+1]})}return e},z="undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),V=function(t){return"".concat(Math.floor(t/60),":").concat(("0"+Math.floor(t%60)).slice(-2))},H=function(t,e,n){e.forEach((function(e,r){return e.forEach((function(e,o){e&&t.clearRect((o+n[0])*m,(r+n[1])*m,m,m)}))}))},J=function(t){return t.activeBlock},Y=function(t){return t.field},X=function(t){return t.gameState.level},Z=function(t){return t.gameState.score},F=function(t){return t.highScore},q=function(t){return t.gameState.lines},Q=function(t){return t.gameState},$=function(t){return Q(t).speed};function tt(t){var e=t.ctx,n=t.size,r=t.position,o=t.color,c=t.text,a=Object(b.a)(r,2),i=a[0],u=a[1];e.textAlign="center",e.lineWidth=3*_,e.font="".concat(n*_,"px monospace"),e.strikeStyle="black",e.strokeText(c,i,u,190*_),e.fillStyle=o,e.fillText(c,i,u,190*_)}var et=function(t,e,n){var c=n.width,a=n.height,i=Object(r.useMemo)((function(){return c*_}),[c]),u=Object(r.useMemo)((function(){return a*_}),[a]),s=Object(r.useRef)(null),l=s.current&&s.current.getContext("2d");return Object(r.useEffect)((function(){if(l)return t(l),function(){e(l)}}),[t,e,l]),o.a.createElement("canvas",{ref:s,width:i,height:u,style:n})};function nt(t){var e=t.ctx,n=t.position,r=t.color,o=t.locked,c=void 0!==o&&o,a=t.ghost,i=void 0!==a&&a,u=Object(b.a)(n,2),s=u[0],l=u[1];if(i)e.beginPath(),e.strokeStyle="#858fa5",e.lineWidth=2*_,e.rect(s+2*_,l+2*_,m-4*_,m-4*_),e.stroke(),e.closePath();else{var f=e.createLinearGradient(s,l,s+m,l+m),p=c?W(r,75):r,d=c?W(r,25):B(r,35);f.addColorStop(0,p),f.addColorStop(.5,p),f.addColorStop(.5,d),f.addColorStop(1,d),e.fillStyle=f,e.fillRect(s+1*_,l+1*_,m-2*_,m-2*_)}}function rt(t){var e=t.block,n=t.ctx,r=t.startingRow,o=void 0===r?g:r,c=t.offset,a=void 0===c?[0,0]:c,i=t.ghost,u=void 0!==i&&i;if(e){var s=e.shape,l=e.position,f=e.locked,p=Object(b.a)(l,2),d=p[0],v=p[1],O=U(s);s.forEach((function(t,e){return t.forEach((function(t,r){if(t){var c=[d*m+r*m+a[0],v*m+(e-o)*m+a[1]];nt({ctx:n,position:c,color:O,locked:f,ghost:u})}}))}))}}var ot=n(5),ct=n.n(ot);function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ut=Object(r.memo)((function(){var t=Object(p.c)((function(t){return J(t)})),e=Object(p.c)((function(t){return Y(t)})),n=Object(p.c)((function(t){return function(t){return K(Y(t),J(t))}(t)})),c=Object(p.c)((function(t){return Q(t)})),a=Object(p.c)((function(t){return F(t)})),i=Object(p.c)((function(t){return Z(t)}));Object(r.useRef)(null).current=[[]];var u=c.status,s=Object(r.useMemo)((function(){return{width:200,height:400,position:"absolute",borderRadius:10}}),[]),l=Object(r.useMemo)((function(){return[0,0-g]}),[]),f=Object(r.useMemo)((function(){return[t.position[0],t.position[1]-g]}),[t]),b=Object(r.useMemo)((function(){return[n.position[0],n.position[1]-g]}),[n]),d=et(Object(r.useCallback)((function(t){!function(t){var e=t.field,n=t.ctx;e.forEach((function(t,r){r>g-1&&t.forEach((function(t,o){if(t){var c=[o*m,(r-g)*m],a=O[e[r][o]];nt({ctx:n,BLOCK_SIDE:m,position:c,color:a})}}))}))}({field:e,ctx:t})}),[e]),Object(r.useCallback)((function(t){H(t,e,l)}),[e,l]),s),v=et(Object(r.useCallback)((function(e){rt({block:t,ctx:e})}),[t]),Object(r.useCallback)((function(e){H(e,t.shape,f)}),[t,f]),it({},s,{zIndex:2})),h=et(Object(r.useCallback)((function(t){rt({block:n,ctx:t,ghost:!0})}),[n]),Object(r.useCallback)((function(t){H(t,n.shape,b)}),[n,b]),s),y=et(Object(r.useCallback)((function(t){var n=[e[0].length*m/2,(e.length-g-5)/2*m],r=[e[0].length*m/2,(e.length-g)/2*m];switch(u){case"NOT_STARTED":!function(t){var e=t.highScore,n=void 0===e?[]:e,r=t.ctx,o=t.color,c=t.position,a=t.size;n.reduce((function(t,e,n){return e?t.concat(tt({ctx:r,size:a,position:[c[0],c[1]+30*_*(n+2)],color:o,text:"".concat(n+1,": ").concat(e)})):t}),[]).length?(tt({ctx:r,size:30,position:c,color:o,text:"PRESS START"}),tt({ctx:r,size:20,position:[c[0],c[1]+30*_],color:o,text:"HIGH SCORES:"})):tt({ctx:r,size:30,position:[c[0],c[1]+50*_],color:o,text:"PRESS START"})}({highScore:a,ctx:t,size:20,position:n,color:"#eaeaea"});break;case"GAME_PAUSED":tt({ctx:t,size:30,position:r,color:"#eaeaea",text:"PAUSED"});break;case"GAME OVER":!function(t){var e=t.ctx,n=t.color,r=t.position,o=t.highScore;void 0!==o&&o?(tt({ctx:e,size:30,position:r,color:n,text:"GAME OVER"}),tt({ctx:e,size:30,position:[r[0],r[1]+40*_],color:n,text:"NEW"}),tt({ctx:e,size:30,position:[r[0],r[1]+80*_],color:n,text:"HIGH SCORE!"})):tt({ctx:e,size:30,position:[r[0],r[1]+60*_],color:n,text:"GAME OVER"})}({ctx:t,highScore:a.includes(i),position:n,color:"#eaeaea"});break;default:return}}),[e,a,i,u]),Object(r.useCallback)((function(t){t.clearRect(0,0,s.width*_,s.height*_)}),[s.height,s.width]),it({},s,{background:("NOT_STARTED"===u||"GAME_PAUSED"===u)&&"var(--bg-color-d)",zIndex:3}));return o.a.createElement("div",{className:"".concat(ct.a["canvas-container"]," ").concat(ct.a["canvas-container__dark"]),style:{height:400}},y,v,h,d)}));function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var lt=Object(r.memo)((function(){var t=Object(p.c)((function(t){return function(t){return t.nextBlock}(t)})),e=Object(r.useMemo)((function(){return t}),[t]).shape,n=Object(r.useMemo)((function(){return Math.floor((100*_-e[0].length*m)/2)}),[e]),c=Object(r.useMemo)((function(){return Math.floor((100*_-e.length*m)/2)}),[e]),a=Object(r.useMemo)((function(){return[n/m,c/m]}),[n,c]),i=et(Object(r.useCallback)((function(e){rt({block:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{position:[0,0]}),ctx:e,side:m,offset:[n,c],startingRow:0})}),[t,n,c]),Object(r.useCallback)((function(t){H(t,e,a)}),[e,a]),{width:100,height:100});return o.a.createElement("div",{className:"".concat(ct.a["canvas-container"]," ").concat(ct.a["canvas-container__dark"])},o.a.createElement("div",{className:ct.a.text},"Next block"),i)})),ft=function(){return(new Date).getTime()};var pt="MERGE",bt=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],dt=function(t){return{type:pt,payload:t}};function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gt="START",ht="DEFEAT",yt="PAUSE",_t="RESUME",mt="RESET",Et={status:"NOT_STARTED",lastAction:null,level:1,score:0,lines:0,speed:1e3},jt=function(){return{type:"TOGGLE_PAUSE"}},wt=function(){return{type:mt}},St=function(){return{type:yt}},kt=n(15),Rt=n.n(kt);var xt=function(){var t=Object(p.c)((function(t){return{level:X(t),score:Z(t),lines:q(t),gameState:Q(t)}})),e=t.level,n=t.score,c=t.lines,a=t.gameState,i=a.lastAction,u=Object(r.useState)(0),s=Object(b.a)(u,2),l=s[0],f=s[1],d=function(t,e){var n=Object(r.useState)(0),o=Object(b.a)(n,2),c=o[0],a=o[1],i=Object(r.useState)(ft()),u=Object(b.a)(i,2),s=u[0],l=u[1],f=Object(r.useState)(!0),p=Object(b.a)(f,2),d=p[0],v=p[1],O=Object(r.useRef)();return Object(r.useEffect)((function(){O.current=t}),[t]),Object(r.useEffect)((function(){var t=setInterval((function(){O.current(),a(0),l(ft())}),c||e);return d&&clearInterval(t),function(){clearInterval(t)}}),[e,d,c]),{start:function(){l(ft()),v(!1)},pause:function(){v(!0),a(e-(ft()-s)),l(ft())},resume:function(){d&&(v(!1),l(ft()))},reset:function(){v(!1),a(e),l(ft())}}}(Object(r.useCallback)((function(){f((function(t){return t+1}))}),[]),1e3),v=d.start,O=d.pause,g=d.resume,h=d.reset;return Object(r.useEffect)((function(){i===gt&&v(),i===mt&&(h(),f(0)),i!==yt&&i!==ht||O(),i===_t&&g()}),[a]),o.a.createElement("div",{className:Rt.a["info-column"]},o.a.createElement("div",{className:"".concat(ct.a["canvas-container"]," ").concat(ct.a["canvas-container__dark"]," ").concat(Rt.a.info)},o.a.createElement("div",null,"Level: ".concat(e)),o.a.createElement("div",null,"Score: ".concat(n)),o.a.createElement("div",null,"Lines: ".concat(c)),o.a.createElement("div",null,"Time: ".concat(V(l)))),o.a.createElement(lt,null))};function Pt(){return o.a.createElement("div",{className:l.a["display-container"]},o.a.createElement(ut,null),o.a.createElement(xt,null))}var Dt=z?"touchend":"mouseup",Tt=z?"touchstart":"mousedown",At=function(t,e){return t&&e&&e.toLowerCase()===t.toLowerCase()},Mt=function(t,e,n){return t&&e.type===n&&t.current.contains(e.target)};function Lt(t){var e,n,o=t.targetKey,c=t.callback,a=t.continious,i=void 0!==a&&a,u=t.targetButton,s=void 0!==u&&u,l=t.frequency,f=void 0===l?100:l,p=t.delay,d=void 0===p?200:p,v=Object(r.useState)(!1),O=Object(b.a)(v,2),g=O[0],h=O[1],y=function(t){var e=t.key;(At(o,e)||Mt(s,t,Tt))&&(t.preventDefault(),h(!0))},_=function(t){var e=t.key;(At(o,e)||Mt(s,t,Dt))&&(t.preventDefault(),h(!1))};return Object(r.useEffect)((function(){return window.addEventListener("keydown",y),window.addEventListener("keyup",_),s&&(window.addEventListener(Tt,y),window.addEventListener(Dt,_)),function(){window.removeEventListener("keydown",y),window.removeEventListener("keydup",_),s&&(window.addEventListener(Tt,y),window.addEventListener(Dt,_))}}),[o]),Object(r.useEffect)((function(){if(c)return g&&c(),i&&(n=setTimeout((function(){return e=setInterval((function(){g&&i&&c()}),f)}),d)),function(){clearTimeout(n),clearInterval(e)}}),[g,i,d]),g}var It=n(3),Nt=n.n(It);function Gt(t){var e=t.style,n=t.text,r=t.pressed,c=t.btnRef;return o.a.createElement("div",{style:e,className:"".concat(Nt.a["button-container"])},o.a.createElement("button",{className:"\n        ".concat(Nt.a["tetris-option-button"]," ").concat(Nt.a["tetris-option-button__dark"],"\n        ").concat(r&&Nt.a["tetris-option-button__active"]," ").concat(r&&Nt.a["tetris-option-button__dark__active"],"\n        "),ref:c}),o.a.createElement("div",null,n))}var Ct=function(t){var e=t.style,n=Object(p.b)(),c=Object(r.useRef)(),a=Lt({targetKey:"s",callback:function(){return n(wt())},targetButton:c});return o.a.createElement(Gt,{style:e,btnRef:c,pressed:a,text:"Start"})};var Ut=function(t){var e=t.style,n=Object(p.b)(),c=Object(r.useRef)(),a=Lt({targetKey:"p",callback:function(){return n(jt())},targetButton:c});return o.a.createElement(Gt,{style:e,btnRef:c,pressed:a,text:"Pause"})};function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Kt="active-block/ROTATE",zt="active-block/MOVE_RIGHT",Vt="active-block/MOVE_LEFT",Ht="active-block/MOVE_DOWN",Jt="active-block/SET_NEW_TETRIMINO",Yt="active-block/LOCK",Xt="active-block/UNLOCK",Zt="active-block/DROP",Ft="active-block/MOVE_LOCK",qt="active-block/MOVE_UNLOCK",Qt=function(){return{type:zt}},$t=function(){return{type:Vt}},te=function(){return{type:Ht}},ee=function(t){return{type:Kt,payload:t}},ne=function(){return{type:Xt}},re=function(){return{type:Zt}},oe=function(){return{type:Ft}},ce=function(){return{type:qt}};var ae=function(t){var e=t.style,n=t.btnRef,r=t.pressed,c=t.text;return o.a.createElement("div",{style:e,className:"".concat(Nt.a["button-container"]),ref:n},o.a.createElement("button",{className:"\n        ".concat(Nt.a["tetris-button"]," ").concat(Nt.a["tetris-button__dark"],"\n        ").concat(r&&Nt.a["tetris-button__active"]," ").concat(r&&Nt.a["tetris-button__dark__active"],"\n        "),tabIndex:"-1"}),o.a.createElement("span",null,c))};var ie=function(t){var e=t.style,n=Object(p.b)(),c=Object(r.useRef)(),a=Lt({targetKey:"ArrowLeft",callback:function(){return n($t())},continious:!0,targetButton:c});return o.a.createElement(ae,{style:e,btnRef:c,pressed:a,text:"Left"})};var ue=function(t){var e=t.style,n=Object(p.b)(),c=Object(r.useRef)(),a=Lt({targetKey:"ArrowRight",callback:function(){return n(Qt())},continious:!0,targetButton:c});return o.a.createElement(ae,{style:e,pressed:a,btnRef:c,text:"Right"})};var se=function(t){var e=t.style,n=Object(p.b)(),c=Object(r.useRef)(),a=Lt({targetKey:"ArrowUp",callback:function(){return n(ee())},targetButton:c});return o.a.createElement(ae,{style:e,btnRef:c,pressed:a,text:"Rotate"})};var le=function(t){var e=t.style,n=Object(p.b)(),c=Object(r.useRef)(),a=Lt({targetKey:"ArrowDown",callback:function(){return n(te())},continious:!0,frequency:75,targetButton:c});return Object(r.useEffect)((function(){n(a?oe():ce())}),[n,a]),o.a.createElement(ae,{style:e,pressed:a,btnRef:c,text:"Down"})};var fe=function(t){var e=t.style,n=Object(p.b)(),c=Object(r.useRef)(),a=Lt({targetKey:" ",callback:function(){return n(re())},targetButton:c});return o.a.createElement(ae,{style:e,btnRef:c,pressed:a,text:"Drop"})};function pe(){return o.a.createElement("div",{className:Nt.a["buttons-container"]},o.a.createElement(Ct,{style:{gridArea:"start"}}),o.a.createElement(Ut,{style:{gridArea:"pause"}}),o.a.createElement(se,{style:{gridArea:"start / start / rotate / rotate"}}),o.a.createElement(ie,{style:{gridArea:"left"}}),o.a.createElement(le,{style:{gridArea:"down"}}),o.a.createElement(ue,{style:{gridArea:"right"}}),o.a.createElement(fe,{style:{gridArea:"drop"}}))}function be(){var t=Object(p.b)();return function(t){Object(r.useEffect)((function(){return document.addEventListener("visibilitychange",t),function(){document.removeEventListener("visibilitychange",t)}}),[t])}((function(){return t(St())})),o.a.createElement("div",{className:"".concat(u.a["tetris-container"]," ").concat(u.a["tetris-container__dark"])},o.a.createElement(Pt,null),o.a.createElement(pe,null))}var de=function(){return o.a.createElement(be,null)},ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Oe(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var ge=n(7),he=Object(ge.c)({activeBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case Kt:return r||t;case Vt:return Wt({},t,{position:[t.position[0]-1,t.position[1]]});case zt:return Wt({},t,{position:[t.position[0]+1,t.position[1]]});case Ht:return Wt({},t,{position:[t.position[0],t.position[1]+1]});case Jt:return r;case mt:return L();case Yt:return Wt({},t,{locked:!0});case Xt:return Wt({},t,{locked:!1});case Ft:return Wt({},t,{movementLocked:!0});case qt:return Wt({},t,{movementLocked:!1});default:return t}},field:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case pt:var o=r.shape,c=r.position;return P(t,o,c);case"DESTROY_ROW":return r;case mt:return bt;default:return t}},nextBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0,n=e.type;switch(n){case Jt:case mt:return L();default:return t}},gameState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.lines;switch(n){case gt:return Ot({},Et,{status:"Running",lastAction:gt});case pt:return Ot({},t,{score:t.score+10,lastAction:pt});case ht:return Ot({},t,{status:"GAME OVER",lastAction:ht});case"ROWS_DESTROYED":var o=I(t.lines+r),c=N(o);return Ot({},t,{lines:t.lines+r,score:A(Ot({},t,{lines:r})),level:o,speed:c,lastAction:"ROWS_DESTROYED"});case yt:return Ot({},t,{status:"GAME_PAUSED",lastAction:yt});case _t:return Ot({},t,{status:"Running",lastAction:_t});case mt:return Ot({},Et,{status:"Running",lastAction:mt});default:return t}},highScore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0,0],e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case"NEW_HIGH_SCORE":return t.concat(r).sort((function(t,e){return e-t})).slice(0,5);default:return t}}}),ye=[gt,mt],_e=[Vt,zt,Ht,Kt];function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Ee=[function(t){return function(e){return function(n){var r=t.getState().gameState.status,o=n.type;return ye.includes(o)?e(n):"GAME OVER"===r||"NOT_STARTED"===r||"GAME_PAUSED"===r&&"TOGGLE_PAUSE"!==o?void 0:e(n)}}},function(t){return function(e){return function(n){if("TOGGLE_PAUSE"===n.type){var r=t.getState().gameState.status;if("GAME_PAUSED"===r)return e({type:_t});if("Running"===r)return e(St())}return e(n)}}},function(t){return function(e){return function(n){var r=function(){return e(te())};switch(n.type){case mt:e(n),C.set(r,$(t.getState()));break;case yt:return C.pause(r),e(n);case _t:return C.resume(r),e(n);case ht:case Ft:return C.clear(r),e(n);case qt:return C.set(r,$(t.getState())),e(n);case"ROWS_DESTROYED":var o=$(t.getState());e(n);var c=$(t.getState());o!==c&&(C.clear(r),C.set(r,c));break;default:return e(n)}}}},function(t){return function(e){return function(n){var r,o=function(){return t.getState().activeBlock},c=function(){return t.getState().field};switch(n.type){case Vt:(function(t,e){for(var n=e.shape,r=e.position,o=Object(b.a)(r,2),c=o[0],a=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(c+w(n)<=0||t[i+a]&&t[i+a][u+c-1]))return!1;return!0})(c(),o())&&e(n);break;case zt:(function(t,e){for(var n=e.shape,r=e.position,o=Object(b.a)(r,2),c=o[0],a=o[1],i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++)if(n[i][u]&&(c+S(n)>=9||t[i+a]&&t[i+a][u+c+1]))return!1;return!0})(c(),o())&&e(n);break;case Ht:if((r=o()).locked)return;return e(n);case Zt:r=o();var a=c(),i=K(a,r);return e(dt(i));case Kt:e(ee(function(t,e){var n,r=e.shape,o=e.position,c=e.locked,a={shape:(n=r,function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))}(n.slice().reverse())),position:o,locked:c},i=Math.floor(r.length/2);if(!D(t,a))return a;for(var u=Math.PI/2;u<=2*Math.PI;u*=2)for(var s=Math.floor(Math.cos(u)),l=s;0!==l&&Math.abs(l)<=i;l+=s)if(a=j({},a,{position:[o[0]+l,o[1]]}),!D(t,a))return a;return e}(c(),o())));break;default:return e(n)}}}},function(t){return function(e){return function(n){var r=n.type;if(!_e.includes(r))return e(n);e(n);var o=t.getState().activeBlock,c=o.locked,a=t.getState().field,i=R(a,o);c&&i&&e(ne()),c||i||e({type:Yt})}}},function(t){return function(e){return function(n){var r=n.type,o=t.getState().nextBlock,c=function(){t.dispatch(dt(t.getState().activeBlock))};switch(r){case Yt:return G.set(c,500),e(n);case Xt:return G.clear(c),e(n);case"TOGGLE_PAUSE":if("GAME_PAUSED"===t.getState().gameState.status)G.resume(c);else"Running"===t.getState().gameState.status&&G.pause(c);return e(n);case yt:return G.pause(c),e(n);case _t:return G.resume(c),e(n);case pt:var a=n.payload,i=t.getState().field;if(R(i,a))return e(ne());e(n);var u=function(t){var e=T(t);t=t.map((function(e,n){return(r=e)&&r.length===r.filter((function(t){return t})).length?new Array(t[n].length).fill(0):e;var r})).sort((function(t){return t.filter((function(t){return t})).length?0:-1}));var n=T(t);return{matrix:t,rows:e-n}}(t.getState().field),s=u.matrix,l=u.rows;return e(function(t){return{type:"DESTROY_ROW",payload:t}}(s)),l>0&&t.dispatch({type:"ROWS_DESTROYED",lines:l}),t.dispatch(function(t){return{type:Jt,payload:t}}(o));case Jt:var f=t.getState();if(D(f.field,f.nextBlock)){var p=Z(f);return F(f).reduce((function(t,e){return t||e<p}),!1)&&(e(function(t){return{type:"NEW_HIGH_SCORE",payload:t}}(p)),function(t){var e=JSON.stringify(t);localStorage.setItem("highScore",e)}(F(t.getState()))),e(ne()),t.dispatch({type:ht})}e(n);break;default:return e(n)}}}}],je=function(){try{var t=localStorage.getItem("highScore");return null===t?[0,0,0,0,0]:JSON.parse(t)}catch(e){return[0,0,0,0,0]}}(),we=ge.a.apply(void 0,Ee),Se=(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(ge.e)(he,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},he,{highScore:je}),we)),ke=Se;window.store=Se,z&&document.addEventListener("touchend",(function(t){t.preventDefault()})),a.a.render(o.a.createElement(p.a,{store:ke},o.a.createElement(de,null)),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/tetris",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/tetris","/service-worker.js");ve?(!function(t,e){fetch(t).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):Oe(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Oe(e,t)}))}}()}],[[19,1,2]]]);
//# sourceMappingURL=main.98dc6cdd.chunk.js.map